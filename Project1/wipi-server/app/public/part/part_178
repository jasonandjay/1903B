lity\",screen_proportion:\"screen_proportion\",light_onoff:\"light_onoff\",color_picker:\"danmaku_selectcolor\",\nfontsize_selector:\"danmaku_selectsize\",pool_selector:\"danmaku_selectclass\",mode_selector:\"danmaku_selectmode\",danmaku_ban_textfield:\"danmaku_ban_textfield\",end_up:\"end_up\",list_prevent:\"list_prevent\",list_report:\"list_report\",list_recall:\"list_recall\",list_prevent_all:\"list_prevent_all\",end_btn_follow:\"end_btn_follow\",end_btn_battery:\"end_btn_battery\",end_coin:\"end_coin\",end_replay:\"end_replay\",end_share:\"end_share\",mini_close:\"mini_close\",mini_drag:\"mini_drag\",recommend_video:\"recommend_video\",tab_danmulist:\"tab_danmulist\",\ntab_recommend:\"tab_recommend\",tab_danmupreventset:\"tab_danmupreventset\",recommend_show:\"recommend_show\",recommend_chick:\"recommend_chick\",button_setting:\"button_setting\",button_videorecommend:\"button_videorecommend\",button_advanceddanmu:\"button_advanceddanmu\",keyboard_vol:\"keyboard_vol\",main_1080p:\"main_1080p\",sub_1080p:\"sub_1080p\",offsite_share_weibo_click:\"offsite_share_weibo_click\",offsite_share_qq_click:\"offsite_share_qq_click\",offsite_share_qzone_click:\"offsite_share_qzone_click\",offsite_share_tieba_click:\"offsite_share_tieba_click\",\noffsite_top_title_click:\"offsite_top_title_click\",offsite_top_viewitnow_click:\"offsite_top_viewitnow_click\"};this.loadState=!1;this.fixTime=0;this.player=b;this.displayId=Date.now();this.init()}f.prototype.init=function(){var b=this,c=this,d=this.player,e={},f=null;c.player.trackInfoPush(\"enter\",d.window.document?d.window.document.referrer:\"\");d.window&&d.window.GrayManager&&d.window.GrayManager.initialCallback&&d.window.GrayManager.initialCallback(\"html5\");d.eventLog.log(\"Tracker Initialized\",0);\nthis.firstClick=!1;d.bind(g.a.EVENT.VIDEO_INITIALIZING,function(b,c,d,f){if(!f)return!1;e[c]||(e[c]={});e[c][d]=Date.now()});d.bind(g.a.EVENT.VIDEO_DANMAKU_LOAD,function(){f=Date.now()});d.bind(g.a.EVENT.VIDEO_DANMAKU_LOADED,function(b,d,e){if(!d)return c.player.trackInfoPush(\"web_load_danmuku_fail\",e),!1;(undefined);c.player.trackInfoPush(\"web_load_danmuku\",e)});d.bind(g.a.EVENT.VIDEO_INITIALIZED,function(){var b=e[1].end-e[1].start,d=e[2].end-e[2].start,\nf=e[3].end-e[3].start-(0<c.fixTime?c.fixTime:0),g=c.player.getPlayurl();(undefined);(undefined);(undefined);c.player.trackInfoPush(\"web_videoload_time\",\"viewTime:\"+b+\",cdnTime:\"+d+\",showTime:\"+f+\",url:\"+g)});d.bind(g.a.EVENT.VIDEO_MEDIA_LOADLAG,function(b,d){c.player.trackInfoPush(\"web_loadlag\",\"url:\"+d)});d.bind(g.a.EVENT.VIDEO_MEDIA_ERROR,function(b,d,e,f){if(!d)return!0;c.errorObj[e]&&c.errorObj[e]===(f||\n!0)||(c.errorObj[e]=f||!0,c.player.trackInfoPush(\"web_videoload_fail\",\"type:\"+d+\",code:\"+e+(f?\",\"+f:\"\")))});d.bind(g.a.EVENT.VIDEO_MEDIA_SEEK,function(){null===c.seek.start&&(c.seek.start=d.currentTime());(undefined)});d.bind(g.a.EVENT.VIDEO_MEDIA_SEEKED,function(){null!==c.seek.start&&(c.seek.total+=d.currentTime()-c.seek.start,c.seek.start=null);b.nextRestart&&(b.nextRestart=!1);(undefined)});\nd.bind(g.a.EVENT.VIDEO_BEFORE_DESTROY,function(){});d.bind(g.a.EVENT.VIDEO_DESTROY,function(){c.player.trackInfoPush(\"quit\");c.destroy()});d.bind(g.a.EVENT.VIDEO_MEDIA_PLAYING,function(){b.firstClick&&(b.enableHeartBeat=!0)});d.bind(g.a.EVENT.VIDEO_MEDIA_PAUSE,function(){b.enableHeartBeat=!1});d.$window.off(\"beforeunload\"+d.config.namespace+\"track\").on(\"beforeunload\"+d.config.namespace+\"track\",function(){});(this.player.iframe?$(window):$(this.player.$parent)).off(\"click\"+d.config.namespace+\"track\").on(\"click\"+\nd.config.namespace+\"track\",function(b){if(b.target)if(b=$(b.target).attr(\"name\"),/\\s/.test(b)){b=b.replace(/\\s+/g,\" \").split(\" \");for(var d=0;d<b.length;d++){var e=c.trackNameMapping[b[d]];e&&c.player.trackInfoPush(e)}}else c.trackNameMapping[b]&&c.player.trackInfoPush(c.trackNameMapping[b])})};f.prototype.sendService=function(b,c,d){void 0===b&&(b=g.a.TRACK.EVENT);void 0===d&&(d=\"\");(undefined);var f=this.player,m=f.video?Math.floor(f.currentTime()):0;(new e.a({logid:b,\nctime:null,fid:\"outer\",fver:\"HTML5Player \"+h.a.hash,eventid:c,eventparam:d,displayid:this.displayId+\"\",seasonid:f.config.seasonId||\"\",epid:f.config.episodeId||\"\",avid:f.config.aid||\"\",bvid:f.config.bvid,cid:f.config.cid,pname:f.config.p,progress:m,readystate:null,statue:this.playerStatue[f.state.mode],playmethod:f.state.play_type,videotype:1,quality:f.videoQuality})).getData()};f.prototype.loadTrackUp=function(b){var c=this;b&&(this.loadState=!0);if(this.loadState&&!this.upTimer){var d=b=void 0;if(0<\nthis.player.trackInfoList.length){b=this.player.trackInfoList.shift();switch(b.name){case \"danmaku_protect_loaded\":case \"danmaku_protect_loaded_failed\":case \"enter\":case \"end\":case \"quit\":case \"web_videoload_time\":case \"web_load_danmuku\":case \"video_error_event\":case \"video_error\":case \"video_log_event\":case \"start_load\":case \"end_load\":case \"seek_end_load\":case \"web_loadlag\":case \"web_loadlag_end\":case \"overtime_change\":case \"start_time\":case \"loaded_time\":case \"web_videoload_fail\":case \"fram_discard_badcase\":case \"load_videoerror_code\":case \"range_early_eof\":case \"video_filesize_different\":case \"time_error\":case \"end_recommend_show\":case \"initial_time\":case \"frame_time\":d=\ng.a.TRACK.OP;break;default:d=g.a.TRACK.EVENT}this.send(b.name,b.params,d);this.upTimer=window.setTimeout(function(){c.upTimer=0;c.loadTrackUp()},100)}}};f.prototype.send=function(b,c,d){if(\"video_error\"===b){if(this.videoErrorSymbol)return;this.videoErrorSymbol=!0}if(\"quit\"===b){if(this.videoQuitSymbol)return;this.videoQuitSymbol=!0}this.sendService(d,b,c)};f.prototype.shouldHeartbeatBeDisabled=function(b){return 3===b?2!==this.prevPlayerType:1===this.prevPlayerType||3===this.prevPlayerType?1===b||\n3===b:!1};f.prototype.heartBeat=function(b){void 0===b&&(b=0);if(!this.stime)return!1;if(!this.shouldHeartbeatBeDisabled(b)){var c=this.player;try{var d=this.isPlayerComplete()?-1:Math.floor(c.currentTime())}catch(u){d=Math.floor(c.currentTime())}c.currentTime();4===b&&(this.nextRestart=!0);c.trigger(g.a.EVENT.VIDEO_HEARTBEAT,{progress:d});this.prevPlayerType=b}};f.prototype.isPlayerComplete=function(){return this.player.videoDisableTime?this.player.state.video_state===g.a.V_COMPLETE||this.player.video.duration&&\nthis.player.currentTime().toFixed(1)===this.player.video.duration.toFixed(1):this.player.state.video_state===g.a.V_COMPLETE||this.player.duration()&&this.player.currentTime().toFixed(1)===this.player.duration().toFixed(1)};f.prototype.getServerTime=function(d){(new b.a({jsonp:\"jsonp\"})).getData({success:function(b){b&&0===b.code&&b.data&&b.data.now?(c.a.getLocalSettings(\"html5PlayerServerTime\")||c.a.setLocalSettings(\"html5PlayerServerTime\",String(b.data.now)),d(b.data.now)):d(Math.floor(Date.now()/\n1E3))},error:function(b){d(Math.floor(Date.now()/1E3))}})};f.prototype.getPointParams=function(b){var d=this.player;try{d.user.status(),this.getServerTime(function(e){e={aid:d.config.aid,bvid:d.config.bvid,cid:d.config.cid,part:d.config.p,mid:\"\",lv:0,ftime:+c.a.getLocalSettings(\"html5PlayerServerTime\")||e,stime:e,jsonp:\"jsonp\",type:0<d.config.seasonType?4:3,sub_type:d.config.seasonType};d.config.bvid&&delete e.aid;d.config.seasonId&&(e.sid=d.config.seasonId,e.epid=d.config.episodeId);b(e)})}catch(A){(undefined),\nb(!1)}};f.prototype.sendRealtime=function(b){this.stime=b.stime};f.prototype.sendPoint=function(b){var c=[],e=new XMLHttpRequest;for(f in b)b.hasOwnProperty(f)&&c.push(f+\"=\"+b[f]);e.open(\"POST\",d.a.X_REPORT_CLICK_WEB_H5,!0);e.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");e.withCredentials=!0;e.send(c.join(\"&\"));c=1E3*b.stime;e=encodeURIComponent(this.player.window.location.href);var f=[];f.push(\"000024\"+c+e,\"html5_player\",h.a.hash,b.aid,b.cid,this.player.config.p,this.player.videoQuality,\nthis.player.state.repeat?1:0);$.ajax({url:d.a.LOG_WEB,type:\"GET\",data:f.join(\"|\"),xhrFields:{withCredentials:!0},dataType:\"json\"})};f.prototype.view=function(){var b=this;this.player.userLoadedCallback(function(){b.firstClick||b.destroyed||(b.firstClick=!0,b.getPointParams(function(c){c&&!b.destroyed&&(b.sendPoint(c),b.sendRealtime(c))}),c.a.getSearchParam(\"from\")&&c.a.getSearchParam(\"seid\")&&b.send(\"play_start\",\"from:\"+c.a.getSearchParam(\"from\")+\",seid:\"+c.a.getSearchParam(\"seid\")))})};f.prototype.destroy=\nfunction(){this.destroyed=!0;this.upTimer&&clearTimeout(this.upTimer)};return f}();v.a=p},function(p,v,n){p=n(4);var h=n(7),g=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};return function(c,b){function e(){this.constructor=c}d(c,b);c.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}();n=function(d){function c(b){return d.call(this,b)||this}\ng(c,d);c.prototype.getData=function(b){var c=this,d=this.convertUpload(this.data);$.ajax({url:h.a.X_REPORT_CLICK_NOW,type:\"GET\",data:d,dataType:\"json\",xhrFields:{withCredentials:!0},beforeSend:function(c){\"function\"===typeof b.beforeSend&&b.beforeSend(c)},success:function(d){b.success(c.convertResult(d))},error:function(c){b.error(c)}})};c.prototype.convertUpload=function(b){return{jsonp:b.jsonp}};c.prototype.convertResult=function(b){return{code:b.code,data:{now:b.data.now},message:b.message,ttl:b.ttl}};\nreturn c}(p.a);v.a=n},function(p,v,n){p=n(4);var h=n(7),g=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};return function(c,b){function e(){this.constructor=c}d(c,b);c.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}();n=function(d){function c(b){return d.call(this,b)||this}g(c,d);c.prototype.getData=function(){var b=this.convertUpload(this.data);\n$.ajax({url:h.a.LOG_WEB+\"?\"+this.data.logid+ +new Date+b.join(\"|\"),type:\"get\",xhrFields:{withCredentials:!0}})};c.prototype.convertUpload=function(b){return[b.ctime,b.fid,b.fver,b.eventid,b.eventparam,b.displayid,b.seasonid,b.epid,b.avid,b.cid,b.pname,b.progress,b.readystate,b.statue,b.playmethod,b.videotype,b.quality]};return c}(p.a);v.a=n},function(p,v,n){v.a={generateVideoInfoItems:function(h){return\"NativePlayer\"===h?{infos:[{name:\"mimeType\",type:\"text\",title:\"Mime Type\",data:\"\"},{name:\"playerType\",\ntype:\"text\",title:\"Player Type\",data:\"\"},{name:\"resolution\",type:\"text\",title:\"Resolution\",data:\"\"},{name:\"streamType\",type:\"text\",title:\"Stream Type\",data:\"\"},{name:\"streamHost\",type:\"text\",title:\"Stream Host\",data:\"\"},{name:\"droppedFrames\",type:\"text\",title:\"Dropped Frames\",data:\"\"},{name:\"Log\",type:\"log\",title:\"Log\",data:\"\"}]}:\"DashPlayer\"===h?{infos:[{name:\"mimeType\",type:\"text\",title:\"Mime Type\",data:\"\"},{name:\"playerType\",type:\"text\",title:\"Player Type\",data:\"\"},{name:\"resolution\",type:\"text\",\ntitle:\"Resolution\",data:\"\"},{name:\"videoDatarate\",type:\"text\",title:\"Video DataRate\",data:\"\"},{name:\"audioDatarate\",type:\"text\",title:\"Audio DataRate\",data:\"\"},{name:\"segments\",type:\"text\",title:\"Segments\",data:\"\"},{name:\"videoStreamHost\",type:\"text\",title:\"Video Host\",data:\"\"},{name:\"audioStreamHost\",type:\"text\",title:\"Audio Host\",data:\"\"},{name:\"videoConnectionSpeed\",type:\"graph\",title:\"Video Speed\",unit:\"Kbps\",data:0},{name:\"audioConnectionSpeed\",type:\"graph\",title:\"Audio Speed\",unit:\"Kbps\",data:0},\n{name:\"networkActivity\",type:\"graph\",title:\"Network Activity\",unit:\"KB\",data:0},{name:\"droppedFrames\",type:\"text\",title:\"Dropped Frames\",data:\"\"},{name:\"Log\",type:\"log\",title:\"Log\",data:\"\"}]}:{infos:[{name:\"mimeType\",type:\"text\",title:\"Mime Type\",data:\"\"},{name:\"playerType\",type:\"text\",title:\"Player Type\",data:\"\"},{name:\"resolution\",type:\"text\",title:\"Resolution\",data:\"\"},{name:\"fps\",type:\"text\",title:\"FPS\",data:\"\"},{name:\"videoProfile\",type:\"text\",title:\"Video Profile\",data:\"\"},{name:\"audioSampling\",\ntype:\"text\",title:\"Audio Sampling\",data:\"\"},{name:\"videoDatarate\",type:\"text\",title:\"Video DataRate\",data:\"\"},{name:\"audioDatarate\",type:\"text\",title:\"Audio DataRate\",data:\"\"},{name:\"segments\",type:\"text\",title:\"Segments\",data:\"\"},{name:\"loader\",type:\"text\",title:\"Loader\",data:\"\"},{name:\"streamType\",type:\"text\",title:\"Stream Type\",data:\"\"},{name:\"streamHost\",type:\"text\",title:\"Stream Host\",data:\"\"},{name:\"connectionSpeed\",type:\"graph\",title:\"Connection Speed\",unit:\"KB/s\",data:0},{name:\"droppedFrames\",\ntype:\"text\",title:\"Dropped Frames\",data:\"\"},{name:\"Log\",type:\"log\",title:\"Log\",data:\"\"}]}},updateVideoInfoData:function(h,g,d){if(0===Object.keys(g).length||0===Object.keys(d).length)return[];var c=g.width&&g.height?g.width+\" x \"+g.height:\"\";\"DashPlayer\"===h?c+=\"@\"+Number(g.fps).toFixed(3):(g.hasOwnProperty(\"sarNum\")&&(c+=\" [SAR \"+g.sarNum+\":\"+g.sarDen+\"]\"),g.hasOwnProperty(\"sar\")&&(c+=\" [SAR \"+g.sar+\"]\"));var b,e;try{if(d.url){var f=/https?:\\/\\/(.+?)\\//.exec(d.url)[1];var k=/^(https?|wss?)\\:\\/\\/?/.exec(d.url)[1]}d.videoURL&&\n(b=/https?:\\/\\/(.+?)\\//.exec(d.videoURL)[1]);d.audioURL&&(e=/https?:\\/\\/(.+?)\\//.exec(d.audioURL)[1])}catch(A){k=f=\"\"}var m=d.droppedFrames&&d.decodedFrames?d.droppedFrames+\"/\"+d.decodedFrames:\"\",c=[{name:\"mimeType\",data:g.mimeType},{name:\"playerType\",data:d.playerType},{name:\"resolution\",data:c},{name:\"streamType\",data:k},{name:\"streamHost\",data:f},{name:\"droppedFrames\",data:m}];if(\"NativePlayer\"===h)return c;if(\"DashPlayer\"===h)return h=g.videoDataRate,g=g.audioDataRate,c.splice(3,3),c=c.concat([{name:\"videoDatarate\",\ndata:Math.round(h/1024)+\" Kbps\"},{name:\"audioDatarate\",data:Math.floor(g/1024)+\" Kbps\"},{name:\"segments\",data:(d.audioCurrentSegmentIndex||1)+\" / \"+(d.audioTotalSegmentCount||0)},{name:\"droppedFrames\",data:m},{name:\"videoStreamHost\",data:b},{name:\"audioStreamHost\",data:e},{name:\"videoConnectionSpeed\",data:Math.round(d.videoConnectionSpeed)},{name:\"audioConnectionSpeed\",data:Math.round(d.audioConnectionSpeed)},{name:\"networkActivity\",data:Math.round(d.networkActivity/1024)}]);b=+d.currentSegmentIndex+\n1+\"/\"+d.totalSegmentCount;e=g.profile+\", L\"+g.level;m=g.audioSampleRate+\" Hz\";h=g.audioChannelCount;m=1===h?m+\", Mono\":2===h?m+\", Stereo\":m+(\", \"+h+\" Channels\");g.metadata&&g.metadata.description&&(m+=g.metadata.description&&/fixed_gap:True/.test(g.metadata.description)?\", Fixed\":\"\");h=g.videoDataRate;f=g.audioDataRate;return c=c.concat([{name:\"fps\",data:g.fps.toFixed(3)},{name:\"videoProfile\",data:e},{name:\"audioSampling\",data:m},{name:\"videoDatarate\",data:Math.round(h)+\" Kbps\"},{name:\"audioDatarate\",\ndata:Math.round(f)+\" Kbps\"},{name:\"segments\",data:b},{name:\"loader\",data:d.loaderType},{name:\"connectionSpeed\",data:Math.round(d.speed)}])}}},function(p,v,n){p=function(){function h(g){this.timeout=5E3;this.timerInfo={errorInfoId:[]};this.restTime=null;this.isPay=!1;this.domNodes={};this.player=g;this.prefix=g.prefix;this.init()}h.prototype.init=function(){this.createWrapper();this.player.eventLog.log(\"Toast Initialized\",0)};h.prototype.addErrorInfo=function(g){var d=this,c=$.extend(!0,{},{maxLen:4,\ntimeout:1E3,isSuccess:!1},g);g=$('<div class=\"'+this.prefix+\"-video-toast-item \"+this.prefix+'-video-toast-error-info\"></div>');var b=$('<div class=\"'+this.prefix+\"-video-toast-item-text \"+this.prefix+'-video-toast-error-info\"></div>');g.append(b);b.append(c.msg);c&&c.isSuccess&&this.timerInfo.errorInfoId.push(window.setTimeout(function(){return d.domNodes.middleArea.animate({opacity:0},300,function(){d.domNodes.middleArea.empty();d.domNodes.middleArea.css({opacity:1});c&&\"function\"===typeof c.callback&&\nc.callback()})},c.timeout));this.domNodes.middleArea.children().length<c.maxLen||$(this.domNodes.middleArea.children()[0]).remove();this.domNodes.middleArea.append(g);return{item:g}};h.prototype.addTopHinter=function(g,d,c){var b=$('<div class=\"'+this.prefix+'-video-toast-item\"></div>'),e=$('<div class=\"'+this.prefix+'-video-toast-item-text\"></div>');b.append(e);e.append(g);clearTimeout(this.timerInfo.topId);this.timerInfo.topId=window.setTimeout(function(){return b.animate({opacity:0},300,function(){b.remove();\n\"function\"===typeof c&&c()})},d||1E3);this.domNodes.topArea.empty().append(b);return{item:b}};h.prototype.addMiddleHinter=function(g){g=$(g);this.domNodes.middleArea.empty().append(g);return{item:g}};h.prototype.addBottomHinter=function(g){var d=this;if(this.isPay)return!1;var c=null,b=this,e=$('<div class=\"'+this.prefix+'-video-toast-item\"></div>'),f=$('<div class=\"'+this.prefix+'-video-toast-item-text\"></div>'),h=$('<div class=\"'+this.prefix+'-video-toast-item-jump\"></div>'),m=g.successCallback||\nfunction(){},n=g.defaultCallback||function(){},u=function(){clearTimeout(d.timerInfo.bottomId);e.off(\"mouseenter mouseleave\");e.animate({opacity:0},300,function(){return e.remove()});n()},t=function(b,e){d.timerInfo.bottomId=window.setTimeout(function(){0<=--d.restTime?(c.html(d.restTime.toString()),t(b,e)):(u(),b())},1E3)};f.append(g.text);h.append(g.jump);h.click(function(){u();\"function\"===typeof g.jumpFunc&&g.jumpFunc()});clearTimeout(this.timerInfo.bottomId);if(g.closeButton){var C=$('<div class=\"'+\nthis.prefix+'-video-toast-item-close\"><i class=\"'+this.prefix+'-iconfont icon-close\"></i></div>');C.attr(\"title\",\"\\u5173\\u95ed\");C.click(u);e.append(C);g.restTime||(this.timerInfo.bottomId=window.setTimeout(u,g.timeout||this.timeout))}g.restTime&&(this.restTime=g.restTime,c=$(\"<em>\"+this.restTime+\"</em>\"),c.prependTo(f),e.on({mouseenter:function(){clearTimeout(b.timerInfo.bottomId)},mouseleave:function(){t(m,n)}}),t(m,n));e.append(f).append(h);this.domNodes.bottomArea.empty().append(e);return{item:e,\nstop:u}};h.prototype.addPayHinter=function(g,d){var c=$('<div class=\"'+this.prefix+\"-video-toast-item \"+this.prefix+'-video-toast-pay\"></div>'),b=$('<div class=\"'+this.prefix+'-video-toast-item-text\"></div>');d&&(d=$('<div class=\"'+this.prefix+'-video-toast-item-close\"><i class=\"'+this.prefix+'-iconfont icon-close\"></i></div>'),d.attr(\"title\",\"\\u5173\\u95ed\"),d.click(function(){c.remove()}),c.append(d));b.append(g);c.append(b);this.domNodes.bottomArea.empty().append(c);this.isPay=!0;return{item:c}};\nh.prototype.createWrapper=function(){var g=$('\\n                <div class=\"'+this.prefix+'-video-toast-wrp\">\\n                    <div class=\"'+this.prefix+'-video-toast-top\"></div>\\n                    <div class=\"'+this.prefix+'-video-toast-middle\"></div>\\n                    <div class=\"'+this.prefix+'-video-toast-bottom\"></div>\\n                </div>');this.domNodes.topArea=g.find(\".\"+this.prefix+\"-video-toast-top\");this.domNodes.middleArea=g.find(\".\"+this.prefix+\"-video-toast-middle\");this.domNodes.bottomArea=\ng.find(\".\"+this.prefix+\"-video-toast-bottom\");this.domNodes.wrapper=g;this.domNodes.wrapper.appendTo(this.player.template.playerWrap)};h.prototype.destroy=function(){};return h}();v.a=p},function(p,v,n){p=n(118);var h=n.n(p),g=n(0);n=function(){return function(d,c){void 0===c&&(c=1);var b=this,e;(function(b){b[b.ALL=1]=\"ALL\";b[b.ONLYSHOWNUM=2]=\"ONLYSHOWNUM\"})(e||(e={}));this.config=Number(e.ONLYSHOWNUM)===c?{rid:d.config.cid,url:(\"https:\"===d.window.location.protocol?\"wss://\"+d.user.wsUrl().wss:\"ws://\"+\nd.user.wsUrl().ws)+\"/sub\",uid:\"0\",roomId:d.config.cid,retry:!0,aid:d.config.aid,bvid:d.config.bvid,from:7,onReceivedMessage:function(b){},onHeartBeatReply:function(b){d.template.infoWatching.html(b.count||1)},fallback:function(){}}:{rid:d.config.cid,url:(\"https:\"===d.window.location.protocol?\"wss://\"+d.user.wsUrl().wss:\"ws://\"+d.user.wsUrl().ws)+\"/sub\",uid:\"0\",roomId:d.config.cid,retry:!0,aid:d.config.aid,bvid:d.config.bvid,from:7,onReceivedMessage:function(b){if(b){var c=b.info;switch(b.cmd){case \"DM\":try{if(c instanceof\nArray){b=void 0;var e=c[1];\"string\"===typeof c[2]&&(b=c[2].split(\",\"));var f=c[0].split(\",\"),g={stime:parseFloat(f[0]),mode:Number(f[1]),size:Number(f[2]),color:Number(f[3]),date:Number(f[4]),rnd:f[5],class:Number(f[6]),uid:f[7],dmid:f[8],text:e};b&&(g.mid=+b[0],g.uname=b[1]);Number(d.pid)!==Number(g.rnd)&&d.danmaku.add(g)}}catch(t){(undefined)}}}},onHeartBeatReply:function(b){},fallback:function(){}};this.danmakuWebSocket=new h.a(this.config);d.bind(g.a.EVENT.VIDEO_DESTROY,\nfunction(){b.danmakuWebSocket.destroy()})}}();v.a=n},function(p,v,n){(function(h){var g,d,c,b=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&\"function\"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?\"symbol\":typeof b};!function(e,f){\"object\"==b(v)&&\"object\"==b(h)?h.exports=f():!(d=[],g=f,c=\"function\"===typeof g?g.apply(v,d):g,void 0!==c&&(h.exports=c))}(void 0,function(){return function(b){function c(e){if(d[e])return d[e].exports;\nvar f=d[e]={i:e,l:!1,exports:{}};return b[e].call(f.exports,f,f.exports,c),f.l=!0,f.exports}var d={};return c.m=b,c.c=d,c.d=function(b,d,e){c.o(b,d)||Object.defineProperty(b,d,{configurable:!1,enumerable:!0,get:e})},c.n=function(b){var d=b&&b.__esModule?function(){return b.default}:function(){return b};return c.d(d,\"a\",d),d},c.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)},c.p=\"\",c(c.s=1)}([function(b,c,d){c.a={WS_OP_HEARTBEAT:2,WS_OP_HEARTBEAT_REPLY:3,WS_OP_MESSAGE:5,WS_OP_USER_AUTHENTICATION:7,\nWS_OP_CONNECT_SUCCESS:8,WS_PACKAGE_HEADER_TOTAL_LENGTH:16,WS_PACKAGE_OFFSET:0,WS_HEADER_OFFSET:4,WS_VERSION_OFFSET:6,WS_OPERATION_OFFSET:8,WS_SEQUENCE_OFFSET:12,WS_BODY_PROTOCOL_VERSION:1,WS_HEADER_DEFAULT_VERSION:1,WS_HEADER_DEFAULT_OPERATION:1,WS_HEADER_DEFAULT_SEQUENCE:1}},function(b,c,d){c=d(2).default;b.exports=c},function(b,c,d){Object.defineProperty(c,\"__esModule\",{value:!0});var e=d(3),f=function(){function b(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=\n!0;\"value\"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}();b=function(){function b(c){if(!(this instanceof b))throw new TypeError(\"Cannot call a class as a function\");return\"development\"===b.CONFIG.bundleType&&(console.clear(),console.dir(b.CONFIG)),this.initialize(c)}return b.prototype.initialize=function(c){return\"development\"===b.CONFIG.bundleType&&(undefined),this.ws=new e.a(c),this.getReturn()},b.prototype.getReturn=\nfunction(){return\"development\"===b.CONFIG.bundleType?this:{destroy:this.destroy.bind(this),send:this.send.bind(this),getRetryCount:this.getRetryCount.bind(this)}},b.prototype.destroy=function(){this.ws&&this.ws.destroy()},b.prototype.send=function(b){this.ws&&this.ws.send(b)},b.prototype.getRetryCount=function(){return this.ws&&this.ws.getRetryCount()},f(b,null,[{key:\"CONFIG\",get:function(){return{version:\"1.1.3\",gitHash:\"03afe93d\",build:\"16\",bundleType:\"release\"}}}]),b}();c.default=b},function(b,\nc,d){var e=d(0),f=d(4),g=d(5);b=function(){function b(c){if(!(this instanceof b))throw new TypeError(\"Cannot call a class as a function\");b.checkOptions(c)&&(this.options=g.a.extend({},{url:\"\",rid:0,aid:0,uid:0,from:-1,retry:!0,retryMaxCount:0,retryInterval:5,fallback:function(){},heartBeatInterval:30,onReceivedMessage:function(){},onHeartBeatReply:function(){},onInitialized:function(){},onOpen:function(){},onClose:function(){},onError:function(){}},c),this.wsBinaryHeaderList=g.a.extend([],f.a),this.state=\n{retryCount:0},this.callbackQueueList={onInitializedQueue:[],onOpenQueue:[],onCloseQueue:[],onErrorQueue:[],onReceivedMessageQueue:[],onHeartBeatReplyQueue:[],onRetryFallbackQueue:[]},this.HEART_BEAT_INTERVAL=0,this.mixinCallback().initialize())}return b.prototype.initialize=function(){var b=\"MozWebSocket\"in window?window.MozWebSocket:window.WebSocket,c=this.options;try{this.ws=new b(c.url),this.ws.binaryType=\"arraybuffer\",this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),\nthis.ws.onclose=this.onClose.bind(this),this.ws.onerror=this.onError.bind(this),g.a.callFunction(this.callbackQueueList.onInitializedQueue),this.callbackQueueList.onInitializedQueue=[]}catch(U){\"function\"==typeof c.fallback&&c.fallback()}return this},b.prototype.onOpen=function(){return g.a.callFunction(this.callbackQueueList.onOpenQueue),this.userAuthentication(),this},b.prototype.userAuthentication=function(){var b=this,c=this.options,d={uid:parseInt(c.uid,10),roomid:parseInt(c.rid,10),protover:e.a.WS_BODY_PROTOCOL_VERSION},\nf=\"\";c.aid&&(d.aid=parseInt(c.aid,10));0<c.from&&(d.from=parseInt(c.from,10)||7);f=this.convertToArrayBuffer(JSON.stringify(d),e.a.WS_OP_USER_AUTHENTICATION);setTimeout(function(){b.ws.send(f)},0)},b.prototype.heartBeat=function(){var b=this;clearTimeout(this.HEART_BEAT_INTERVAL);var c=this.convertToArrayBuffer({},e.a.WS_OP_HEARTBEAT);this.ws.send(c);this.HEART_BEAT_INTERVAL=setTimeout(function(){b.heartBeat()},1E3*this.options.heartBeatInterval)},b.prototype.onMessage=function(b){var c=this;try{var d=\nthis.convertToObject(b.data);if(d instanceof Array)d.forEach(function(b){c.onMessage(b)});else if(d instanceof Object)switch(d.op){case e.a.WS_OP_HEARTBEAT_REPLY:this.onHeartBeatReply(d.body);break;case e.a.WS_OP_MESSAGE:this.onMessageReply(d.body);break;case e.a.WS_OP_CONNECT_SUCCESS:this.heartBeat()}}catch(H){(undefined)}return this},b.prototype.onMessageReply=function(b){var c=this;try{b instanceof Array?b.forEach(function(b){c.onMessageReply(b)}):b instanceof Object&&\n\"function\"==typeof this.options.onReceivedMessage&&this.options.onReceivedMessage(b)}catch(U){(undefined)}},b.prototype.onHeartBeatReply=function(b){g.a.callFunction(this.callbackQueueList.onHeartBeatReplyQueue,b)},b.prototype.onClose=function(){var b=this;return g.a.callFunction(this.callbackQueueList.onCloseQueue),clearTimeout(this.HEART_BEAT_INTERVAL),this.options.retry&&(this.checkRetryState()?setTimeout(function(){(undefined);\nb.initialize()},1E3*this.options.retryInterval):((undefined),g.a.callFunction(this.callbackQueueList.onRetryFallbackQueue))),this},b.prototype.onError=function(b){return (undefined),g.a.callFunction(this.callbackQueueList.onErrorQueue,b),this},b.prototype.destroy=function(){clearTimeout(this.HEART_BEAT_INTERVAL);this.options.retry=!1;this.ws&&this.ws.close();this.ws=null},b.prototype.convertToArrayBuffer=function(b,c){this.encoder||\n(this.encoder=g.a.getEncoder());var d=new ArrayBuffer(e.a.WS_PACKAGE_HEADER_TOTAL_LENGTH),f=new DataView(d,e.a.WS_PACKAGE_OFFSET);b=this.encoder.encode(b);return f.setInt32(e.a.WS_PACKAGE_OFFSET,e.a.WS_PACKAGE_HEADER_TOTAL_LENGTH+b.byteLength),this.wsBinaryHeaderList[2].value=c,this.wsBinaryHeaderList.forEach(function(b){4===b.bytes?f.setInt32(b.offset,b.value):2===b.bytes&&f.setInt16(b.offset,b.value)}),g.a.mergeArrayBuffer(d,b)},b.prototype.convertToObject=function(b){var c=new DataView(b),d={};\nif(d.packetLen=c.getInt32(e.a.WS_PACKAGE_OFFSET),this.wsBinaryHeaderList.forEach(function(b){4===b.bytes?d[b.key]=c.getInt32(b.offset):2===b.bytes&&(d[b.key]=c.getInt16(b.offset))}),this.decoder||(this.decoder=g.a.getDecoder()),d.op&&e.a.WS_OP_MESSAGE===d.op){d.body=[];for(var f=e.a.WS_PACKAGE_OFFSET,m=d.packetLen,h=\"\",k=\"\";f<b.byteLength;f+=m){m=c.getInt32(f);h=c.getInt16(f+e.a.WS_HEADER_OFFSET);try{k=JSON.parse(this.decoder.decode(b.slice(f+h,f+m))),d.body.push(k)}catch(ca){(undefined)}}}else d.op&&e.a.WS_OP_HEARTBEAT_REPLY===d.op&&(d.body={count:c.getInt32(e.a.WS_PACKAGE_HEADER_TOTAL_LENGTH)});return d},b.prototype.send=function(b){this.ws&&this.ws.send(b)},b.prototype.addCallback=function(b,c){return\"function\"==typeof b&&c instanceof Array&&c.push(b),this},b.prototype.mixinCallback=function(){var b=this.options,c=this.callbackQueueList;return this.addCallback(b.onReceivedMessage,c.onReceivedMessageQueue).addCallback(b.onHeartBeatReply,c.onHeartBeatReplyQueue).addCallback(b.onInitialized,\nc.onInitializedQueue).addCallback(b.onOpen,c.onOpenQueue).addCallback(b.onClose,c.onCloseQueue).addCallback(b.onError,c.onErrorQueue).addCallback(b.onRetryFallback,c.onRetryFallbackQueue),this},b.prototype.getRetryCount=function(){return this.state.retryCount},b.prototype.checkRetryState=function(){var b=this.options,c=!1;return(0===b.retryMaxCount||this.state.retryCount<b.retryMaxCount)&&(this.state.retryCount+=1,c=!0),c},b.checkOptions=function(b){return b||b instanceof Object?b.url?!!b.rid||((undefined),\n!1):((undefined),!1):((undefined),!1)},b}();c.a=b},function(b,c,d){b=d(0);c.a=[{name:\"Header Length\",key:\"headerLen\",bytes:2,offset:b.a.WS_HEADER_OFFSET,value:b.a.WS_PACKAGE_HEADER_TOTAL_LENGTH},{name:\"Protocol Version\",key:\"ver\",bytes:2,offset:b.a.WS_VERSION_OFFSET,value:b.a.WS_HEADER_DEFAULT_VERSION},{name:\"Operation\",key:\"op\",bytes:4,offset:b.a.WS_OPERATION_OFFSET,value:b.a.WS_HEADER_DEFAULT_OPERATION},\n{name:\"Sequence Id\",key:\"seq\",bytes:4,offset:b.a.WS_SEQUENCE_OFFSET,value:b.a.WS_HEADER_DEFAULT_SEQUENCE}]},function(b,c,d){c.a={getDecoder:function(){return window.TextDecoder?new window.TextDecoder:{decode:function(b){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,new Uint8Array(b))))}}},getEncoder:function(){return window.TextEncoder?new window.TextEncoder:{encode:function(b){for(var c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0,f=b.length;e<f;e++)d[e]=b.charCodeAt(e);\nreturn c}}},mergeArrayBuffer:function(b,c){b=new Uint8Array(b);c=new Uint8Array(c);var d=new Uint8Array(b.byteLength+c.byteLength);return d.set(b,0),d.set(c,b.byteLength),d.buffer},callFunction:function(b,c){return b instanceof Array&&b.length?(b.forEach(function(b){return\"function\"==typeof b&&b(c)}),null):\"function\"==typeof b&&b(c)},extend:function(b){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=b||{};return f instanceof Object&&d.forEach(function(b){b instanceof\nObject&&Object.keys(b).forEach(function(c){f[c]=b[c]})}),f}}}])})}).call(v,n(6)(p))},function(p,v,n){var h=n(0),g=n(120),d=n(121),c=n(122);p=function(){function b(b,c){var d=this;this.data={};this.defaultRatio=[16,9];this.index=0;this.showing=[];this.visibleStatus=!0;this.assItem=[];this.inited=!1;this.options=$.extend({time:null,type:\"css\",callback:function(){}},b);this.player=c;this.data={};this.originWidth=this.options.container.width();this.originHeight=this.options.container.height();this.defaultRatio=\n[16,9];this.options.url?this.load(this.options.url,function(b){d.init(b)}):this.init(\"\")}b.prototype.load=function(b,c){var d=this;(undefined);this.data[b]?\"function\"===typeof c&&c(this.data[b]):$.ajax({url:b,type:\"get\",dataType:\"text\",xhrFields:{withCredentials:!0},success:function(e){d.data[b]=e;\"function\"===typeof c&&c(e)},error:function(b){(undefined)}})};b.prototype.init=function(b){var e=this;this.index=0;this.showing=[];this.visibleStatus=!0;this.ass=this.parse(b);this.assItem=\nthis.ass.Events.Dialogue;this.containerInner=$('<div class=\"bilibili-player-video-subtitle-inner\"></div>');this.options.container.append(this.containerInner);\"css\"===this.options.type||\"div\"===this.options.type?this.render=new d.a({container:this.containerInner},this):\"canvas\"===this.options.type?this.render=new c.a({container:this.containerInner},this):(undefined);window.requestAnimationFrame(function(){e.frame()});this._globalEvents();this.size(this.defaultRatio[0],\nthis.defaultRatio[1]);this.inited=!0;this.options.callback(this.assItem)};b.prototype.update=function(b){this.inited?(this.ass=this.parse(b),this.assItem=this.ass.Events.Dialogue,this.render.resize(this.containerInner.width(),this.containerInner.height()),this.refresh()):this.init(b)};b.prototype._globalEvents=function(){var b=this;this.player.bind(h.a.EVENT.VIDEO_MEDIA_PLAY,function(){b.play()});this.player.bind(h.a.EVENT.VIDEO_MEDIA_PAUSE,function(){b.pause()});this.player.bind(h.a.EVENT.VIDEO_MEDIA_SEEK,\nfunction(){b.pause()});this.player.bind(h.a.EVENT.VIDEO_MEDIA_SEEKED,function(){b.refresh();b.play()});this.player.bind(h.a.EVENT.VIDEO_MEDIA_ENDED,function(){b.refresh()});this.player.bind(h.a.EVENT.VIDEO_RESIZE,function(){b.resize()});this.player.flvPlayer&&this.player.flvPlayer.mediaInfo&&this.player.flvPlayer.mediaInfo.width&&this.player.flvPlayer.mediaInfo.height&&this.size(this.player.flvPlayer.mediaInfo.width,this.player.flvPlayer.mediaInfo.height);this.player.bind(h.a.EVENT.VIDEO_METADATA_LOADED,\nfunction(){b.size(b.player.flvPlayer.mediaInfo.width,b.player.flvPlayer.mediaInfo.height)})};b.prototype.parse=function(b){try{return Object(g.a)(b)}catch(f){return (undefined),null}};b.prototype.frame=function(){var b=this;window.requestAnimationFrame(function(){b.frame()});if(!this.paused&&this.visibleStatus){for(var c=this.options.time(),d=this.assItem[this.index];d&&d.Start<=c;)this.draw(d),this.index++,d=this.assItem[this.index];for(d=0;d<this.showing.length;d++)this.showing[d].End<\nc&&this.wipe(this.showing[d])}};b.prototype.draw=function(b){this.showing.push(b);this.render.draw(b,this.showing)};b.prototype.size=function(b,c){this.originWidth/b>this.originHeight/c?this.containerInner.css({width:this.originHeight/c*b/this.originWidth*100+\"%\",height:\"100%\"}):this.containerInner.css({width:\"100%\",height:this.originWidth/b*c/this.originHeight*100+\"%\"});this.render.resize(this.containerInner.width(),this.containerInner.height())};b.prototype.wipe=function(b){var c=this.showing.indexOf(b);\n-1<c&&this.showing.splice(c,1);this.render.wipe(b,this.showing)};b.prototype.play=function(){this.paused=!1};b.prototype.pause=function(){this.paused=!0};b.prototype.visible=function(b){b!==this.visibleStatus&&(b?this.visibleStatus=!0:(this.visibleStatus=!1,this.clear()))};b.prototype.clear=function(){this.render.clear();this.showing=[]};b.prototype.resetIndex=function(){for(var b=this.index=0;b<this.assItem.length;b++)if(this.options.time()<=this.assItem[b].Start){this.index=b;return}this.index=\nthis.assItem.length};b.prototype.refresh=function(){this.clear();this.resetIndex();for(var b=0;b<this.index;b++){var c=this.options.time();this.assItem[b].Start<=c&&this.assItem[b].End>c&&this.draw(this.assItem[b])}};b.prototype.resize=function(){this.originWidth=this.options.container.width();this.originHeight=this.options.container.height();this.player.flvPlayer&&this.player.flvPlayer.mediaInfo&&this.player.flvPlayer.mediaInfo.width&&this.player.flvPlayer.mediaInfo.height&&this.size(this.player.flvPlayer.mediaInfo.width,\nthis.player.flvPlayer.mediaInfo.height);this.refresh()};b.prototype.setType=function(b){this.containerInner.html(\"\");this.options.type=b;\"css\"===this.options.type||\"div\"===this.options.type?this.render=new d.a({container:this.containerInner,width:this.containerInner.width(),height:this.containerInner.height()},this):\"canvas\"===this.options.type?this.render=new c.a({container:this.containerInner,width:this.containerInner.width(),height:this.containerInner.height()},this):(undefined);this.refresh()};b.prototype.destroy=function(){this.pause();this.assItem=this.ass=null;this.showing=[];this.options.container.html(\"\")};return b}();v.a=p},function(p,v,n){function h(b){b=b.split(\":\");return 3600*parseFloat(b[0])+60*parseFloat(b[1])+1*parseFloat(b[2])}function g(b,c){var f=b.Text.replace(/\\\\N/g,\"<br>\").replace(/\\\\h/g,\"&nbsp;\"),g=JSON.parse(JSON.stringify(c[b.Style]._tags)),f=f.split(/{([^{}]*?)}/),h={content:[]};f[0].length&&h.content.push({text:f[0],tags:g});for(var m=\n1;m<f.length;m+=2){for(var k={text:f[m+1],tags:JSON.parse(JSON.stringify(g))},g=f[m].split(\"\\\\\"),n=0;n<g.length;++n)if(/^t\\(/.test(g[n])&&!/\\)$/.test(g[n])){for(;!/\\)$/.test(g[n+1]);)g[n]+=\"\\\\\"+g[n+1],g.splice(n+1,1);g[n]+=\"\\\\\"+g[n+1];g.splice(n+1,1)}for(n=0;n<g.length;++n){var p=g[n];d.call(k,p);k.tags.clip&&(h.clip=k.tags.clip);/^b\\d/.test(p)&&(k.tags.b=1*p.match(/^b(\\d+)/)[1]);/^i\\d/.test(p)&&(k.tags.i=1*p[1]);/^u\\d/.test(p)&&(k.tags.u=1*p[1]);/^s\\d/.test(p)&&(k.tags.s=1*p[1]);/^fn/.test(p)&&(k.tags.fn=\np.match(/^fn(.*)/)[1]);/^fe/.test(p)&&(k.tags.fe=1*p.match(/^fe(.*)/)[1]);/^k\\d/.test(p)&&(k.tags.k=1*p.match(/^k(\\d+)/)[1]);/^K\\d/.test(p)&&(k.tags.kf=1*p.match(/^K(\\d+)/)[1]);/^kf\\d/.test(p)&&(k.tags.kf=1*p.match(/^kf(\\d+)/)[1]);/^ko\\d/.test(p)&&(k.tags.ko=1*p.match(/^ko(\\d+)/)[1]);/^kt\\d/.test(p)&&(k.tags.kt=1*p.match(/^kt(\\d+)/)[1]);/^q\\d/.test(p)&&(k.tags.q=1*p[1]);/^p\\d/.test(p)&&(k.tags.p=1*p.match(/^p(\\d+)/)[1]);/^pbo/.test(p)&&(k.tags.pbo=1*p.match(/^pbo(.*)/)[1]);/^an\\d/.test(p)&&!h.alignment&&\n(h.alignment=1*p[2]);if(/^a\\d/.test(p)&&!h.alignment){var q=1*p.match(/^a(\\d+)/)[1];h.alignment=4>q?q:8<q?q-5:q+2}!/^pos/.test(p)||h.pos||h.move||(q=p.replace(/\\s/g,\"\").match(/^pos\\((.*?)\\)?$/)[1].split(\",\"),h.pos={x:1*q[0],y:1*q[1]});/^org/.test(p)&&!h.org&&(q=p.replace(/\\s/g,\"\").match(/^org\\((.*?)\\)?$/)[1].split(\",\"),h.org={x:1*q[0],y:1*q[1]});!/^move/.test(p)||h.move||h.pos||(q=p.replace(/\\s/g,\"\").match(/^move\\((.*?)\\)?$/)[1].split(\",\").map(function(b){return 1*b}),h.pos={x:1*q[0],y:1*q[1]},4===\nq.length&&(q.push(0),q.push(1E3*(b.End-b.Start))),h.move=q);/^fad\\s*\\(/.test(p)&&!h.fad&&(h.fad=p.replace(/\\s/g,\"\").match(/^fad\\((.*?)\\)?$/)[1].split(\",\").map(function(b){return 1*b}));/^fade/.test(p)&&!h.fade&&(h.fade=p.replace(/\\s/g,\"\").match(/^fade\\((.*?)\\)?$/)[1].split(\",\").map(function(b){return 1*b}));/^r/.test(p)&&(q=p.match(/^r(.*)/)[1],k.tags=JSON.parse(JSON.stringify((c[q]||c[b.Style])._tags)));if(/^t\\(/.test(p)&&(p=p.replace(/\\s/g,\"\").match(/^t\\((.*)\\)/)[1].split(\",\"),p[0])){q=p[p.length-\n1].split(\"\\\\\");for(var D={t1:0,t2:1E3*(b.End-b.Start),accel:1,tags:{}},v=q.length-1;0<=v;v--)d.call(D,q[v]);2===p.length&&(D.accel=1*p[0]);3===p.length&&(D.t1=1*p[0],D.t2=1*p[1]);4===p.length&&(D.t1=1*p[0],D.t2=1*p[1],D.accel=1*p[2]);k.tags.t||(k.tags.t=[]);k.tags.t.push(D)}}if(k.tags.t)for(n=0;n<k.tags.t.length-1;++n)for(v=n+1;v<k.tags.t.length;++v)if(k.tags.t[n].t1===k.tags.t[v].t1&&k.tags.t[n].t2===k.tags.t[v].t2){for(var ca in k.tags.t[v].tags)k.tags.t[v].tags.hasOwnPropety(ca)&&(k.tags.t[n].tags[ca]=\nk.tags.t[v].tags[ca]);k.tags.t.splice(v,1)}b.Effect&&\"banner\"===b.Effect.name&&(k.tags.q=2);k.tags.p?k.commands=e(k.text):k.text=k.text.replace(/\\s/g,\"&nbsp;\");k.text=k.text.replace(/\\\\n/g,2===k.tags.q?\"<br>\":\"&nbsp;\");g=k.tags;h.content.push(k)}return h}function d(b){if(/^fs[\\d\\+\\-]/.test(b)){var c=b.match(/^fs(.*)/)[1];/^\\d/.test(c)&&(this.tags.fs=parseFloat(c));/^\\+|-/.test(c)&&(this.tags.fs*=-10<parseFloat(c)?1+parseFloat(c)/10:1)}/^fsp/.test(b)&&(this.tags.fsp=parseFloat(b.match(/^fsp(.*)/)[1]));\n/^fscx/.test(b)&&(this.tags.fscx=parseFloat(b.match(/^fscx(.*)/)[1]));/^fscy/.test(b)&&(this.tags.fscy=parseFloat(b.match(/^fscy(.*)/)[1]));/^fsp/.test(b)&&(this.tags.fsp=parseFloat(b.match(/^fsp(.*)/)[1]));/^frx/.test(b)&&(this.tags.frx=parseFloat(b.match(/^frx(.*)/)[1]));/^fry/.test(b)&&(this.tags.fry=parseFloat(b.match(/^fry(.*)/)[1]));/^fr[z\\d\\-]/.test(b)&&(this.tags.frz=parseFloat(b.match(/^frz?(.*)/)[1]));/^blur\\d/.test(b)&&(this.tags.blur=parseFloat(b.match(/^blur(.*)/)[1]));/^be\\d/.test(b)&&\n(this.tags.blur=parseFloat(b.match(/^be(.*)/)[1]));0>this.tags.blur&&(this.tags.blur=0);/^fax/.test(b)&&(this.tags.fax=parseFloat(b.match(/^fax(.*)/)[1]));/^fay/.test(b)&&(this.tags.fay=parseFloat(b.match(/^fay(.*)/)[1]));/^x*bord/.test(b)&&(this.tags.xbord=parseFloat(b.match(/^x*bord(.*)/)[1]));/^y*bord/.test(b)&&(this.tags.ybord=parseFloat(b.match(/^y*bord(.*)/)[1]));0>this.tags.xbord&&(this.tags.xbord=0);0>this.tags.ybord&&(this.tags.ybord=0);/^x*shad/.test(b)&&(this.tags.xshad=parseFloat(b.match(/^x*shad(.*)/)[1]));\n/^y*shad/.test(b)&&(this.tags.yshad=parseFloat(b.match(/^y*shad(.*)/)[1]));/^\\da&?H?[0-9a-f]+/i.test(b)&&(c=b.match(/^(\\d)a&?H?(\\w\\w)/),this.tags[\"a\"+c[1]]=c[2]);if(/^\\d?c&?H?[0-9a-f]+/i.test(b)){c=b.match(/^(\\d?)c&?H?(\\w+)/);for(c[1]||(c[1]=\"1\");6>c[2].length;)c[2]=\"0\"+c[2];this.tags[\"c\"+c[1]]=c[2]}if(/^alpha&?H?[0-9a-f]+/i.test(b))for(c=1;4>=c;c++)this.tags[\"a\"+c]=b.match(/^alpha&?H?(\\w\\w)/)[1];/^i?clip/.test(b)&&(c=b.match(/^i?clip\\s*\\((.*)\\)/)[1].split(/\\s*,\\s*/),this.tags.clip={inverse:/iclip/.test(b),\nscale:1,commands:null,dots:null},1===c.length&&(this.tags.clip.commands=e(c[0])),2===c.length&&(this.tags.clip.scale=parseFloat(c[0]),this.tags.clip.commands=e(c[1])),4===c.length&&(this.tags.clip.dots=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])]))}function c(b,c){b=b.match(/Style:(.*)/)[1].split(\",\");for(var d={},e=b.length-1;0<=e;--e){var f=c.V4Styles.Format[e];d[f]=b[e].replace(/^\\s*/,\"\");isNaN(1*d[f])||(d[f]*=1)}d._tags={fn:d.Fontname,fs:d.Fontsize,c1:d.PrimaryColour&&\nd.PrimaryColour.match(/&H(\\w\\w)?(\\w{6})&?/)[2],a1:d.PrimaryColour&&d.PrimaryColour.match(/&H(\\w\\w)?(\\w{6})&?/)[1]||\"00\",c2:d.SecondaryColour&&d.SecondaryColour.match(/&H(\\w\\w)?(\\w{6})&?/)[2],a2:d.SecondaryColour&&d.SecondaryColour.match(/&H(\\w\\w)?(\\w{6})&?/)[1]||\"00\",c3:d.OutlineColour&&d.OutlineColour.match(/&H(\\w\\w)?(\\w{6})&?/)[2],a3:d.OutlineColour&&d.OutlineColour.match(/&H(\\w\\w)?(\\w{6})&?/)[1]||\"00\",c4:d.BackColour&&d.BackColour.match(/&H(\\w\\w)?(\\w{6})&?/)[2],a4:d.BackColour&&d.BackColour.match(/&H(\\w\\w)?(\\w{6})&?/)[1]||\n\"00\",b:Math.abs(d.Bold),i:Math.abs(d.Italic),u:Math.abs(d.Underline),s:Math.abs(d.StrikeOut),q:c.ScriptInfo.WrapStyle||1,fscx:d.ScaleX,fscy:d.ScaleY,fsp:d.Spacing,frz:d.Angle,xbord:d.Outline,ybord:d.Outline,xshad:d.Shadow,yshad:d.Shadow};return d}function b(b){return b.match(/Format:(.*)/)[1].replace(/\\s/g,\"\").split(\",\")}function e(b){b=b.replace(/([mnlbspc])/gi,\" $1 \").replace(/^\\s*|\\s*$/g,\"\").replace(/\\s+/g,\" \").toLowerCase();b=b.split(/\\s(?=[mnlbspc])/);for(var c=[],d=function(b,c,d){var f=[0,\n2/3,1/3,0],g=[0,1/3,2/3,0],h=[0,1/6,2/3,1/6],m=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]},k=[b[b.length-1].x,b[0].x,b[1].x,b[2].x],t=[b[b.length-1].y,b[0].y,b[1].y,b[2].y],q=[\"L\",new e(m(h,k),m(h,t))];\"M\"===c&&(q[0]=\"M\");for(c=3;c<b.length;c++)k=[b[c-3].x,b[c-2].x,b[c-1].x,b[c].x],t=[b[c-3].y,b[c-2].y,b[c-1].y,b[c].y],q.push(\"C\"+new e(m(f,k),m(f,t)),\",\"+new e(m(g,k),m(g,t)),\",\"+new e(m(h,k),m(h,t)));\"L\"!==d&&\"C\"!==d||q.push(\"L\",b[b.length-1]);return q.join(\"\")},e=function(){return function(b,\nc){this.x=b;this.y=c;this.toString=function(){return this.x+\",\"+this.y}}}(),f=function(){return function(b){this.points=[];this.nextType=this.prevType=this.type=null;/m/.test(b)&&(this.type=\"M\");/n|l/.test(b)&&(this.type=\"L\");/b/.test(b)&&(this.type=\"C\");/s/.test(b)&&(this.type=\"_S\");this.isValid=function(){return!this.points.length||!this.type||/C|S/.test(this.type)&&3>this.points.length?!1:!0};this.toString=function(){return\"_S\"===this.type?d(this.points,this.prevType,this.nextType):this.type+this.points.join()}}}(),\ng=0;g<b.length;){for(var h=b[g].split(\" \"),k=new f(h[0]),n=void 0,n=h.length-(h.length&1?0:1),q=1;q<n;q+=2)k.points.push(new e(parseFloat(h[q]),parseFloat(h[q+1])));/p|c/.test(h[0])?(\"_S\"===c[g-1].type&&(\"p\"===h[0]&&(n=c[g-1].points.concat(k.points),c[g-1].points=n),\"c\"===h[0]&&(h=c[g-1].points,c[g-1].points.push(new e(h[0].x,h[0].y),new e(h[1].x,h[1].y),new e(h[2].x,h[2].y)))),b.splice(g,1)):(\"s\"===h[0]&&(n=c[g-1].points[c[g-1].points.length-1],k.points.unshift(new e(n.x,n.y))),k.isValid()&&(g&&\n(k.prevType=c[g-1].type,c[g-1].nextType=k.type),c.push(k)),g++)}return c}function f(b,c){b=b.match(/Dialogue:(.*)/)[1].split(\",\");var d=c.Events.Format.length;if(b.length>d){var e=b.slice(d-1).join();b=b.slice(0,d-1);b.push(e)}for(var e=c.ScriptInfo.Timer/100||1,f={},m=0;m<d;++m)f[c.Events.Format[m]]=b[m].replace(/^\\s+/,\"\");f.Layer*=1;f.Start=h(f.Start)/e;f.End=h(f.End)/e;f.Style=c.V4Styles.Style[f.Style]?f.Style:\"Default\";f.MarginL*=1;f.MarginR*=1;f.MarginV*=1;f.Effect=f.Effect&&f.EffectparseEffect(f.Effect);\nf._parsedText=g(f,c.V4Styles.Style);return f}v.a=function(d){d=d.replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");var e={ScriptInfo:{Title:\"&lt;untitled&gt;\",\"Original Script\":\"&lt;unknown&gt;\"},V4Styles:{Format:{},Style:{}},Events:{Format:{},Dialogue:[]}};d=d.split(/\\r?\\n/);for(var g=0,h=d.length,k=0;k<h;++k){var n=d[k].replace(/^\\s+|\\s+$/g,\"\");if(!/^;/.test(n)&&(/^\\[Script Info\\]/i.test(n)?g=1:/^\\[V4\\+ Styles\\]/i.test(n)?g=2:/^\\[Events\\]/i.test(n)?g=3:/^\\[.*\\]/.test(n)&&(g=0),0!==g)){if(1===g&&/:/.test(n)){var p=\nn.match(/(.*?)\\s*:\\s*(.*)/);isNaN(parseFloat(p[2]))||(p[2]=parseFloat(p[2]));e.ScriptInfo[p[1]]=p[2]}2===g&&(/^Format:/.test(n)&&(e.V4Styles.Format=b(n)),/^Style:/.test(n)&&(p=c(n,e),e.V4Styles.Style[p.Name]=p));3===g&&(/^Format:/.test(n)&&(e.Events.Format=b(n)),/^Dialogue:/.test(n)&&(n=f(n,e),n.Start<n.End&&(n._index=e.Events.Dialogue.length,e.Events.Dialogue.push(n))))}}e.Events.Dialogue.sort(function(b,c){return b.Start-c.Start||b.End-c.End||b._index-c._index});return e}},function(p,v,n){var h=\nn(21),g=n(2);p=function(){function d(c,b){this.options=c;this.container=this.options.container;this.subtitle=b;this.init();this.options.width&&this.options.height&&this.resize(this.options.width,this.options.height)}d.prototype.init=function(){this.wrap=$('<div class=\"subtitle-wrap\"></div>');this.container.append(this.wrap)};d.prototype.draw=function(c,b){b=c._parsedText;if(b.content[0]){var d=this.subtitle.ass.V4Styles.Style[c.Style],f=\"\",k=\"\";if(b.pos){switch(b.alignment){case 1:f=\"transform: translate(0, 0);\";\nbreak;default:case 2:f=\"transform: translate(-50%, 0);\";break;case 3:f=\"transform: translate(-100%, 0);\";break;case 4:f=\"transform: translate(0, 50%);\";break;case 5:f=\"transform: translate(-50%, 50%);\";break;case 6:f=\"transform: translate(-100%, 50%);\";break;case 7:f=\"transform: translate(0, 100%);\";break;case 8:f=\"transform: translate(-50%, 100%);\";break;case 9:f=\"transform: translate(-100%, 100%);\"}f+=\"margin:0;\";k+=\"display:inline-block;position:absolute;left:\"+b.pos.x*this.scale+\"px;bottom:\"+\n(this.subtitle.ass.ScriptInfo.PlayResY-b.pos.y)*this.scale+\"px;\"}else if(b.alignment){switch(b.alignment){case 1:k+=\"display:inline-block;position:absolute;bottom:0;left:0;\";f=\"transform: translate(0, 0);\";break;case 2:k+=\"display:inline-block;position:absolute;bottom:0;left:0;width:100%;\";break;case 3:k+=\"display:inline-block;position:absolute;bottom:0;right:0;\";f=\"transform: translate(0, 0);\";break;case 4:k+=\"display:inline-block;position:absolute;bottom:\"+.5*this.subtitle.containerInner.height()+\n\"px;left:0;\";f=\"transform: translate(0, 50%);\";break;case 5:k+=\"display:inline-block;position:absolute;bottom:\"+.5*this.subtitle.containerInner.height()+\"px;left:0;width:100%;\";f=\"transform: translate(0, 50%);\";break;case 6:k+=\"display:inline-block;position:absolute;bottom:\"+.5*this.subtitle.containerInner.height()+\"px;right:0;\";f=\"transform: translate(0, 50%);\";break;case 7:k+=\"display:inline-block;position:absolute;bottom:\"+this.subtitle.containerInner.height()+\"px;left:0;\";f=\"transform: translate(0, 100%);\";\nbreak;case 8:k+=\"display:inline-block;position:absolute;bottom:\"+this.subtitle.containerInner.height()+\"px;left:0;width:100%;\";f=\"transform: translate(0, 100%);\";break;case 9:k+=\"display:inline-block;position:absolute;bottom:\"+this.subtitle.containerInner.height()+\"px;right:0;\";f=\"transform: translate(0, 100%);\";break;default:f=\"transform: translate(0, 0);\"}f+=\"margin:0;\"}var m=b.content[0].tags;switch(d.Alignment){case 1:var n=\"text-align:left;\";break;case 2:n=\"text-align:center;\";break;case 3:n=\n\"text-align:right;\";break;default:n=\"text-align:center;\"}var u=h.a.parseColor(m.c4,m.a4),u=\"text-shadow:\"+u+\" 1px \"+(0+(m.xshad||0))+\"px \"+(1+(m.yshad||0))+\"px,\"+u+\" 0px \"+(1+(m.xshad||0))+\"px \"+(1+(m.yshad||0))+\"px,\"+u+\" 0px \"+(-1+(m.xshad||0))+\"px \"+(1+(m.yshad||0))+\"px,\"+u+\" -1px \"+(0+(m.xshad||0))+\"px \"+(1+(m.yshad||0))+\"px;\",t=m.b?\"font-weight:bold;\":\"\",p=m.fs?\"font-size:\"+m.fs*this.scale+\"px;\":\"\",y=m.fn?\"font-family:&quot;\"+m.fn+\"&quot;, sans-serif;\":\"\",v=m.i?\"font-style:italic;\":\"\",H=\"color:\"+\nh.a.parseColor(m.c1,m.a1)+\";\",d=\"margin:0 \"+(d.MarginR*this.scale||0)+\"px \"+(d.MarginV*this.scale||0)+\"px \"+(d.MarginL*this.scale||0)+\"px;\",q=m.xbord?\"border:\"+m.xbord+\"px solid \"+h.a.parseColor(m.c3,m.a3)+\";\":\"\";c.ele=$('<div class=\"subtitle-item\" style=\"'+t+n+k+'\">\\n                <div class=\"subtitle-inner\" style=\"'+u+(m.fsp?\"letter-spacing:\"+m.fsp+\"px;\":\"\")+p+y+v+(m.u?\"text-decoration:underline;\":m.s?\"text-decoration:line-through;\":\"\")+H+d+q+f+'\">'+g.a.htmlEncode(b.content[0].text)+\"</div>\\n            </div>\")}else c.ele=\n$('<div class=\"subtitle-item\"><div class=\"subtitle-inner\"</div></div>');this.wrap.append(c.ele)};d.prototype.clear=function(){this.wrap.html(\"\")};d.prototype.resize=function(c,b){this.scale=c/this.subtitle.ass.ScriptInfo.PlayResX};d.prototype.wipe=function(c,b){c.ele.remove()};return d}();v.a=p},function(p,v,n){var h=n(21);p=function(){function g(d,c){this.height=this.width=0;this.canvasScale=2;this.options=d;this.container=this.options.container;this.subtitle=c;this.init();this.options.width&&this.options.height&&\nthis.resize(this.options.width,this.options.height)}g.prototype.init=function(){this.wrap=$('<canvas class=\"subtitle-wrap\"></canvas>');this.container.append(this.wrap);this.ctx=this.wrap[0].getContext(\"2d\");this.canvasWidth=this.width*this.canvasScale;this.canvasHeight=this.height*this.canvasScale;this.canvas=document.createElement(\"canvas\");this.canvas.setAttribute(\"width\",this.canvasWidth+\"px\");this.canvas.setAttribute(\"height\",this.canvasHeight+\"px\");this.context=this.canvas.getContext(\"2d\")};\ng.prototype.draw=function(d,c){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight);d=this.canvasHeight;for(var b=c.length-1;0<=b;b--){var e=c[b],f=e._parsedText;if(f.content[0]){var e=this.subtitle.ass.V4Styles.Style[e.Style],g=f.content[0].tags,m=f.content[0].text,n=g.fs?g.fs*this.scale*this.canvasScale:0,u=[];g.i&&u.push(\"italic\");g.b&&u.push(\"bold\");u.push(n+\"px\");u.push((g.fn?\"&quot;\"+g.fn+\"&quot;,\":\"\")+\"sans-serif\");this.context.font=u.join(\" \");var u=this.context.measureText(m).width,\nt=n;g.xbord&&(this.context.strokeStyle=h.a.parseColor(g.c3,g.a3),this.context.strokeRect(0,0,u,1.125*n));this.context.fillStyle=h.a.parseColor(g.c1,g.a1);var p=0,n=.15*-n;if(f.pos){switch(f.alignment){case 1:n+=0;p+=0;break;default:case 2:n+=0;p+=-u/2;break;case 3:n+=0;p+=-u;break;case 4:n+=t/2;p+=0;break;case 5:n+=t/2;p+=-u/2;break;case 6:n+=t/2;p+=-u;break;case 7:n+=t;p+=0;break;case 8:n+=t;p+=-u/2;break;case 9:n+=t,p+=-u}p+=f.pos.x*this.scale*this.canvasScale;n+=f.pos.y*this.scale*this.canvasScale;\nthis.context.textAlign=\"left\"}else if(f.alignment){switch(f.alignment){case 1:p+=0;n+=this.canvasHeight;break;default:case 2:p+=(this.canvasWidth-u)/2;n+=this.canvasHeight;break;case 3:p+=this.canvasWidth-u;n+=this.canvasHeight;break;case 4:p+=0;n+=(this.canvasHeight+t)/2;break;case 5:p+=(this.canvasWidth-u)/2;n+=(this.canvasHeight+t)/2;break;case 6:p+=this.canvasWidth-u;n+=(this.canvasHeight+t)/2;break;case 7:p+=0;n+=t;break;case 8:p+=(this.canvasWidth-u)/2;n+=t;break;case 9:p+=(this.canvasWidth-\nu)/2,n+=t}this.context.textAlign=\"left\"}else this.context.textAlign=\"center\",p+=this.canvasWidth/2,n+=d-(e.MarginV*this.scale*this.canvasScale||0),d-=t+(e.MarginV*this.scale*this.canvasScale||0);this.context.strokeStyle=h.a.parseColor(g.c4,g.a4);this.context.lineWidth=1.5*this.canvasScale;this.context.shadowBlur=2*this.canvasScale;this.context.shadowColor=h.a.parseColor(g.c4,g.a4);this.context.strokeText(m,p,n);this.context.fillText(f.content[0].text,p,n)}}this.clear();this.ctx.drawImage(this.canvas,\n0,0,this.width,this.height)};g.prototype.size=function(d,c){this.containerInner.css({width:100*d+\"%\",height:100*c+\"%\"})};g.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)};g.prototype.resize=function(d,c){this.width=d;this.height=c;this.scale=d/this.subtitle.ass.ScriptInfo.PlayResX;this.wrap.attr(\"width\",d);this.wrap.attr(\"height\",c);this.canvasWidth=this.width*this.canvasScale;this.canvasHeight=this.height*this.canvasScale;this.canvas.setAttribute(\"width\",this.canvasWidth+\n\"px\");this.canvas.setAttribute(\"height\",this.canvasHeight+\"px\")};g.prototype.wipe=function(d,c){this.draw(d,c)};return g}();v.a=p},function(p,v,n){p=function(){function h(g){this.showing=!0;this.disabled=!1;this.options=g;this.frame()}h.prototype.frame=function(){var g=this;window.requestAnimationFrame(function(){g.frame()});this.update()};h.prototype.update=function(){if(!this.disabled){var g=this.options.time();g>this.options.duration&&this.showing?(this.hide(),this.showing=!1):g<=this.options.duration&&\n!this.showing&&(this.show(),this.showing=!0)}};h.prototype.show=function(){this.options.container.show()};h.prototype.hide=function(){this.options.container.hide()};h.prototype.disable=function(){this.disabled=!0;this.hide()};h.prototype.enable=function(){this.disabled=!1};return h}();v.a=p},function(p,v,n){function h(g){return(Array.isArray(g.list)?g.list:[]).map(function(d){var c={face:d.face,hidden:d.hidden,message:d.message,rank:d.rank,uid:d.uid,uname:d.uname};d.vip&&(c.vip={vipStatus:d.vip.vipStatus,\nvipType:d.vip.vipType});return c})}v.a=function(g){if(\"function\"===typeof g.window.getPlayerExtraParams){var d=g.window.getPlayerExtraParams();if(d){g.config.record=d.record;var c=[];Array.isArray(d.recommend)&&d.recommend.forEach(function(b){c.push({cover:b.cover,title:b.title,link:b.link})});return{epCover:d.epCover,epTitle:d.epTitle,epIndex:d.epIndex,mediaTitle:d.mediaTitle,squarePic:d.squarePic,record:d.record,shareText:d.shareText,sharePic:d.sharePic,shareUrl:d.shareUrl,isStart:d.isStart,multiMode:d.multiMode,\nseasonNeedPay:d.seasonNeedPay,isFollow:d.isFollow,isPreview:d.isPreview,allowSponsor:d.allowSponsor,sponsorCount:d.sponsorCount,pubTime:d.pubTime,recommend:c,sponsorWeekList:h(d.sponsorWeekList),sponsorTotalList:h(d.sponsorTotalList)}}}return null}},function(p,v,n){v.a=function(h){try{var g=JSON.parse(decodeURIComponent(h));if(g){if(0===g.code&&g.data&&Array.isArray(g.data.list)){var d=[];g.data.list.forEach(function(c){if(c){var b=[];if(c.bangumi&&c.bangumi.ep_id&&c.bangumi.season&&c.bangumi.season.season_id){var e=\nc.bangumi.season.season_id;var f=c.bangumi.ep_id;1!==b.length&&(undefined)}(c.pages||[]).forEach(function(d){d&&b.push({cid:d.cid,page:d.page,from:d.from,part:d.part,duration:d.duration,aid:c.aid,bvid:c.bvid,seasonId:e,episodeId:f})});d.push({aid:c.aid,bvid:c.bvid,pic:c.pic,title:c.title,state:c.state,duration:c.duration,progress:c.progress,pages:b,ownerMid:c.owner&&c.owner.mid,ownerName:c.owner&&c.owner.name,ownerFace:c.owner&&\nc.owner.face,rightsPay:c.rights&&c.rights.pay})}});return{code:0,list:d}}return{code:g.code,list:[]}}return null}catch(c){return null}}},function(p,v,n){v.a=function(h){try{var g=JSON.parse(decodeURIComponent(h));if(g){(undefined);if(0===g.code&&g.data&&Array.isArray(g.data.list)&&g.data.stat&&g.data.owner){var d=[];g.data.list.forEach(function(b){if(b){var c=[];if(b.bangumi&&b.bangumi.ep_id&&b.bangumi.season&&b.bangumi.season.season_id){var f=b.bangumi.season.season_id;var g=b.bangumi.ep_id;\n1!==c.length&&(undefined)}(b.pages||[]).forEach(function(d){d&&c.push({cid:d.cid,page:d.page,from:d.from,part:d.part,duration:d.duration,aid:b.aid,bvid:b.bvid,seasonId:f,episodeId:g})});d.push({aid:b.aid,bvid:b.bvid,pic:b.pic,title:b.title,state:b.state,duration:b.duration,progress:b.progress,pages:c,ownerMid:b.owner&&b.mid,ownerName:b.owner&&b.owner.name,ownerFace:b.owner&&b.face,rightsPay:b.rights&&b.rights.pay})}});return{code:0,\nlist:d,pid:g.data.pid,id:g.data.id,mid:g.data.mid,count:g.data.count,name:g.data.name,cover:g.data.cover,description:g.data.description,type:g.data.type,attr:g.data.attr,state:g.data.state,favored:g.data.favored,isFavorite:g.data.is_favorite,ctime:g.data.ctime,mtime:g.data.mtime,stat:{pid:g.data.stat.pid,view:g.data.stat.view,favorite:g.data.stat.favorite,reply:g.data.stat.reply},owner:{mid:g.data.owner.mid,name:g.data.owner.name,face:g.data.owner.face},favorite:g.data.favorite}}if(0===g.code&&g.data&&\nArray.isArray(g.data.list)){var c=[];g.data.list.forEach(function(b){if(b){var d=[];if(b.bangumi&&b.bangumi.ep_id&&b.bangumi.season&&b.bangumi.season.season_id){var f=b.bangumi.season.season_id;var g=b.bangumi.ep_id;1!==d.length&&(undefined)}(b.pages||[]).forEach(function(c){c&&d.push({cid:c.cid,page:c.page,from:c.from,part:c.part,duration:c.duration,aid:b.aid,bvid:b.bvid,seasonId:f,episodeId:g})});c.push({aid:b.aid,bvid:b.bvid,\npic:b.pic,title:b.title,state:b.state,duration:b.duration,progress:b.progress,pages:d,ownerMid:b.owner&&b.mid,ownerName:b.owner&&b.owner.name,ownerFace:b.owner&&b.face,rightsPay:b.rights&&b.rights.pay})}});return{code:0,list:c}}return{code:g.code,list:[]}}return null}catch(b){return null}}},function(p,v,n){(function(h){var g,d,c,b=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&\"function\"===typeof Symbol&&b.constructor===Symbol&&b!==\nSymbol.prototype?\"symbol\":typeof b};!function(e,f){\"object\"==b(v)&&\"object\"==b(h)?h.exports=f():!(d=[],g=f,c=\"function\"===typeof g?g.apply(v,d):g,void 0!==c&&(h.exports=c))}(window,function(){return function(c){function d(b){if(e[b])return e[b].exports;var f=e[b]={i:b,l:!1,exports:{}};return c[b].call(f.exports,f,f.exports,d),f.l=!0,f.exports}var e={};return d.m=c,d.c=e,d.d=function(b,c,e){d.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:e})},d.r=function(b){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&\nObject.defineProperty(b,Symbol.toStringTag,{value:\"Module\"});Object.defineProperty(b,\"__esModule\",{value:!0})},d.t=function(c,e){if((1&e&&(c=d(c)),8&e)||4&e&&\"object\"==(\"undefined\"===typeof c?\"undefined\":b(c))&&c&&c.__esModule)return c;var f=Object.create(null);if(d.r(f),Object.defineProperty(f,\"default\",{enumerable:!0,value:c}),2&e&&\"string\"!=typeof c)for(var g in c)d.d(f,g,function(b){return c[b]}.bind(null,g));return f},d.n=function(b){var c=b&&b.__esModule?function(){return b.default}:function(){return b};\nreturn d.d(c,\"a\",c),c},d.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)},d.p=\"\",d(d.s=10)}([function(b,c,d){b=function(){function b(b,c){for(var d in e){var f=e[d];if(f.context===b&&f.name===c)return f.instance}return null}function c(b,c,e){var f=void 0,g=b.__dashjs_factory_name,h=c[g];if(h){var m=h.instance;if(!h.override)return m.apply({context:c,factory:d},e);for(var k in f=b.apply({context:c},e),m=m.apply({context:c,factory:d,parent:f},e))f.hasOwnProperty(k)&&(f[k]=m[k])}else f=\nb.apply({context:c},e);return f.getClassName=function(){return g},f}var d=void 0,e=[],f={},g={};return d={extend:function(b,c,d,e){!e[b]&&c&&(e[b]={instance:c,override:d})},getSingletonInstance:b,setSingletonInstance:function(b,c,d){for(var f in e){var g=e[f];if(g.context===b&&g.name===c)return void(e[f].instance=d)}e.push({name:c,context:b,instance:d})},getSingletonFactory:function(d){var g=f[d.__dashjs_factory_name];return g||(g=function(f){var g=void 0;return void 0===f&&(f={}),{getInstance:function(){return g||\n(g=b(f,d.__dashjs_factory_name)),g||(g=c(d,f,arguments),e.push({name:d.__dashjs_factory_name,context:f,instance:g})),g}}},f[d.__dashjs_factory_name]=g),g},getSingletonFactoryByName:function(b){return f[b]},updateSingletonFactory:function(b,c){b in f&&(f[b]=c)},getClassFactory:function(b){var d=g[b.__dashjs_factory_name];return d||(d=function(d){return void 0===d&&(d={}),{create:function(){return c(b,d,arguments)}}},g[b.__dashjs_factory_name]=d),d},getClassFactoryByName:function(b){return g[b]},updateClassFactory:function(b,\nc){b in g&&(g[b]=c)}}}();c.a=b},function(c,d,g){var e={parseBuffer:function(b){return(new f(b)).parse()},addBoxProcessor:function(b,c){\"string\"==typeof b&&\"function\"==typeof c&&(h.prototype._boxProcessors[b]=c)},createFile:function(){return new f},createBox:function(b,c,d){b=h.create(b);return c&&c.append(b,d),b},createFullBox:function(b,c,d){b=e.createBox(b,c,d);return b.version=0,b.flags=0,b},Utils:{}};e.Utils.dataViewToString=function(b,c){var d=c||\"utf-8\";if(\"undefined\"!=typeof TextDecoder)return(new TextDecoder(d)).decode(b);\nc=[];var e=0;if(\"utf-8\"===d)for(;e<b.byteLength;)d=b.getUint8(e++),128>d||(224>d?(d=(31&d)<<6,d|=63&b.getUint8(e++)):240>d?(d=(15&d)<<12,d|=(63&b.getUint8(e++))<<6,d|=63&b.getUint8(e++)):(d=(7&d)<<18,d|=(63&b.getUint8(e++))<<12,d|=(63&b.getUint8(e++))<<6,d|=63&b.getUint8(e++))),c.push(String.fromCharCode(d));else for(;e<b.byteLength;)c.push(String.fromCharCode(b.getUint8(e++)));return c.join(\"\")};e.Utils.utf8ToByteArray=function(b){var c;if(\"undefined\"!=typeof TextEncoder)var d=(new TextEncoder).encode(b);\nelse for(d=[],c=0;c<b.length;++c){var e=b.charCodeAt(c);128>e?d.push(e):2048>e?(d.push(192|e>>6),d.push(128|63&e)):65536>e?(d.push(224|e>>12),d.push(128|63&e>>6),d.push(128|63&e)):(d.push(240|e>>18),d.push(128|63&e>>12),d.push(128|63&e>>6),d.push(128|63&e))}return d};e.Utils.appendBox=function(c,d,e){if(d._offset=c._cursor.offset,d._root=c._root?c._root:c,d._raw=c._raw,d._parent=c,-1!==e)if(null!=e){var f=-1;if(\"number\"==typeof e)f=e;else{if(\"string\"!=typeof e){if(\"object\"!=(\"undefined\"===typeof e?\n\"undefined\":b(e))||!e.type)return void c.boxes.push(d);e=e.type}for(var g=0;g<c.boxes.length;g++)if(e===c.boxes[g].type){f=g+1;break}}c.boxes.splice(f,0,d)}else c.boxes.push(d)};d.parseBuffer=e.parseBuffer;d.addBoxProcessor=e.addBoxProcessor;d.createFile=e.createFile;d.createBox=e.createBox;d.createFullBox=e.createFullBox;d.Utils=e.Utils;e.Cursor=function(b){this.offset=void 0===b?0:b};var f=function(b){this._cursor=new e.Cursor;this.boxes=[];b&&(this._raw=new DataView(b))};f.prototype.fetch=function(b){b=\nthis.fetchAll(b,!0);return b.length?b[0]:null};f.prototype.fetchAll=function(b,c){var d=[];return f._sweep.call(this,b,d,c),d};f.prototype.parse=function(){this._cursor.offset=0;for(this.boxes=[];this._cursor.offset<this._raw.byteLength;){var b=h.parse(this);if(void 0===b.type)break;this.boxes.push(b)}return this};f._sweep=function(b,c,d){for(var e in this.type&&this.type==b&&c.push(this),this.boxes){if(c.length&&d)break;f._sweep.call(this.boxes[e],b,c,d)}};f.prototype.write=function(){var b,c=0;\nfor(b=0;b<this.boxes.length;b++)c+=this.boxes[b].getLength(!1);c=new Uint8Array(c);this._rawo=new DataView(c.buffer);this.bytes=c;for(b=this._cursor.offset=0;b<this.boxes.length;b++)this.boxes[b].write();return c.buffer};f.prototype.append=function(b,c){e.Utils.appendBox(this,b,c)};var h=function(){this._cursor=new e.Cursor};h.parse=function(b){var c=new h;return c._offset=b._cursor.offset,c._root=b._root?b._root:b,c._raw=b._raw,c._parent=b,c._parseBox(),b._cursor.offset=c._raw.byteOffset+c._raw.byteLength,\nc};h.create=function(b){var c=new h;return c.type=b,c.boxes=[],c};h.prototype._boxContainers=\"dinf edts mdia meco mfra minf moof moov mvex stbl strk traf trak tref udta vttc sinf schi encv enca\".split(\" \");h.prototype._boxProcessors={};h.prototype._procField=function(b,c,d){this._parsing?this[b]=this._readField(c,d):this._writeField(c,d,this[b])};h.prototype._procFieldArray=function(b,c,d,e){var f;if(this._parsing)for(this[b]=[],f=0;f<c;f++)this[b][f]=this._readField(d,e);else for(f=0;f<this[b].length;f++)this._writeField(d,\ne,this[b][f])};h.prototype._procFullBox=function(){this._procField(\"version\",\"uint\",8);this._procField(\"flags\",\"uint\",24)};h.prototype._procEntries=function(b,c,d){var e;if(this._parsing)for(this[b]=[],e=0;e<c;e++)this[b].push({}),d.call(this,this[b][e]);else for(e=0;e<c;e++)d.call(this,this[b][e])};h.prototype._procSubEntries=function(b,c,d,e){var f;if(this._parsing)for(b[c]=[],f=0;f<d;f++)b[c].push({}),e.call(this,b[c][f]);else for(f=0;f<d;f++)e.call(this,b[c][f])};h.prototype._procEntryField=function(b,\nc,d,e){this._parsing?b[c]=this._readField(d,e):this._writeField(d,e,b[c])};h.prototype._procSubBoxes=function(b,c){var d;if(this._parsing)for(this[b]=[],d=0;d<c;d++)this[b].push(h.parse(this));else for(d=0;d<c;d++)this._rawo?this[b][d].write():this.size+=this[b][d].getLength()};h.prototype._readField=function(b,c){switch(b){case \"uint\":return this._readUint(c);case \"int\":return this._readInt(c);case \"template\":return this._readTemplate(c);case \"string\":return-1===c?this._readTerminatedString():this._readString(c);\ncase \"data\":return this._readData(c);case \"utf8\":return this._readUTF8String();default:return-1}};h.prototype._readInt=function(b){var c=null,d=this._cursor.offset-this._raw.byteOffset;switch(b){case 8:c=this._raw.getInt8(d);break;case 16:c=this._raw.getInt16(d);break;case 32:c=this._raw.getInt32(d);break;case 64:c=this._raw.getInt32(d),d=this._raw.getInt32(d+4),c=c*Math.pow(2,32)+d}return this._cursor.offset+=b>>3,c};h.prototype._readUint=function(b){var c=null;var d=this._cursor.offset-this._raw.byteOffset;\nswitch(b){case 8:c=this._raw.getUint8(d);break;case 16:c=this._raw.getUint16(d);break;case 24:c=(this._raw.getUint16(d)<<8)+this._raw.getUint8(d+2);break;case 32:c=this._raw.getUint32(d);break;case 64:c=this._raw.getUint32(d),d=this._raw.getUint32(d+4),c=c*Math.pow(2,32)+d}return this._cursor.offset+=b>>3,c};h.prototype._readString=function(b){for(var c=\"\",d=0;d<b;d++)var e=this._readUint(8),c=c+String.fromCharCode(e);return c};h.prototype._readTemplate=function(b){return this._readUint(b/2)+this._readUint(b/\n2)/Math.pow(2,b/2)};h.prototype._readTerminatedString=function(){for(var b=\"\";this._cursor.offset-this._offset<this._raw.byteLength;){var c=this._readUint(8);if(0===c)break;b+=String.fromCharCode(c)}return b};h.prototype._readData=function(b){b=0<b?b:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<b){var c=new Uint8Array(this._raw.buffer,this._cursor.offset,b);return this._cursor.offset+=b,c}return null};h.prototype._readUTF8String=function(){var b=this._raw.byteLength-(this._cursor.offset-\nthis._offset),c=null;return 0<b&&(c=new DataView(this._raw.buffer,this._cursor.offset,b),this._cursor.offset+=b),c?e.Utils.dataViewToString(c):c};h.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField(\"size\",\"uint\",32),this._procField(\"type\",\"string\",4),1===this.size&&this._procField(\"largesize\",\"uint\",64),\"uuid\"===this.type&&this._procFieldArray(\"usertype\",16,\"uint\",8),\nthis.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&\nthis._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}};h.prototype._parseFullBox=function(){this.version=this._readUint(8);this.flags=this._readUint(24)};h.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(h.parse(this))};h.prototype.append=function(b,c){e.Utils.appendBox(this,b,c)};h.prototype.getLength=function(){if(this._parsing=\n!1,this._rawo=null,this.size=0,this._procField(\"size\",\"uint\",32),this._procField(\"type\",\"string\",4),1===this.size&&this._procField(\"largesize\",\"uint\",64),\"uuid\"===this.type&&this._procFieldArray(\"usertype\",16,\"uint\",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var b=0;b<this.boxes.length;b++)this.size+=this.boxes[b].getLength();return this._data&&this._writeData(this._data),this.size};h.prototype.write=function(){switch(this._parsing=\n!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField(\"size\",\"uint\",32),this._procField(\"type\",\"string\",4),1===this.size&&this._procField(\"largesize\",\"uint\",\n64),\"uuid\"===this.type&&this._procFieldArray(\"usertype\",16,\"uint\",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var b=0;b<this.boxes.length;b++)this.boxes[b].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size};h.prototype._writeInt=function(b,c){if(this._rawo){var d=this._cursor.offset-this._rawo.byteOffset;switch(b){case 8:this._rawo.setInt8(d,c);break;case 16:this._rawo.setInt16(d,\nc);break;case 32:this._rawo.setInt32(d,c);break;case 64:var e=Math.floor(c/Math.pow(2,32));c-=e*Math.pow(2,32);this._rawo.setUint32(d,e);this._rawo.setUint32(d+4,c)}this._cursor.offset+=b>>3}else this.size+=b>>3};h.prototype._writeUint=function(b,c){if(this._rawo){var d=this._cursor.offset-this._rawo.byteOffset;switch(b){case 8:this._rawo.setUint8(d,c);break;case 16:this._rawo.setUint16(d,c);break;case 24:var e=255&c;this._rawo.setUint16(d,(16776960&c)>>8);this._rawo.setUint8(d+2,e);break;case 32:this._rawo.setUint32(d,\nc);break;case 64:e=c-(c=Math.floor(c/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(d,c),this._rawo.setUint32(d+4,e)}this._cursor.offset+=b>>3}else this.size+=b>>3};h.prototype._writeString=function(b,c){for(var d=0;d<b;d++)this._writeUint(8,c.charCodeAt(d))};h.prototype._writeTerminatedString=function(b){if(0!==b.length){for(var c=0;c<b.length;c++)this._writeUint(8,b.charCodeAt(c));this._writeUint(8,0)}};h.prototype._writeTemplate=function(b,c){var d=Math.floor(c);c=(c-d)*Math.pow(2,b/2);this._writeUint(b/\n2,d);this._writeUint(b/2,c)};h.prototype._writeData=function(b){if(b)if(this._rawo){if(b instanceof Array){for(var c=this._cursor.offset-this._rawo.byteOffset,d=0;d<b.length;d++)this._rawo.setInt8(c+d,b[d]);this._cursor.offset+=b.length}b instanceof Uint8Array&&(this._root.bytes.set(b,this._cursor.offset),this._cursor.offset+=b.length)}else this.size+=b.length};h.prototype._writeUTF8String=function(b){b=e.Utils.utf8ToByteArray(b);if(this._rawo)for(var c=new DataView(this._rawo.buffer,this._cursor.offset,\nb.length),d=0;d<b.length;d++)c.setUint8(d,b[d]);else this.size+=b.length};h.prototype._writeField=function(b,c,d){switch(b){case \"uint\":this._writeUint(c,d);break;case \"int\":this._writeInt(c,d);break;case \"template\":this._writeTemplate(c,d);break;case \"string\":-1==c?this._writeTerminatedString(d):this._writeString(c,d);break;case \"data\":this._writeData(d);break;case \"utf8\":this._writeUTF8String(d)}};h.prototype._boxProcessors.avc1=h.prototype._boxProcessors.avc2=h.prototype._boxProcessors.avc3=h.prototype._boxProcessors.avc4=\nh.prototype._boxProcessors.hvc1=h.prototype._boxProcessors.hev1=h.prototype._boxProcessors.encv=function(){this._procFieldArray(\"reserved1\",6,\"uint\",8);this._procField(\"data_reference_index\",\"uint\",16);this._procField(\"pre_defined1\",\"uint\",16);this._procField(\"reserved2\",\"uint\",16);this._procFieldArray(\"pre_defined2\",3,\"uint\",32);this._procField(\"width\",\"uint\",16);this._procField(\"height\",\"uint\",16);this._procField(\"horizresolution\",\"template\",32);this._procField(\"vertresolution\",\"template\",32);this._procField(\"reserved3\",\n\"uint\",32);this._procField(\"frame_count\",\"uint\",16);this._procFieldArray(\"compressorname\",32,\"uint\",8);this._procField(\"depth\",\"uint\",16);this._procField(\"pre_defined3\",\"int\",16);this._procField(\"config\",\"data\",-1)};h.prototype._boxProcessors.dref=function(){this._procFullBox();this._procField(\"entry_count\",\"uint\",32);this._procSubBoxes(\"entries\",this.entry_count)};h.prototype._boxProcessors.elst=function(){this._procFullBox();this._procField(\"entry_count\",\"uint\",32);this._procEntries(\"entries\",this.entry_count,\nfunction(b){this._procEntryField(b,\"segment_duration\",\"uint\",1===this.version?64:32);this._procEntryField(b,\"media_time\",\"int\",1===this.version?64:32);this._procEntryField(b,\"media_rate_integer\",\"int\",16);this._procEntryField(b,\"media_rate_fraction\",\"int\",16)})};h.prototype._boxProcessors.emsg=function(){this._procFullBox();1==this.version?(this._procField(\"timescale\",\"uint\",32),this._procField(\"presentation_time\",\"uint\",64),this._procField(\"event_duration\",\"uint\",32),this._procField(\"id\",\"uint\",\n32),this._procField(\"scheme_id_uri\",\"string\",-1),this._procField(\"value\",\"string\",-1)):(this._procField(\"scheme_id_uri\",\"string\",-1),this._procField(\"value\",\"string\",-1),this._procField(\"timescale\",\"uint\",32),this._procField(\"presentation_time_delta\",\"uint\",32),this._procField(\"event_duration\",\"uint\",32),this._procField(\"id\",\"uint\",32));this._procField(\"message_data\",\"data\",-1)};h.prototype._boxProcessors.free=h.prototype._boxProcessors.skip=function(){this._procField(\"data\",\"data\",-1)};h.prototype._boxProcessors.frma=\nfunction(){this._procField(\"data_format\",\"uint\",32)};h.prototype._boxProcessors.ftyp=h.prototype._boxProcessors.styp=function(){this._procField(\"major_brand\",\"string\",4);this._procField(\"minor_version\",\"uint\",32);var b=-1;this._parsing&&(b=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4);this._procFieldArray(\"compatible_brands\",b,\"string\",4)};h.prototype._boxProcessors.hdlr=function(){this._procFullBox();this._procField(\"pre_defined\",\"uint\",32);this._procField(\"handler_type\",\"string\",\n4);this._procFieldArray(\"reserved\",3,\"uint\",32);this._procField(\"name\",\"string\",-1)};h.prototype._boxProcessors.mdat=function(){this._procField(\"data\",\"data\",-1)};h.prototype._boxProcessors.mdhd=function(){this._procFullBox();this._procField(\"creation_time\",\"uint\",1==this.version?64:32);this._procField(\"modification_time\",\"uint\",1==this.version?64:32);this._procField(\"timescale\",\"uint\",32);this._procField(\"duration\",\"uint\",1==this.version?64:32);this._parsing||\"string\"!=typeof this.language||(this.language=\nthis.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96);this._procField(\"language\",\"uint\",16);this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language)));this._procField(\"pre_defined\",\"uint\",16)};h.prototype._boxProcessors.mehd=function(){this._procFullBox();this._procField(\"fragment_duration\",\"uint\",1==this.version?64:32)};h.prototype._boxProcessors.mfhd=function(){this._procFullBox();this._procField(\"sequence_number\",\n\"uint\",32)};h.prototype._boxProcessors.mfro=function(){this._procFullBox();this._procField(\"mfra_size\",\"uint\",32)};h.prototype._boxProcessors.mp4a=h.prototype._boxProcessors.enca=function(){this._procFieldArray(\"reserved1\",6,\"uint\",8);this._procField(\"data_reference_index\",\"uint\",16);this._procFieldArray(\"reserved2\",2,\"uint\",32);this._procField(\"channelcount\",\"uint\",16);this._procField(\"samplesize\",\"uint\",16);this._procField(\"pre_defined\",\"uint\",16);this._procField(\"reserved3\",\"uint\",16);this._procField(\"samplerate\",\n\"template\",32);this._procField(\"esds\",\"data\",-1)};h.prototype._boxProcessors.mvhd=function(){this._procFullBox();this._procField(\"creation_time\",\"uint\",1==this.version?64:32);this._procField(\"modification_time\",\"uint\",1==this.version?64:32);this._procField(\"timescale\",\"uint\",32);this._procField(\"duration\",\"uint\",1==this.version?64:32);this._procField(\"rate\",\"template\",32);this._procField(\"volume\",\"template\",16);this._procField(\"reserved1\",\"uint\",16);this._procFieldArray(\"reserved2\",2,\"uint\",32);this._procFieldArray(\"matrix\",\n9,\"template\",32);this._procFieldArray(\"pre_defined\",6,\"uint\",32);this._procField(\"next_track_ID\",\"uint\",32)};h.prototype._boxProcessors.payl=function(){this._procField(\"cue_text\",\"utf8\")};h.prototype._boxProcessors.pssh=function(){this._procFullBox();this._procFieldArray(\"SystemID\",16,\"uint\",8);this._procField(\"DataSize\",\"uint\",32);this._procFieldArray(\"Data\",this.DataSize,\"uint\",8)};h.prototype._boxProcessors.schm=function(){this._procFullBox();this._procField(\"scheme_type\",\"uint\",32);this._procField(\"scheme_version\",\n\"uint\",32);1&this.flags&&this._procField(\"scheme_uri\",\"string\",-1)};h.prototype._boxProcessors.sdtp=function(){this._procFullBox();var b=-1;this._parsing&&(b=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset));this._procFieldArray(\"sample_dependency_table\",b,\"uint\",8)};h.prototype._boxProcessors.sidx=function(){this._procFullBox();this._procField(\"reference_ID\",\"uint\",32);this._procField(\"timescale\",\"uint\",32);this._procField(\"earliest_presentation_time\",\"uint\",1==this.version?64:32);\nthis._procField(\"first_offset\",\"uint\",1==this.version?64:32);this._procField(\"reserved\",\"uint\",16);this._procField(\"reference_count\",\"uint\",16);this._procEntries(\"references\",this.reference_count,function(b){this._parsing||(b.reference=(1&b.reference_type)<<31,b.reference|=2147483647&b.referenced_size,b.sap=(1&b.starts_with_SAP)<<31,b.sap|=(3&b.SAP_type)<<28,b.sap|=268435455&b.SAP_delta_time);this._procEntryField(b,\"reference\",\"uint\",32);this._procEntryField(b,\"subsegment_duration\",\"uint\",32);this._procEntryField(b,\n\"sap\",\"uint\",32);this._parsing&&(b.reference_type=b.reference>>31&1,b.referenced_size=2147483647&b.reference,b.starts_with_SAP=b.sap>>31&1,b.SAP_type=b.sap>>28&7,b.SAP_delta_time=268435455&b.sap)})};h.prototype._boxProcessors.smhd=function(){this._procFullBox();this._procField(\"balance\",\"uint\",16);this._procField(\"reserved\",\"uint\",16)};h.prototype._boxProcessors.ssix=function(){this._procFullBox();this._procField(\"subsegment_count\",\"uint\",32);this._procEntries(\"subsegments\",this.subsegment_count,\nfunction(b){this._procEntryField(b,\"ranges_count\",\"uint\",32);this._procSubEntries(b,\"ranges\",b.ranges_count,function(b){this._procEntryField(b,\"level\",\"uint\",8);this._procEntryField(b,\"range_size\",\"uint\",24)})})};h.prototype._boxProcessors.stsd=function(){this._procFullBox();this._procField(\"entry_count\",\"uint\",32);this._procSubBoxes(\"entries\",this.entry_count)};h.prototype._boxProcessors.subs=function(){this._procFullBox();this._procField(\"entry_count\",\"uint\",32);this._procEntries(\"entries\",this.entry_count,\nfunction(b){this._procEntryField(b,\"sample_delta\",\"uint\",32);this._procEntryField(b,\"subsample_count\",\"uint\",16);this._procSubEntries(b,\"subsamples\",b.subsample_count,function(b){this._procEntryField(b,\"subsample_size\",\"uint\",1===this.version?32:16);this._procEntryField(b,\"subsample_priority\",\"uint\",8);this._procEntryField(b,\"discardable\",\"uint\",8);this._procEntryField(b,\"codec_specific_parameters\",\"uint\",32)})})};h.prototype._boxProcessors.tenc=function(){this._procFullBox();this._procField(\"default_IsEncrypted\",\n\"uint\",24);this._procField(\"default_IV_size\",\"uint\",8);this._procFieldArray(\"default_KID\",16,\"uint\",8)};h.prototype._boxProcessors.tfdt=function(){this._procFullBox();this._procField(\"baseMediaDecodeTime\",\"uint\",1==this.version?64:32)};h.prototype._boxProcessors.tfhd=function(){this._procFullBox();this._procField(\"track_ID\",\"uint\",32);1&this.flags&&this._procField(\"base_data_offset\",\"uint\",64);2&this.flags&&this._procField(\"sample_description_offset\",\"uint\",32);8&this.flags&&this._procField(\"default_sample_duration\",\n\"uint\",32);16&this.flags&&this._procField(\"default_sample_size\",\"uint\",32);32&this.flags&&this._procField(\"default_sample_flags\",\"uint\",32)};h.prototype._boxProcessors.tfra=function(){this._procFullBox();this._procField(\"track_ID\",\"uint\",32);this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num);this._procField(\"reserved\",\"uint\",32);this._parsing&&(this.length_size_of_traf_num=\n(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved);this._procField(\"number_of_entry\",\"uint\",32);this._procEntries(\"entries\",this.number_of_entry,function(b){this._procEntryField(b,\"time\",\"uint\",1===this.version?64:32);this._procEntryField(b,\"moof_offset\",\"uint\",1===this.version?64:32);this._procEntryField(b,\"traf_number\",\"uint\",8*(this.length_size_of_traf_num+1));this._procEntryField(b,\"trun_number\",\"uint\",8*(this.length_size_of_trun_num+\n1));this._procEntryField(b,\"sample_number\",\"uint\",8*(this.length_size_of_sample_num+1))})};h.prototype._boxProcessors.tkhd=function(){this._procFullBox();this._procField(\"creation_time\",\"uint\",1==this.version?64:32);this._procField(\"modification_time\",\"uint\",1==this.version?64:32);this._procField(\"track_ID\",\"uint\",32);this._procField(\"reserved1\",\"uint\",32);this._procField(\"duration\",\"uint\",1==this.version?64:32);this._procFieldArray(\"reserved2\",2,\"uint\",32);this._procField(\"layer\",\"uint\",16);this._procField(\"alternate_group\",\n\"uint\",16);this._procField(\"volume\",\"template\",16);this._procField(\"reserved3\",\"uint\",16);this._procFieldArray(\"matrix\",9,\"template\",32);this._procField(\"width\",\"template\",32);this._procField(\"height\",\"template\",32)};h.prototype._boxProcessors.trex=function(){this._procFullBox();this._procField(\"track_ID\",\"uint\",32);this._procField(\"default_sample_description_index\",\"uint\",32);this._procField(\"default_sample_duration\",\"uint\",32);this._procField(\"default_sample_size\",\"uint\",32);this._procField(\"default_sample_flags\",\n\"uint\",32)};h.prototype._boxProcessors.trun=function(){this._procFullBox();this._procField(\"sample_count\",\"uint\",32);1&this.flags&&this._procField(\"data_offset\",\"int\",32);4&this.flags&&this._procField(\"first_sample_flags\",\"uint\",32);this._procEntries(\"samples\",this.sample_count,function(b){256&this.flags&&this._procEntryField(b,\"sample_duration\",\"uint\",32);512&this.flags&&this._procEntryField(b,\"sample_size\",\"uint\",32);1024&this.flags&&this._procEntryField(b,\"sample_flags\",\"uint\",32);2048&this.flags&&\nthis._procEntryField(b,\"sample_composition_time_offset\",1===this.version?\"int\":\"uint\",32)})};h.prototype._boxProcessors[\"url \"]=h.prototype._boxProcessors[\"urn \"]=function(){this._procFullBox();\"urn \"===this.type&&this._procField(\"name\",\"string\",-1);this._procField(\"location\",\"string\",-1)};h.prototype._boxProcessors.vlab=function(){this._procField(\"source_label\",\"utf8\")};h.prototype._boxProcessors.vmhd=function(){this._procFullBox();this._procField(\"graphicsmode\",\"uint\",16);this._procFieldArray(\"opcolor\",\n3,\"uint\",16)};h.prototype._boxProcessors.vttC=function(){this._procField(\"config\",\"utf8\")};h.prototype._boxProcessors.vtte=function(){}},function(b,c,d){function e(){return\"2.7.0\"}d.d(c,\"a\",function(){return e})},function(b,c,d){Object.defineProperty(c,\"__esModule\",{value:!0});b=function(){function b(){}return b.getLocalStorage=function(b){var c=\"\";try{c=window.localStorage.getItem(b)}catch(t){}return c},b.setLocalStorage=function(b,c){try{window.localStorage.setItem(b,c)}catch(t){}},b.getSessionStorage=\nfunction(b){var c=\"\";try{c=window.sessionStorage.getItem(b)}catch(t){}return c},b.setSessionStorage=function(b,c){try{window.sessionStorage.setItem(b,c)}catch(t){}},b}();c.default=b},function(b,c,d){Object.defineProperty(c,\"__esModule\",{value:!0});c.STRING=c.ERROR=c.EVENTS=void 0;c.EVENTS={SCRIPT_LOADED:\"scripLoaded\",VIDEO_INFO:\"videoInfo\",WARNING:\"warning\",AST_IN_FUTURE:\"astInFuture\",BUFFER_EMPTY:\"bufferStalled\",BUFFER_LOADED:\"bufferLoaded\",BUFFER_LEVEL_STATE_CHANGED:\"bufferStateChanged\",ERROR:\"error\",\nFRAGMENT_LOADING_COMPLETED:\"fragmentLoadingCompleted\",FRAGMENT_LOADING_HEADER_RECEIVED:\"fragmentLoadingHeaderReceived\",FRAGMENT_LOADING_PROGRESS:\"fragmentLoadingProgress\",FRAGMENT_LOADING_STARTED:\"fragmentLoadingStarted\",FRAGMENT_LOADING_ABANDONED:\"fragmentLoadingAbandoned\",FRAGMENT_LOADED_ERROR:\"fragmentLoadedError\",FRAGMENT_P2P_LOAD_INFO:\"fragmentP2pLoadInfo\",PCDN_LOADED_ERROR:\"pcdnLoadedError\",LOG:\"log\",MANIFEST_LOADED:\"manifestLoaded\",METRICS_CHANGED:\"metricsChanged\",METRIC_CHANGED:\"metricChanged\",\nMETRIC_ADDED:\"metricAdded\",METRIC_UPDATED:\"metricUpdated\",PERIOD_SWITCH_COMPLETED:\"periodSwitchCompleted\",PERIOD_SWITCH_STARTED:\"periodSwitchStarted\",QUALITY_CHANGE_REQUESTED:\"qualityChangeRequested\",QUALITY_CHANGE_RENDERED:\"qualityChangeRendered\",TRACK_CHANGE_RENDERED:\"trackChangeRendered\",SOURCE_INITIALIZED:\"sourceInitialized\",STREAM_INITIALIZED:\"streamInitialized\",STREAM_TEARDOWN_COMPLETE:\"streamTeardownComplete\",TEXT_TRACKS_ADDED:\"allTextTracksAdded\",TEXT_TRACK_ADDED:\"textTrackAdded\",TTML_PARSED:\"ttmlParsed\",\nTTML_TO_PARSE:\"ttmlToParse\",CAN_PLAY:\"canPlay\",PLAYBACK_ENDED:\"playbackEnded\",PLAYBACK_ERROR:\"playbackError\",PLAYBACK_NOT_ALLOWED:\"playbackNotAllowed\",PLAYBACK_METADATA_LOADED:\"playbackMetaDataLoaded\",PLAYBACK_PAUSED:\"playbackPaused\",PLAYBACK_PLAYING:\"playbackPlaying\",PLAYBACK_PROGRESS:\"playbackProgress\",PLAYBACK_RATE_CHANGED:\"playbackRateChanged\",PLAYBACK_SEEKED:\"playbackSeeked\",PLAYBACK_SEEKING:\"playbackSeeking\",PLAYBACK_SEEK_ASKED:\"playbackSeekAsked\",PLAYBACK_STARTED:\"playbackStarted\",PLAYBACK_TIME_UPDATED:\"playbackTimeUpdated\",\nPLAYBACK_WAITING:\"playbackWaiting\",MANIFEST_VALIDITY_CHANGED:\"manifestValidityChanged\",KEY_ADDED:\"public_keyAdded\",KEY_ERROR:\"public_keyError\",KEY_MESSAGE:\"public_keyMessage\",KEY_SESSION_CLOSED:\"public_keySessionClosed\",KEY_SESSION_CREATED:\"public_keySessionCreated\",KEY_SESSION_REMOVED:\"public_keySessionRemoved\",KEY_STATUSES_CHANGED:\"public_keyStatusesChanged\",KEY_SYSTEM_ACCESS_COMPLETE:\"public_keySystemAccessComplete\",KEY_SYSTEM_SELECTED:\"public_keySystemSelected\",LICENSE_REQUEST_COMPLETE:\"public_licenseRequestComplete\",\nPROTECTION_CREATED:\"public_protectioncreated\",PROTECTION_DESTROYED:\"public_protectiondestroyed\",DELAY_TO_APPEND_TO_BUFFER:\"delayToAppendBuffer\",QUALITY_CHANGE_DOWNLOADED:\"qualityChangeDownloaded\",QUOTA_EXCEEDED:\"quotaExceeded\",GET_NEXT_FRAGMENT:\"getNextFragment\",APPENDING_NEXT_SOURCE:\"appendingNextSource\",APPENDED_NEXT_SOURCE:\"appendedNextSource\",APPENDED_NEXT_SOURCE_DURATION_CHANGED:\"appendedNextSourceDurationChanged\",START_OFFSET_TIME_WARNING:\"startOffsetTimeWarning\",BUFFERING_OPTIMIZATION:\"buffering_optimization\"};\nc.ERROR={INTERNAL_ERROR:-1,DURATION_IS_NOT_ALL_EQUAL:-2,DURATION_DEVIATION_IS_TOO_LARGE:-3,START_OFFSET_TIME_WARNING:-4,DOWNLOAD_ERROR:4,DOWNLOAD_MPD_ERROR:4001,DOWNLOAD_XINK_ERROR:4002,DOWNLOAD_INIT_SEGMENT_ERROR:4003,DOWNLOAD_MEDIA_SEGMENT_ERROR:4004,DOWNLOAD_INDEX_SEGMENT_ERROR:4005,DOWNLOAD_SWITCHING_SEGMENT_ERROR:4006,DOWNLOAD_OTHER_ERROR:4007,DOWNLOAD_FRAGMENT_ERROR:4101,DOWNLOAD_FRAGMENT_ERROR_RETRY_SUCCESS:4102,DOWNLOAD_FRAGMENT_ERROR_RETRY_FAILURE:4103,DOWNLOAD_FRAGMENT_ERROR_TIMEOUT:4105,\nCONNECT_FRAGMENT_ERROR_TIMEOUT:4106,MANIFEST_ERROR:5,MANIFEST_TYPE_ERROR:5001,MANIFEST_RESOLVE_ERROR:5002,MEDIA_ERROR:6,MEDIA_ABORTED_ERROR:6001,MEDIA_NETWORK_ERROR:6002,MEDIA_DECODE_ERROR:6003,MEDIA_SUPPORTED_ERROR:6004,MEDIA_ENCRYPTED_ERROR:6005,MEDIA_UNKNOWN_ERROR:6E3};c.STRING={VIDEO:\"video\",AUDIO:\"audio\",LOG:\"log\",WARNING:\"warning\",ERROR:\"error\",ABR_DYNAMIC:\"abrDynamic\",ABR_BOLA:\"abrBola\",ABR_THROUGHPUT:\"abrThroughput\",SWITCH_SOURCE_TRANSITION_ELEMENT_CLASS_NAME:\"bilidp-switch-source-transition-canvas\"}},\nfunction(c,d,g){function e(){function b(b,d,e){var f=-1;return c[b]?(c[b].some(function(b,c){if(b&&b.callback===d&&(!e||e===b.scope))return f=c,!0}),f):f}var c={};return{on:function(d,e,f){var g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!d)throw Error(\"event type cannot be null or undefined\");if(!e||\"function\"!=typeof e)throw Error(\"listener must be a function: \"+e);if(!(0<=b(d,e,f))){c[d]=c[d]||[];var h={callback:e,scope:f,priority:g};c[d].some(function(b,e){if(b&&g>b.priority)return c[d].splice(e,\n0,h),!0})||c[d].push(h)}},off:function(d,e,f){d&&e&&c[d]&&(e=b(d,e,f),0>e||(c[d][e]=null))},trigger:function(b,d){if(b&&c[b]){if((d=d||{}).hasOwnProperty(\"type\"))throw Error(\"'type' is a reserved word for event dispatching\");d.type=b;c[b]=c[b].filter(function(b){return b});c[b].forEach(function(b){return b&&b.callback.call(b.scope,d)})}},reset:function(){c={}}}}function f(){var b,c=l(this.context).getInstance(),d=void 0,e=void 0,f=void 0,g=void 0;return b={log:function(){var b=\"\",h=null;e&&(h=(new Date).getTime(),\nb+=\"[\"+(h-g)+\"]\");f&&this&&this.getClassName&&(b+=\"[\"+this.getClassName()+\"]\",this.getType&&(b+=\"[\"+this.getType()+\"]\"));0<b.length&&(b+=\" \");Array.apply(null,arguments).forEach(function(c){b+=c+\" \"});d&&(undefined);c.trigger(x.LOG,{message:b})},setLogTimestampVisible:function(b){e=b},setCalleeNameVisible:function(b){f=b},setLogToBrowserConsole:function(b){d=b},getLogToBrowserConsole:function(){return d}},d=!1,e=!0,f=!1,g=(new Date).getTime(),b}function h(b){function c(b){var c;return!!b&&(c=!1,\nz.some(function(d){var e=b;var f=d;(e=!isNaN(e.index)&&e.startTime===f.startTime&&e.adaptationIndex===f.adaptationIndex&&e.type===f.type)||(e=isNaN(b.index)&&isNaN(d.index)&&b.quality===d.quality);if(e||b.action===$a.ACTION_COMPLETE&&b.action===d.action)return c=!0}),c)}function d(b){return isNaN(b.duration)?.25:b.duration/8}function e(b){z=z.filter(function(c){var e=d(c);return isNaN(c.startTime)||void 0!==b&&c.startTime>=b-e})}function f(b,c){c<=b+.5||(z=z.filter(function(e){var f=d(e);return isNaN(e.startTime)||\ne.startTime>=c-f||isNaN(e.duration)||e.startTime+e.duration<=b+f}))}function g(b,c,e){for(var f=b.length-1;0<=f;f--){var g=b[f],h=g.startTime,l=h+g.duration;if(e=isNaN(e)?d(g):e,!isNaN(h)&&!isNaN(l)&&c+e>=h&&c-e<l||isNaN(h)&&isNaN(c))return g}return null}function h(b,c){pa.addSchedulingInfo(b.mediaType,new Date,b.type,b.startTime,b.availabilityStartTime,b.duration,b.quality,b.range,c);pa.addRequestsQueue(b.mediaType,Ua,z)}function k(b){if(b.sender===Ea&&!b.error){if(Ua.splice(Ua.indexOf(b.request),\n1),b.response&&!b.error){var c=z&&z[z.length-1],d=Ba.getPlaybackController().getTime()||0,e=b.request,f=c&&(isNaN(c.index)||isNaN(c.startTime)&&isNaN(c.duration)),g=e&&(isNaN(e.index)||isNaN(e.startTime)&&isNaN(e.duration)),l=c&&(0===d||e.startTime-1<=d&&e.startTime+e.duration+1>=d),k=c&&1==e.index-c.index||z&&z.length&&z.filter(function(b){return 1==e.index-b.index}).length||0===e.index;if(p(\"push\",e.mediaType,JSON.stringify({index:e.index,isLastNaNRequest:f,isCurrentNaNRequest:g,isCurrentTimeInFirstRequest:l,\ncurrentTime:d})),!g&&l&&1<z.length&&!k&&z.splice(1,z.length-1),c&&!g&&!l&&!k)return void Ba.getScheduleController().start();z.push(b.request)}h(b.request,b.error?\"failed\":\"executed\");u.trigger(x.FRAGMENT_LOADING_COMPLETED,{request:b.request,response:b.response,error:b.error,sender:this});b.request&&b.request.p2pLoadInfo&&\"{}\"!=JSON.stringify(b.request.p2pLoadInfo)&&u.trigger(x.FRAGMENT_P2P_LOAD_INFO,{p2pLoadInfo:b.request.p2pLoadInfo})}}function m(b){b.sender===Ea&&u.trigger(x.FRAGMENT_LOADING_PROGRESS,\n{request:b.request,response:b.response,error:b.error,sender:this})}function q(b){b.sender===Ea&&u.trigger(x.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:b.request,mediaType:b.mediaType})}function n(){null;z=[];Ua=[]}b=b||{};var t=this.context,p=Ja(t).getInstance().log,u=l(t).getInstance(),pa=b.metricsModel,Ea=b.fragmentLoader,ea=void 0,Ba=void 0,z=void 0,Ua=void 0;return ea={setStreamProcessor:function(b){Ba=b},getStreamProcessor:function(){return Ba},getRequests:function(b){var c=\n[];return(b?b.state instanceof Array?b.state:[b.state]:[]).forEach(function(d){d=function(b){switch(b){case \"loading\":b=Ua;break;case \"executed\":b=z;break;default:b=[]}return b}(d);c=c.concat(function(b,c){return c.hasOwnProperty(\"time\")?[g(b,c.time,c.threshold)]:b.filter(function(b){for(var d in c)if(\"state\"!==d&&c.hasOwnProperty(d)&&b[d]!=c[d])return!1;return!0})}(d,b))}),c},isFragmentLoaded:c,isFragmentLoadedOrPending:function(b){var d,e;if(!(d=c(b)))for(e=0;e<Ua.length;e++){var f=Ua[e];b.url===\nf.url&&b.startTime===f.startTime&&(d=!0)}return d},removeExecutedRequestsBeforeTime:e,removeExecutedRequestsAfterTime:function(b){z=z.filter(function(c){return isNaN(c.startTime)||void 0!==b&&c.startTime<=b})},syncExecutedRequestsWithBufferedRange:function(b,c){if(b&&0!==b.length){for(var d=0,g=0,h=b.length;g<h;g++)f(d,b.start(g)),d=b.end(g);0<c&&f(d,c)}else e()},clearExecutedRequestBySeeking:function(){z=[]},abortRequests:function(){Ea.abort();Ua=[]},executeRequest:function(b){switch(b.action){case $a.ACTION_COMPLETE:z.push(b);\nh(b,\"executed\");p(\"[FragmentModel] executeRequest trigger STREAM_COMPLETED\");u.trigger(x.STREAM_COMPLETED,{request:b,fragmentModel:this});break;case $a.ACTION_DOWNLOAD:h(b,\"loading\");Ua.push(b);u.trigger(x.FRAGMENT_LOADING_STARTED,{sender:ea,request:b});Ea.load(b);break;default:p(\"Unknown request action.\")}},reset:function(){u.off(x.LOADING_COMPLETED,k,this);u.off(x.LOADING_DATA_PROGRESS,m,this);u.off(x.LOADING_ABANDONED,q,this);Ea&&Ea.reset();n()},addExecutedRequest:function(){},resetInitialSettings:n,\nresetPreloadData:function(){Ea&&Ea.resetPreloadData()}},n(),u.on(x.LOADING_COMPLETED,k,ea),u.on(x.LOADING_DATA_PROGRESS,m,ea),u.on(x.LOADING_ABANDONED,q,ea),ea}function k(b,c,d){function e(){return q?q.buffered:[]}function f(){var b=this;if(0<t.length){n=!0;var c=t[0];t.splice(0,1);var d=[],h=function(){var g=e(),h=d,l;if(l=h&&0<h.length&&h.length<g.length)a:{for(l=0;l<h.length;l++){var k=Math.round(h.start(l)),q=Math.round(h.end(l));if(q===c.start||k===c.end||c.start>=k&&c.end<=q){l=!0;break a}}l=\n!1}l&&m.trigger(x.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:b,from:g.end(g.length-2),to:g.start(g.length-1),unintended:!0});!0;0<t.length?f.call(this):(n=!1,p&&p({chunk:c}))};try{0===c.bytes.length?h.call(this):(d=e(),q.appendBuffer?q.appendBuffer(c.bytes):q.append(c.bytes,c),g(q,h.bind(this)))}catch(Ba){k('SourceBuffer append failed \"'+Ba+'\"'),0<t.length?f():n=!1,p&&p({chunk:c,error:new Xa(Ba.code,Ba.message,null)})}}}function g(b,c){var d=void 0,e=function(){b.updating||(clearInterval(d),c())};if(b.updating)if(\"function\"==\ntypeof b.addEventListener)try{b.addEventListener(\"updateend\",function zb(){b.updating||(b.removeEventListener(\"updateend\",zb,!1),c())},!1)}catch(Ba){d=setInterval(e,50)}else d=setInterval(e,50);else c()}var h=this.context,k=Ja(h).getInstance().log,m=l(h).getInstance(),q=void 0,n=void 0,t=[],p=d;d={getAllBufferRanges:e,getBuffer:function(){return q},append:function(b){t.push(b);n||g(q,f.bind(this))},remove:function(c,d,e){var f=this;g(q,function(){try{0<=c&&d>c&&(e||\"ended\"!==b.readyState)&&q.remove(c,\nd),g(q,function(){m.trigger(x.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:f,from:c,to:d,unintended:!1})})}catch(Ba){m.trigger(x.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:f,from:c,to:d,unintended:!1,error:new Xa(Ba.code,Ba.message,null)})}})},abort:function(){try{(\"open\"===b.readyState||q.setTextTrack&&\"ended\"===b.readyState)&&q.abort()}catch(lb){k('SourceBuffer append abort failed: \"'+lb+'\"')}t=[]},reset:function(){if(q){try{b.removeSourceBuffer(q)}catch(lb){k(\"Failed to remove source buffer from media source.\")}n=\n!1;q=null}t=[];p=null},setAppendWindowEnd:function pa(c){0>=c||g(q,function(){if(\"open\"===b.readyState)q.appendWindowEnd=c;else var d=setTimeout(function(){clearTimeout(d);pa(c)},50)})},updateTimestampOffset:function(b){q.timestampOffset===b||isNaN(b)||g(q,function(){q.timestampOffset=b})}};return function(){n=!1;var d=c.codec;try{if(d.match(/application\\/mp4;\\s*codecs=\"(stpp|wvtt).*\"/i))throw Error(\"not really supported\");q=b.addSourceBuffer(d)}catch(rb){throw rb;}}(),d}function n(b){function c(b,\nc){e=e.filter(function(d){return!((isNaN(c)||d.start<c)&&(isNaN(b)||d.end>b))})}var d=Ja(this.context).getInstance().log,e=[],f=void 0,g=b;return{getAllBufferRanges:function(){for(var b=[],c=0;c<e.length;c++){var d=e[c];0===b.length||d.start>b[b.length-1].end?b.push({start:d.start,end:d.end}):b[b.length-1].end=d.end}c={start:function(c){return b[c].start},end:function(c){return b[c].end}};return Object.defineProperty(c,\"length\",{get:function(){return b.length}}),c},append:function(b){\"InitializationSegment\"!==\nb.segmentType?(e.push(b),e.sort(function(b,c){return b.start-c.start}),f=null):f=b;d(\"PreBufferSink appended chunk s: \"+b.start+\"; e: \"+b.end);g&&g({chunk:b})},remove:c,abort:function(){},discharge:function(b,d){var g=function(b,c){return e.filter(function(d){return(isNaN(c)||d.start<c)&&(isNaN(b)||d.end>b)})}(b,d);return f&&(g.push(f),f=null),c(b,d),g},reset:function(){e=[];g=f=null}}}function p(b,c,d){var e=Zb.DEFAULT;d=(d!==Zb.DEFAULT&&d!==Zb.STRONG&&d!==Zb.WEAK||(e=d),e);return{quality:void 0===\nb?-1:b,reason:void 0===c?null:c,priority:d}}function v(b){b=b||{};var c=this.context,d=Ja(c).getInstance().log,e=b.metricsModel;return{getMaxIndex:function(b){var f=ha(c).create();if(!(b&&b.hasOwnProperty(\"getMediaInfo\")&&b.hasOwnProperty(\"getMediaType\")&&b.hasOwnProperty(\"useBufferOccupancyABR\")&&b.hasOwnProperty(\"getAbrController\")&&b.hasOwnProperty(\"getStreamProcessor\")))return f;if(!e||!e.hasOwnProperty(\"getReadOnlyMetricsFor\"))throw Error(\"Missing config parameter(s)\");!0;var g=b.getMediaInfo(),\nh=b.getMediaType(),l=e.getReadOnlyMetricsFor(h),k=b.getStreamProcessor(),m=b.getAbrController(),q=b.getStreamInfo(),q=q&&q.manifestInfo?q.manifestInfo.isDynamic:null,n=m.getThroughputHistory(),t=n.getSafeAverageThroughput(h,q),n=n.getAverageLatency(h),p=0<l.BufferState.length?l.BufferState[l.BufferState.length-1]:null;b=b.useBufferOccupancyABR();return!l||isNaN(t)||!p||b||m.getAbandonmentStateFor(h)!==$b.ABANDON_LOAD&&(p||q)&&(f.quality=m.getQualityForBitrate(g,t,n),k.getScheduleController().setTimeToLoadDelay(0),\nd(\"ThroughputRule requesting switch to index: \",f.quality,\"type: \",h,\"Average throughput\",Math.round(t),\"kbps\"),f.reason={throughput:t,latency:n}),f},reset:function(){}}}function H(b){function c(){l={};k={};m=[]}b=b||{};var d=this.context,e=Ja(d).getInstance().log,f=b.mediaPlayerModel,g=b.metricsModel,h=b.dashMetrics,l=void 0,k=void 0,m=void 0;b={shouldAbandon:function(b){var c=ha(d).create(ha.NO_CHANGE,{name:H.__dashjs_factory_name});if(!(b&&b.hasOwnProperty(\"getMediaInfo\")&&b.hasOwnProperty(\"getMediaType\")&&\nb.hasOwnProperty(\"getCurrentRequest\")&&b.hasOwnProperty(\"getRepresentationInfo\")&&b.hasOwnProperty(\"getAbrController\")))return c;var q=b.getMediaInfo(),n=b.getMediaType(),t=b.getCurrentRequest();if(!isNaN(t.index)){var p=t.index;l[n]=l[n]||{};l[n][p]=l[n][p]||{};p=f.getStableBufferTime();if(h.getCurrentBufferLevel(g.getReadOnlyMetricsFor(n))>p)return c;p=l[n][t.index];if(null===p||null===t.firstByteDate||k.hasOwnProperty(p.id))return c;if(void 0===p.firstByteTime&&(m[n]=[],p.firstByteTime=t.firstByteDate.getTime(),\np.segmentDuration=t.duration,p.bytesTotal=t.bytesTotal,p.id=t.index),p.bytesLoaded=t.bytesLoaded,p.elapsedTime=(new Date).getTime()-p.firstByteTime,0<p.bytesLoaded&&0<p.elapsedTime&&function(b,c){m[b]=m[b]||[];m[b].push(c)}(n,Math.round(8*p.bytesLoaded/p.elapsedTime)),5<=m[n].length&&500<p.elapsedTime&&p.bytesLoaded<p.bytesTotal){t=m[n].reduce(function(b,c){return b+c},0);if(p.measuredBandwidthInKbps=Math.round(t/m[n].length),p.estimatedTimeOfDownload=+(8*p.bytesTotal/p.measuredBandwidthInKbps/1E3).toFixed(2),\np.estimatedTimeOfDownload<1.8*p.segmentDuration||0===b.getRepresentationInfo().quality)return c;if(!k.hasOwnProperty(p.id)){b=b.getAbrController();var t=p.bytesTotal-p.bytesLoaded,u=b.getBitrateList(q),Sa=b.getQualityForBitrate(q,p.measuredBandwidthInKbps*f.getBandwidthSafetyFactor());t>p.bytesTotal*u[Sa].bitrate/u[b.getQualityFor(n,q.streamInfo)].bitrate&&(c.quality=Sa,c.reason.throughput=p.measuredBandwidthInKbps,c.reason.fragmentID=p.id,k[p.id]=p,e(\"AbandonRequestsRule ( \",n,\"frag id\",p.id,\") is asking to abandon and switch to quality to \",\nSa,\" measured bandwidth was\",p.measuredBandwidthInKbps),delete l[n][p.id])}}else p.bytesLoaded===p.bytesTotal&&delete l[n][p.id]}return c},reset:c};return c(),b}function q(b,c){if(!(b instanceof c))throw new TypeError(\"Cannot call a class as a function\");}function D(b){function c(b,c,d){var e=d.reduce(function(b,c,e){return c>d[b]?e:b},0);if(0===e)return null;b=(d[e]-1)/(Math.max(b,10+2*c.length)/10-1);return{gp:b,Vp:10/b}}function d(b){var d={};b=b.getMediaInfo().bitrateList.map(function(b){return b.bandwidth});\nvar f=function(b){return b.map(function(b){return Math.log(b)})}(b),f=f.map(function(b){return b-f[0]+1}),g=v.getStableBufferTime(),h=c(g,b,f);return h?(d.state=1,d.bitrates=b,d.utilities=f,d.stableBufferTime=g,d.Vp=h.Vp,d.gp=h.gp,d.lastQuality=0,e(d)):d.state=0,d}function e(b){b.placeholderBuffer=0;b.mostAdvancedSegmentStart=NaN;b.lastSegmentWasReplacement=!1;b.lastSegmentStart=NaN;b.lastSegmentDurationS=NaN;b.lastSegmentRequestTimeMs=NaN;b.lastSegmentFinishTimeMs=NaN}function f(b,d){var e=v.getStableBufferTime();\nif(b.stableBufferTime!==e){var f=c(e,b.bitrates,b.utilities);if(f.Vp!==b.Vp||f.gp!==b.gp){d=ea.getCurrentBufferLevel(z.getReadOnlyMetricsFor(d));var g=d+b.placeholderBuffer,g=f.Vp/b.Vp*(g-10);b.stableBufferTime=e;