wvdShwpEa0ZwCAZMysDCTAkbEoisMBJEe4an/pisxJIvo4EZ/Ksay5lxhjDo8Gvdel5w19PgDJWWG1kyTnemZdho9VxQIFkAL5uY4EOAoUFw/pxcMbz+AqEuCQqS9OEIEcXUMCHAJFxQkiF6JLJwlwyNYVJ4hgnlWfJMAhWEycIPJhVnmSAIdOPXGCKORa9kkCHApFxAmiF2qZJwlw6NYRJ4hivtonCXAoFg8niH64micJcJRTP5wgyjlrnSIAolw4nCD6AWvhmKwcSPRriBNEKWNtHECiVLh7pgUQhZzLwgEkCsUDEN1Qy8YBJLr1xAkimG9VOIBEsIg4QXTCrBoHkOjUFSeIQK6u4AASgWLiBJEN0TUcQCJbX5wgBfJ0FQeQFCgqThCZ8FzHASQydcYJkiPHxmr7aSJ6I8elKZeYnxrDhplekJwbb9zzpwkgGbNTOzl2/T5D/Hu8GYuiOBxAMoRbBo7JcoAkQ2EUhwKIZbhl4gASy6KUMAxALEKuAgeQWBSmhCEAkhJylTiApAQBKbcAkDkBuYADSKpFAiAz8ncJB5BUhwRApmTvIg4gqQYJgNyTu8s4gKR8JACyK3MfcABJuUgA5HbePuEAkvKQAMj4d3ysto8kxpxjZtk8dn19RKukeOOuleyteWUbQnetKrOr/b7BEnDgJFFpibsmjRpICDiARBdJtEBCwgEkekiiBBIiDnUkzEc3+93zeq3o5szRAQkZhyaS2w+sS7EhiQpIDDiARPYkigZITDiARA5JFEBixAEkMkiCBxIzDiApjiRoIMBxp0E03rjH8OAeLBDg2Pv/nkCS/UQJEghwzG4EIMmGJDggwJHeAECSntFkRFBAgMO+8EBil1UwQIDDruC7RwFJemZBANHCkRDVt/rdrfQY/R0BJPNr5z0Q4CiOE0hmZ+g1EOAojgMvEwM9QYBDDgeQBHaCAIc8DiCZnql3H7GAQw8HkOzN1isgwKGPY3KH5dX2co1oJH1HJvLqL115AwQ4pFs1fT4g8eSf/QGO9GbWGhE7EudPEODQan37eWNG4jQQ4LBvYu2RsSJxFghwaLd89vljROIkEK1CxPDdquxtn+0Krdq4+qdbzgHRKgBwZIMwb7RWjVxE4hQQreCBQw5HbO9JnAECHPJNrD1jDDVzAkgMQWs3a1Xzh167yoGEHnBVjVvmfUOuYaVAQg62zAZ14V6h1rIyIKEG6kKzVrWGEGtaCZAQg6yqKV27b2i1LR1IaAG61qAurCekGpcKJKTgXGhEl9cQSq1LAxJKYC43pWtrC6HmpQAJISjXms+X9fhee3UgvgfkSyO6vE6fe0AViM/BuNxwPq7N115QA6IViIvf+PSxYatYs1ZPaH4ZVQWIVhDAUUVby95Tqze0kIgD0QoAOGQbtcrZtHpEA4koEK2NA0eV7axzb61ekUYiBkRrw8Ch06AuzKrVM5JIRIBobRQ4XGhj3TVo9Y4UksJAtDYIHLqN6dLsWj0kgaQQEK2NAYdL7VvOWrR6qSiS3EC0NgQc5TSki3fR6qkiSHIB0doIcLjYtuWuSau38iLJDERrA8BRbiO6fDetHsuDJBMQrYUDh8vtWs3atHotKxJrIPhNqNU0Ssx3deHfZ7YCAhwxt2m1e68aSSoQ4Ki2QXB3oiqRzAVSX203mGhTvkjm2LDfOys/L2YMNQGtZxKT8A9GG6d/MSu3mUB+uHbqM4lJrhLRxyRDxwO5ZJpxzaV0kmybxBwcbfTen5bmVCCLi4sLn3rw4XeJ6YBkCYBDMs0459JAYoy58u9//uPzly5dunlvqlOBLK+1n6gZ+o1kCYBDMs2459JBkjwxGqz/zgpIfbX9YyZ6UaoMwCGVJOaZJCCNJDFmZWvQ29PzU0+QerN1gZmfkSgHcEikiDmmJSCKxJiLw0HvabsTpNl6jZmfK1oW4CiaIK5PS0AKiSH65ajf3XMoTD1BGs3WcWL+edri5v0cOIqkh2uzJCCBxBD9aNTv7un56Q/pKycfr9XM77MscvdY4MibHK7Lm0BxJObxYb/3R6uPWJ1Op/af/21fZqJDWRcMHFkTw3ipBHIjMebycND7IhEZKyDjQcfWTu1fuPWi8D7bDQCHbVIYp5VADiTbN24k+8++tP7BtDXN/apJo9laIuZzlpv53rDffc1yLIYhAbUEGs3W94l55tdH7rqxMUeHg94rsxaT+mXF+trJL1CSvMnMD02bZPwWMqktfPvlMy/8TW3HmBgJZExgeaX9tVrNnCfiT0+91NC/iGhpOOj+at7UqUDGFz/b6Tyw7/pHT1KNDhqiA2x4m9hcM0xXR2d6b2dcO4YjgdISON48+Y2EzCFiepTMzuPCFaqZK//9xP3vXOh0PkxbiBWQtEnwcyQQagIAEmplsS+RBABEJEZMEmoCABJqZbEvkQQARCRGTBJqAv8H3fK9UI318GUAAAAASUVORK5CYII=\"},\nfunction(p,v,n){function h(b,c){for(var e=0;e<b.length;e++){var d=b[e],f=t[d.id];if(f){f.refs++;for(var m=0;m<f.parts.length;m++)f.parts[m](d.parts[m]);for(;m<d.parts.length;m++)f.parts.push(k(d.parts[m],c))}else{f=[];for(m=0;m<d.parts.length;m++)f.push(k(d.parts[m],c));t[d.id]={id:d.id,refs:1,parts:f}}}}function g(b,c){for(var e=[],d={},f=0;f<b.length;f++){var m=b[f],k=c.base?m[0]+c.base:m[0],m={css:m[1],media:m[2],sourceMap:m[3]};d[k]?d[k].parts.push(m):e.push(d[k]={id:k,parts:[m]})}return e}function d(b,\nc){var e=y(b.insertInto);if(!e)throw Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var d=q[q.length-1];if(\"top\"===b.insertAt)d?d.nextSibling?e.insertBefore(c,d.nextSibling):e.appendChild(c):e.insertBefore(c,e.firstChild),q.push(c);else if(\"bottom\"===b.insertAt)e.appendChild(c);else if(\"object\"===typeof b.insertAt&&b.insertAt.before)b=y(b.insertInto+\" \"+b.insertAt.before),e.insertBefore(c,b);else throw Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n}function c(b){if(null===b.parentNode)return!1;b.parentNode.removeChild(b);b=q.indexOf(b);0<=b&&q.splice(b,1)}function b(b){var c=document.createElement(\"style\");b.attrs.type=\"text/css\";f(c,b.attrs);d(b,c);return c}function e(b){var c=document.createElement(\"link\");b.attrs.type=\"text/css\";b.attrs.rel=\"stylesheet\";f(c,b.attrs);d(b,c);return c}function f(b,c){Object.keys(c).forEach(function(e){b.setAttribute(e,c[e])})}function k(d,f){var k;if(f.transform&&d.css)if(k=f.transform(d.css))d.css=k;else return function(){};\nif(f.singleton){k=H++;var t=U||(U=b(f));var g=m.bind(null,t,k,!1);var C=m.bind(null,t,k,!0)}else d.sourceMap&&\"function\"===typeof URL&&\"function\"===typeof URL.createObjectURL&&\"function\"===typeof URL.revokeObjectURL&&\"function\"===typeof Blob&&\"function\"===typeof btoa?(t=e(f),g=u.bind(null,t,f),C=function(){c(t);t.href&&URL.revokeObjectURL(t.href)}):(t=b(f),g=A.bind(null,t),C=function(){c(t)});g(d);return function(b){b?b.css===d.css&&b.media===d.media&&b.sourceMap===d.sourceMap||g(d=b):C()}}function m(b,\nc,e,d){e=e?\"\":d.css;b.styleSheet?b.styleSheet.cssText=P(c,e):(e=document.createTextNode(e),d=b.childNodes,d[c]&&b.removeChild(d[c]),d.length?b.insertBefore(e,d[c]):b.appendChild(e))}function A(b,c){var e=c.css;(c=c.media)&&b.setAttribute(\"media\",c);if(b.styleSheet)b.styleSheet.cssText=e;else{for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(document.createTextNode(e))}}function u(b,c,e){var d=e.css;e=e.sourceMap;var f=void 0===c.convertToAbsoluteUrls&&e;if(c.convertToAbsoluteUrls||f)d=\nD(d);e&&(d+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+\" */\");c=new Blob([d],{type:\"text/css\"});d=b.href;b.href=URL.createObjectURL(c);d&&URL.revokeObjectURL(d)}var t={},C=function(b){var c;return function(){\"undefined\"===typeof c&&(c=b.apply(this,arguments));return c}}(function(){return window&&document&&document.all&&!window.atob}),y=function(b){var c={};return function(e){if(\"undefined\"===typeof c[e]){var d=b.call(this,e);if(d instanceof\nwindow.HTMLIFrameElement)try{d=d.contentDocument.head}catch(W){d=null}c[e]=d}return c[e]}}(function(b){return document.querySelector(b)}),U=null,H=0,q=[],D=n(38);p.exports=function(b,c){if(\"undefined\"!==typeof DEBUG&&DEBUG&&\"object\"!==typeof document)throw Error(\"The style-loader cannot be used in a non-browser environment\");c=c||{};c.attrs=\"object\"===typeof c.attrs?c.attrs:{};c.singleton||\"boolean\"===typeof c.singleton||(c.singleton=C());c.insertInto||(c.insertInto=\"head\");c.insertAt||(c.insertAt=\n\"bottom\");var e=g(b,c);h(e,c);return function(b){for(var d,f=[],m=0;m<e.length;m++)d=t[e[m].id],d.refs--,f.push(d);b&&(d=g(b,c),h(d,c));for(m=0;m<f.length;m++)if(d=f[m],0===d.refs){for(b=0;b<d.parts.length;b++)d.parts[b]();delete t[d.id]}}};var P=function(){var b=[];return function(c,e){b[c]=e;return b.filter(Boolean).join(\"\\n\")}}()},function(p,v,n){p.exports=function(h){var g=\"undefined\"!==typeof window&&window.location;if(!g)throw Error(\"fixUrls requires window.location\");if(!h||\"string\"!==typeof h)return h;\nvar d=g.protocol+\"//\"+g.host,c=d+g.pathname.replace(/\\/[^\\/]*$/,\"/\");return h.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(b,e){e=e.trim().replace(/^\"(.*)\"$/,function(b,c){return c}).replace(/^'(.*)'$/,function(b,c){return c});if(/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(e))return b;b=0===e.indexOf(\"//\")?e:0===e.indexOf(\"/\")?d+e:c+e.replace(/^\\.\\//,\"\");return\"url(\"+JSON.stringify(b)+\")\"})}},function(p,v,n){var h=n(2),g=n(40),d=n(41),c=n(43),b=n(45),e=n(9),f=n(10),\nk=n(3),m=n(0),A=n(16),u=n(53),t=n(67),C=n(68),y=n(69),U=n(71),H=n(73),q=n(83),D=n(84),P=n(85),ca=n(87),fa=n(89),ba=n(90),Q=n(91),W=n(92),z=n(107),M=n(110),I=n(112),N=n(115),T=n(116),ma=n(117),ga=n(119),w=n(123),oa=n(124),xa=n(22);p=function(){function n(b){this.prefix=\"bilibili-player\";this.videoContinueCompareTime=+new Date;this.userLoadedCallbacks=[];this.firstErrorEvent=this.initializing=this.initialized=!1;this.retrySecond=2E3;this.trackInfoList=[];this.lastPauseTime=this.retryTimer=0;this.fnval=\n16;this.createdTime=Date.now();this.pid=1E3*(new Date).getTime()+Math.floor(900*Math.random())+100;this.config=b;this.container=$(this.config.element);try{this.window=window.parent&&window.parent.document?window.parent:window,this.$window=window.parent&&window.parent!==window?$(window.parent).add($(window)):$(window),this.iframe=window.frameElement,this.$iframe=$(this.iframe)}catch(cb){this.window=window,this.$window=$(window)}this.$body=$(this.window.document.body);this.documentElement=this.window.document.documentElement;\nthis.$parent=this.$body.find(\"#bofqi\");this.$parent.length||(this.$parent=this.$body);this.extraParams=Object(oa.a)(this);this._beforeInit();this._init();\"function\"===typeof this.config.beforeplay&&this.config.beforeplay()}n.prototype.play=function(b){return this._play(b)};n.prototype.pause=function(b){return this._pause(b)};n.prototype.seek=function(b,c,e){return this._seek(b,c,e)};n.prototype.volume=function(b){return this._volume(b)};n.prototype.mode=function(b){return this._mode(b)};n.prototype.destroy=\nfunction(b){return this._destroy(b)};n.prototype.option=function(b,c){return this._option(b,c)};n.prototype.addEventListener=function(b,c){return this.bind(b,c)};n.prototype.removeEventListener=function(b){return this.unbind(b)};n.prototype.getBufferRate=function(){return this._getBufferRate()};n.prototype.getDuration=function(){return this.duration()};n.prototype.isFullScreen=function(){return this._isFullScreen()};n.prototype.exitFullScreen=function(){return this._exitFullScreen()};n.prototype.getWidth=\nfunction(){return this._getWidth()};n.prototype.getHeight=function(){return this._getHeight()};n.prototype.isMute=function(){return this._isMute()};n.prototype.setMute=function(){return this._setMute()};n.prototype.getPlaylist=function(){return this._getPlaylist()};n.prototype.getPlaylistIndex=function(){return this._getPlaylistIndex()};n.prototype.getCurrentTime=function(){return this.currentTime()};n.prototype.getState=function(){return this._getState()};n.prototype.getVersion=function(){return this._getVersion()};\nn.prototype.stop=function(){return this._stop()};n.prototype.prev=function(){this._pause();return this._prev()};n.prototype.next=function(b,c,e){this._pause();return this._next(b,c,e)};n.prototype.reloadAccess=function(b){return this._reloadAccess(b)};n.prototype.getPlayurl=function(){return this._getPlayurl()};n.prototype.logger=function(b){return this._logger(b)};n.prototype.screenshot=function(b){return new d.a({fps:24,time:2E3,isPNG:b,background:\"#000\",rate:.7,fixedSize:!0,imgWidth:400,imgHeight:300,\nquality:80},this)};n.prototype.duration=function(){if(this.video)return this.video.duration+this.videoContinueTime+this.videoDisableTime||0};n.prototype.currentTime=function(){if(this.video)return this.videoContinueCurrentTime>=this.video.duration?Math.min(this.video.duration+this.videoContinueTime,this.videoContinueCurrentTime+(this.state.video_state===m.a.V_PLAY?(+new Date-this.videoContinueCompareTime)/1E3:0)):this.video.currentTime||0};n.prototype.getSession=function(b,c){if(h.a.getSessionSettings(this.config.storageName))var e=\nJSON.parse(h.a.getSessionSettings(this.config.storageName));else return!1;return\"string\"===typeof b&&\"object\"!==typeof e[b]?!1:\"undefined\"===typeof b&&\"undefined\"===typeof c?e:\"string\"===typeof b&&\"undefined\"===typeof c?e[b]:\"string\"===typeof b&&\"string\"===typeof c?e[b][c]:!1};n.prototype.setSession=function(b,c,e){var d={};h.a.getSessionSettings(this.config.storageName)?d=JSON.parse(h.a.getSessionSettings(this.config.storageName)):h.a.setSessionSettings(this.config.storageName,\"{}\");switch(arguments.length){case 3:try{d[b]&&\n\"object\"===typeof d||(d[b]={}),d[b][c]=e,h.a.setSessionSettings(this.config.storageName,JSON.stringify(d))}catch(db){(undefined)}break;case 2:try{if(\"string\"===typeof arguments[0]){var f=JSON.parse(h.a.getSessionSettings(this.config.storageName));if(f){var m=arguments[1];if(\"object\"===typeof arguments[1])m=arguments[1];else if(\"string\"===typeof arguments[1])try{m=JSON.parse(arguments[1])}catch(db){return (undefined),!1}else return!1;f[arguments[0]]=m;h.a.setSessionSettings(this.config.storageName,\nJSON.stringify(f))}}else return!1}catch(db){(undefined)}break;default:return!1}};n.prototype.load=function(b,c){var e=this;if(\"dash\"===b.mediaDataSource.type){var d=document.createElement(\"video\"),f=30280;try{f=Number(b.mediaDataSource.url.audio[0].id)}catch(R){}var t=window.dashPlayer=this.dashPlayer=new window.DashPlayer(d,{defaultVideoQuality:this.videoRealQuality,defaultAudioQuality:f,enableHEVC:!0,isAutoPlay:!1,isDynamic:!1,abrStrategy:window.DashPlayer.STRING.ABR_DYNAMIC,stableBufferTime:this.getDynamicBuffer()[0]});\n$(d).appendTo(this.template.videoWrp.empty());this._videoEventListener(d);t.initialize(b.mediaDataSource.url).then(function(){e.trigger(m.a.EVENT.VIDEO_METADATA_LOAD);0===e.videoQuality&&t.setAutoSwitchQualityFor(\"video\",!0);t.setAutoSwitchTopQualityFor(\"video\",32)}).catch(function(){});t.on(window.DashPlayer.EVENTS.VIDEO_INFO,function(b){0!==Object.keys(b.mediaInfo).length&&(b=N.a.updateVideoInfoData(\"DashPlayer\",b.mediaInfo,b.statisticsInfo),e.videoInfo&&!e.playerQualityChanging&&e.videoInfo.refresh(b))});\n$(d).appendTo(this.template.videoWrp.empty());this.videoInfo.update(N.a.generateVideoInfoItems(\"DashPlayer\"));this.state.video_type=3}else e.trigger(m.a.EVENT.VIDEO_METADATA_LOAD),d=this.nativePlayer=document.createElement(\"video\"),d.src=b.mediaDataSource.url,$(d).appendTo(this.template.videoWrp.empty()),this.videoInfo.update(N.a.generateVideoInfoItems(\"NativePlayer\")),this._videoEventListener(d);this.loadingpanel.ready(3);this._volume(this.config.ad?.67:this.videoSettings.video_status.volume);if(!c){this.controller.setState(m.a.V_READY);\nif(b=this._getHiddenProp()){b=b.replace(/[H|h]idden/,\"\")+\"visibilitychange\";var g=+new Date;document.addEventListener(b,function(b){!e._isDocumentHidden()&&e.track&&(e.track.fixTime=+new Date-g)})}e.bind(m.a.EVENT.VIDEO_METADATA_LOADED,function(){if(!e.initialized){e.block=new D.a(e);e.partmanager=new M.a(e);var b=$.extend({container:e.template.danmaku[0],visible:e.state.danmaku},e.videoSettings.setting_config);\"custom\"===b.fontfamily&&(b.fontfamily=b.fontfamilycustom);var c=k.a.DM_LIST;e.danmaku=\nObject(W.a)({host:c,url:c+\"?oid=\"+e.config.cid,video:e.video,list_config:{list_wrap:e.template.danmakuWrap},danmaku_config:b,timestamp:e.utils.dateParser(e.config.d,8)},e);e.realTimeDanmaku=new ma.a(e)}})}this.controller.clearTimeMark()};n.prototype.getDynamicBuffer=function(){var b=[[20,5,40,20,60,20],[20,5,21,20,22,10],[60,5,60,20,60,20],[60,5,60,20,60,20],[40,5,50,20,60,20]],c=b[0];120===this.videoRealQuality?c=b[1]:\"eg\"===this.getPlayerIdle()?c=b[2]:\"eg1\"===this.getPlayerUserWhite()?c=b[3]:\"eg2\"===\nthis.getPlayerUserWhite()&&(c=b[4]);return c};n.prototype.getPlayerIdle=function(){return this.getPlayurl()&&0<Number(h.a.getSearchParam(\"agrr\",this.getPlayurl()))?this.session&&8>parseInt(this.session[0],16)?\"eg\":\"cg\":\"\"};n.prototype.getPlayerUserWhite=function(){if(this.getPlayurl()&&0<Number(h.a.getSearchParam(\"uagrr\",this.getPlayurl()))){var b=Number(h.a.getSearchParam(\"uagrr\",this.getPlayurl()));return 1===b?\"eg1\":2===b?\"eg2\":3===b?\"cg\":\"\"}return\"\"};n.prototype.infiniteRetry=function(b){var c=\nthis;c.retryTimer&&clearTimeout(c.retryTimer);c.retryTimer=window.setTimeout(function(){c._reloadMediaSource(b);c.toast.addErrorInfo({msg:\"\\u6b63\\u5728\\u91cd\\u65b0\\u8fde\\u63a5\\u81f3\\u670d\\u52a1\\u5668...\"})},c.retrySecond);c.retrySecond+=3E3};n.prototype.showErrorMsg=function(b){if(!this.template||!this.template.playerWrap)return!1;this.toast.addErrorInfo({msg:b})};n.prototype.hideErrorMsg=function(){if(!this.template||!this.template.playerWrap)return!1;this.template.playerWrap.find(\".bpl-error\").hide()};\nn.prototype.get=function(b,c){return\"string\"===typeof b&&\"object\"!==typeof this.videoSettings[b]?!1:\"undefined\"===typeof b&&\"undefined\"===typeof c?this.videoSettings:\"string\"===typeof b&&\"undefined\"===typeof c?this.videoSettings[b]:\"string\"===typeof b&&\"string\"===typeof c?this.videoSettings[b][c]:!1};n.prototype.set=function(b,c,e){switch(arguments.length){case 3:if(this.videoSettings[b][c]===e&&\"object\"!==typeof e||\"video_status\"===b&&\"volume\"===c&&this.config.ad)return!1;this.videoSettings[b][c]=\ne;\"setting_config\"===b&&this.danmaku&&this.danmaku.option&&(\"fontfamilycustom\"===c?this.danmaku.option(\"fontfamily\",e):\"fontfamily\"===c&&\"custom\"===e?this.danmaku.option(\"fontfamily\",this.videoSettings[b].fontfamilycustom):this.danmaku.option(c,e));\"setting_config\"===b&&\"type\"===c&&this.subtitle&&this.subtitle.setType(e);\"block\"===b&&this.danmaku&&(this.danmaku.list&&this.danmaku.list.update(),this.danmaku&&this.danmaku.fresh(),\"function_special\"===c&&this.advDanmaku&&this.advDanmaku.visible(e));\nh.a.setLocalSettings(this.config.storageName,JSON.stringify(this.videoSettings));break;case 2:try{if(\"string\"===typeof arguments[0]){var d=JSON.parse(h.a.getLocalSettings(this.config.storageName));if(d){var f=arguments[1];if(\"object\"===typeof arguments[1])f=arguments[1];else if(\"string\"===typeof arguments[1])try{f=JSON.parse(arguments[1])}catch(gb){return (undefined),!1}else return!1;d[arguments[0]]=f;h.a.setLocalSettings(this.config.storageName,JSON.stringify(d))}}else return!1}catch(gb){(undefined)}break;\ndefault:return!1}(undefined)};n.prototype.userLoadedCallback=function(b){this.user?this.user.addCallback(b):\"function\"===typeof b&&this.userLoadedCallbacks.push(b)};n.prototype.trackInfoPush=function(b,c){this.trackInfoList.push({name:b,params:c});this.track&&this.track.loadTrackUp()};n.prototype.callNextPart=function(b,c,e){var d=this;this.partmanager.load(b,function(b,c,e,f,m){d.controller.getContainerFocus()&&(d.keepFocus=!0);d.config.autoShift=!0;d.cidLoader({aid:b,bvid:c,\ncid:e,p:f,episodeId:m})},c,e)};n.prototype.cidLoader=function(b){this._pause();this._destroy();$.extend(this.config,b,{autoplay:!0});this.config.show_bv||delete this.config.bvid;this._init(this.state);this.window.aid=this.config.aid;this.window.bvid=this.config.bvid;this.window.cid=this.config.cid;1<=Number(this.config.seasonType)?(\"function\"===typeof this.window.bangumiCallNext&&this.window.bangumiCallNext(this.config.episodeId),this.window.season_id=this.config.seasonId,this.window.episode_id=this.config.episodeId):\n(delete this.window.season_id,delete this.window.episode_id);if(\"function\"===typeof this.window.callAppointPart)try{this.window.callAppointPart(this.config.p,{aid:this.config.aid,bvid:this.config.bvid,cid:this.config.cid})}catch(cb){}};n.prototype.quality=function(b,c){var e=this,d=this;this.playerQualityChanging=!0;this.initialized||(this.loadingpanel.reset(2),this.loadingpanel.reset(3),this.loadingpanel.ready(2));this.userLoadedCallback(function(f){f={domain:1<=e.config.seasonType?z.a.domains.bangumi:\nz.a.domains.interface,enableSSLResolve:e.config.enableSSLResolve,enableSSLStream:e.config.enableSSLStream,cid:e.config.cid,quality:b,type:e.allowFlv?\"\":\"mp4\",extra_params:e.config.extraParams,player:d};f.extra_params=f.extra_params?f.extra_params+(\"&qn=\"+f.quality):\"qn=\"+f.quality;d.config.seasonType&&!h.a.getSearchParam(\"season_type\",\"?\"+f.extra_params)&&(f.extra_params+=\"&season_type=\"+d.config.seasonType);e.window.typeid&&(f.extra_params+=\"&tid=\"+e.window.typeid);d.trigger(m.a.EVENT.VIDEO_PLAYURL_LOAD);\nz.a.r(f,function(e){d.eventLog.log(\"\\r\\n\"+JSON.stringify(e)+\"\\r\\n\",3);d.hideErrorMsg();d.controller.clearTimeMark();if(void 0!==e&&null!==e.mediaDataSource){var f=e.quality;if(0!==b&&f&&b!==f)return d.playerQualityChanging=!1,c(!1),!1;e.acceptQuality=d.transformQuality(e.acceptQuality);d.initialized||d.loadingpanel.complete(2,!0);d.trigger(m.a.EVENT.VIDEO_PLAYURL_LOADED);d.currentStreamType=e.streamType;var k=(1===Number(e.status)||3===Number(e.status))&&!e.hasPaid&&(3!==Number(e.status)||3===Number(e.status)&&\n(0<Number(e.vipType)&&1!==Number(e.vipStatus)||0===Number(e.vipType)));d._setVideoQuality(e.quality);d.controller.updateQuality(e.acceptQuality,b,e.bp,e.hasPaid);f=\"range\";d.videoQuality=parseInt(b,10);d.mediaDataSource=e.mediaDataSource;if(\"flv\"===e.mediaDataSource.type)for(var t=e.mediaDataSource.segments,g=0;g<t.length;g++)if(t[g].url.match(/\\/ws\\.acgvideo\\.com\\//)){f=\"param\";break}e.timelength&&e.mediaDataSource.duration&&k&&(d.videoDisableTime=Math.max(0,(e.timelength-e.mediaDataSource.duration)/\n1E3),d.addVideoHint(e));var u=document.createElement(\"video\"),k=d.controller.getLastState(),C=!1,f={enableWorker:!1,accurateSeek:!0,seekType:f||\"param\",rangeLoadZeroStart:!0,lazyLoadMaxDuration:180,deferLoadAfterSourceOpen:!1,fixAudioTimestampGap:!1,reuseRedirectedURL:!0};if(d.utils.browser.version.safari||d.utils.browser.version.edge||d.utils.browser.version.trident)f.enableWorker=!1,f.lazyLoadMaxDuration=120;d.trigger(m.a.EVENT.VIDEO_METADATA_LOAD);var A=this.nativePlayer=document.createElement(\"video\");\nA.src=e.mediaDataSource.url;u.volume=\"undefined\"!==typeof d.video.volume?d.video.volume:d.videoSettings.video_status.volume||.67;d.initialized||d.loadingpanel.ready(3);try{var q,y;$(u).appendTo(d.template.videoWrp).addClass(\"seamless\");if(k===m.a.V_PAUSE){var h=setTimeout(function(){if(C)return!1;d._setVideoWrap(u,A);C=!0;c(!0)},5E3);u.addEventListener(\"canplay\",function(){if(C)return!1;clearTimeout(h);d._setVideoWrap(u,A);C=!0;c(!0)})}else{var n=setTimeout(function(){if(C)return!1;clearTimeout(y);\nA.currentTime=d.nativePlayer?d.nativePlayer.currentTime:d.videoTime||0;u.play();d._setVideoWrap(u,A);C=!0;c(!0)},5E3);u.addEventListener(\"loadedmetadata\",function(){if(C)return!1;q=C=!0;A.currentTime=(d.nativePlayer?d.nativePlayer.currentTime:d.videoTime||0)+3});u.addEventListener(\"seeked\",function(){q&&(q=!1,clearTimeout(n),y=setTimeout(function(){d.controller.getLastState()!==m.a.V_PAUSE?u.play():A.currentTime=d.nativePlayer?d.nativePlayer.currentTime:d.videoTime||0;d._setVideoWrap(u,A);c(!0)},\n1E3*u.currentTime-1E3*d.nativePlayer.currentTime))})}}catch(Fa){(undefined),c(!1)}}else d.initialized||d.loadingpanel.complete(2,!1),d.playerQualityChanging=!1,d.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,1<=d.config.seasonType?m.a.PLAYURL_BANGUMI_RESOLVE_ERROR:m.a.PLAYURL_RESOLVE_ERROR),d.trackInfoPush(\"video_error\",\"code:\"+m.a.VIDEO_URL_ERROR),c(!1)},function(e,f,k){var t=z.a.errorTypes;d.playerQualityChanging=!1;if(/JSON/.test(f))d.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,\n1<=d.config.seasonType?m.a.PLAYURL_BANGUMI_FORM_ERROR:m.a.PLAYURL_FORM_ERROR,(f?\"status:\"+f+\",\":\"\")+\"url:\"+k);else if(e===t.resolve)d.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,1<=d.config.seasonType?m.a.PLAYURL_BANGUMI_RESOLVE_ERROR:m.a.PLAYURL_RESOLVE_ERROR,(f?\"status:\"+f+\",\":\"\")+\"url:\"+k);else if(d.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,1<=d.config.seasonType?m.a.PLAYURL_BANGUMI_NETWORK_ERROR:m.a.PLAYURL_NETWORK_ERROR,\"error_type:\"+(1===d._option(\"enable_ssl_resolve\")?\n\"https\":\"http\")+(f?\",status:\"+f+\",\":\",\")+\"url:\"+k),!0===d._option(\"enable_ssl_resolve\")&&\"http:\"===d.window.location.protocol)return d._option(\"enable_ssl_resolve\",!1),d.quality(b,c),!1;d.trackInfoPush(\"video_error\",\"code:\"+m.a.VIDEO_URL_ERROR);c(!1)})})};n.prototype.resize=function(){this.controller&&this.controller.resize()};n.prototype.addVideoHint=function(b){this.controller&&this.controller.addVideoHint(b)};n.prototype.addVideoMessage=function(b){this.controller&&this.controller.addVideoMessage(b)};\nn.prototype.bind=function(b,c){this.container.bind(b+this.config.namespace,c)};n.prototype.unbind=function(b){this.container.unbind(b+this.config.namespace)};n.prototype.trigger=function(b){for(var c=1;c<arguments.length;c++);this.container.trigger.apply(this.container,[b+this.config.namespace,Array.prototype.slice.call(arguments,1,arguments.length)])};n.prototype.transformQuality=function(b){return Array.isArray(b)?b:[]};n.prototype.getDocumentScrollElementRect=function(){return{scrollTop:Math.max($(this.documentElement).scrollTop(),\nthis.$body.scrollTop()),scrollLeft:Math.max($(this.documentElement).scrollLeft(),this.$body.scrollLeft())}};n.prototype.setDocumentScrollElementRect=function(b,c){\"number\"===typeof b&&($(this.documentElement).scrollTop(b),this.$body.scrollTop(b));\"number\"===typeof c&&($(this.documentElement).scrollLeft(c),this.$body.scrollLeft(c))};n.prototype.initSubtitle=function(b){var c=this;this.subtitle=new ga.a({container:this.template.subtitle,type:this.videoSettings.setting_config.type,time:function(){return c.video?\nc.video.currentTime:0},url:b},this)};n.prototype.switchSubtitle=function(b){};n.prototype.updateSubtitle=function(b){this.subtitle||this.initSubtitle();this.subtitle.update(b)};n.prototype._getPlayurl=function(){try{return this.nativePlayer?this.mediaDataSource.url:this.dashPlayer?this.dashPlayer.getCurrentPlayURLFor(\"video\")+\",\"+this.dashPlayer.getCurrentPlayURLFor(\"audio\"):this.mediaDataSource&&this.mediaDataSource.segments&&this.mediaDataSource.segments[0].url}catch(Ra){return\"\"}};n.prototype._prev=\nfunction(){var b=this;this.partmanager.load({p:this.config.p-1},function(c,e,d,f){b._pause();b._destroy();c&&(b.config.aid=c);e&&(b.config.bvid=e);b.config.cid=d;b.config.autoplay=!0;b.config.p=f;b.config.autoShift=!0;b._init(b.state);b.track&&b.track.view();c&&(b.window.aid=c);e&&(b.window.bvid=e);if(\"function\"===typeof b.window.callSpecPart)try{b.window.callSpecPart(f,b),b.window.cid=d}catch(gb){}},null,!0)};n.prototype._next=function(b,c,e){this.callNextPart({p:b||this.config.p+1,doneCallback:c,\nfailCallback:e},null,!0)};n.prototype._mode=function(b){this.controller&&this.controller.setMode(b)};n.prototype._option=function(b,c){var e;if(b){if(\"undefined\"===typeof c)return Object(xa.a)(b,this.config);Object(xa.a)((e={},e[b]=c,e),this.config)}else return!1};n.prototype._getBufferRate=function(){if(this.controller)return this.controller.getBufferRate()};n.prototype._getPlaylist=function(){if(this.partmanager)return this.partmanager.getParts()};n.prototype._setMute=function(){this._isMute()?\n(this.video.muted=!1,this._volume(this.controller.getLastVolume())):(this._volume(0),this.video.muted=!0)};n.prototype._getState=function(){return\"IDEL READY BUFFERING PLAYING PAUSED COMPLETE\".split(\" \")[this.state.video_state]};n.prototype._isFullScreen=function(){return this.state.mode===m.a.UI_FULL};n.prototype._getWidth=function(){if(this.template)return this.template.container.outerWidth()};n.prototype._getHeight=function(){if(this.template)return this.template.container.outerHeight()};n.prototype._isMute=\nfunction(){return 0===this._volume()};n.prototype._getPlaylistIndex=function(){return Number(this.config.p)-1};n.prototype._getVersion=function(){return f.a};n.prototype._stop=function(){this.nativePlayer&&(this.nativePlayer.currentTime=this.duration()||0);this.controller.setState(m.a.V_PAUSE);this.controller.setState(m.a.V_COMPLETE)};n.prototype._exitFullScreen=function(){this._isFullScreen()&&this.state.mode!==m.a.UI_NORMAL&&this._mode(m.a.UI_NORMAL)};n.prototype._reloadAccess=function(b){this.user&&\nthis.user.reload(b)};n.prototype._logger=function(b){if(this.eventLog){if(\"undefined\"===typeof b)return window.eventLogText||\"\";b?this.eventLog.show():this.eventLog.hide()}};n.prototype._play=function(b){if(this.playerQualityChanging)return!1;this.video&&(this.currentTime()===this.video.duration+this.videoContinueTime&&this.controller.getLastState()!==m.a.V_COMPLETE?this._seek(0):this.currentTime()>=this.video.duration&&(clearTimeout(this.videoContinueTimeChecker),this.videoContinueCurrentTime=this.currentTime(),\nthis.videoContinueCompareTime=+new Date,this._end_timer(this.videoContinueCurrentTime)),this.controller.setState(m.a.V_PLAY,b,this.currentTime()>=this.video.duration));this.trigger(m.a.EVENT.VIDEO_MEDIA_PLAY)};n.prototype._pause=function(b){this.video&&(300<Math.abs(this.lastPauseTime-this.currentTime())&&this.currentTime()<this.video.duration&&(this.video.currentTime=this.video.currentTime,this.lastPauseTime=this.currentTime()),clearTimeout(this.videoContinueTimeChecker),this.videoContinueCurrentTime=\nthis.currentTime(),this.controller.setState(m.a.V_PAUSE,b,this.currentTime()>=this.video.duration));this.trigger(m.a.EVENT.VIDEO_MEDIA_PAUSE)};n.prototype._destroy=function(b){this.trigger(m.a.EVENT.VIDEO_BEFORE_DESTROY);clearTimeout(this.timerChecker);clearTimeout(this.videoContinueTimeChecker);this.video&&(this.video.pause(),this.nativePlayer&&(this.nativePlayer.destroy(),this.nativePlayer=null),this.dashPlayer&&(this.dashPlayer.destroy(),this.dashPlayer=null,window.dashPlayer=void 0),b=$(this.video),\nthis.video=null,b.remove());this.trigger(m.a.EVENT.VIDEO_DESTROY)};n.prototype._seek=function(b,c,e){if(this.playerQualityChanging||this.config.ad)return!1;this.trigger(m.a.EVENT.VIDEO_MEDIA_SEEK);this.videoSeeking=!0;e||(this.seekLoad=!0);if(this.video){var d=this;this.duration()===this.video.duration&&b>=this.video.duration-.5?b=this.video.duration-.5:this.duration()!==this.video.duration&&b>=this.video.duration-.5&&b<=this.video.duration+.1?b=this.video.duration-.5:this.duration()!==this.video.duration&&\nb>=this.duration()&&(b=this.duration()-.1);0>b&&(b=0);b>this.video.duration&&b<=this.duration()?(this.lastPauseTime=b,this.videoContinueTime?(this.videoContinueCurrentTime=b,this.videoContinueCompareTime=+new Date,this._end_timer(b),setTimeout(function(){d.video.pause()}),b!==this.duration()&&this._play(),this.trigger(m.a.EVENT.VIDEO_MEDIA_SEEKED,{time:this.currentTime()})):this.videoDisableTime&&(clearTimeout(this.videoContinueTimeChecker),this.videoContinueCurrentTime=0,b=this.video.duration-.5,\nc?this.video.currentTime=b||0:this.nativePlayer.currentTime=b||0,this.controller.setState(m.a.V_PLAY))):(clearTimeout(this.videoContinueTimeChecker),this.videoContinueCurrentTime=0,b===this.video.duration&&this.controller.setState(m.a.V_PAUSE),c?this.video.currentTime=b||0:this.nativePlayer&&(this.nativePlayer.currentTime=b||0),this.dashPlayer&&this.dashPlayer.seek(b||0),b!==this.video.duration&&this.controller.setState(m.a.V_PLAY))}};n.prototype._volume=function(b){if(\"undefined\"!==typeof b)b!==\nthis._volume()&&this.trigger(m.a.EVENT.VIDEO_MEDIA_VOLUME),0===b&&this.trigger(m.a.EVENT.VIDEO_MEDIA_MUTE),this.controller.volume(b||0);else return this.video?this.video.volume:!1};n.prototype._beforeInit=function(){this.videoSettings=$.extend(!0,{},A.a,JSON.parse(h.a.getLocalSettings(this.config.storageName)));try{this.getSession()?(this._initSession(),this.videoSettings.block=this.getSession(\"block\")):(this._initReset(\"block\",{setting_config:{preventshade:!1},video_status:{},block:{type_scroll:!0,\ntype_top:!0,type_bottom:!0,type_reverse:!0,function_normal:!0,function_subtitle:!0,function_special:!0},message:{}}),this._initSession())}catch(Ra){(undefined)}Object(g.a)()};n.prototype._initSession=function(){try{\"undefined\"!==typeof sessionStorage&&this.setSession(\"block\",this.get(\"block\"))}catch(Ra){(undefined)}};n.prototype._videoUpdateKeep=function(){this.video.defaultPlaybackRate=parseFloat(this.getSession(\"video_status\",\"videospeed\"))||1;this.video.playbackRate=parseFloat(this.getSession(\"video_status\",\n\"videospeed\"))||1;this.setting&&this.setting.videomirror(this.getSession(\"video_status\",\"videomirror\")||!1)};n.prototype._initReset=function(b,c){var e=this.get(b);this.videoSettings[b]=$.extend(!0,{},e,c[b]);this.set(b,this.videoSettings[b])};n.prototype._getAdMode=function(){return\"undefined\"!==typeof this.config.admode&&null!==this.config.admode?!0:!1};n.prototype._init=function(b){var e=this,d=this;this.videoContinueCurrentTime=this.videoDisableTime=this.videoContinueTime=0;this.videoContinueCompareTime=\n+new Date;this.userLoadedCallbacks=[];this.initializing=this.initialized=!1;this.timerChecker=null;this.firstErrorEvent=!1;this.errorRetry=5;this.retrySecond=2E3;this.retryTimer=0;var f=this.config,k=u.a.ui;this.utils=h.a;this.ui={button:k.button,buttonset:k.buttonset,checkbox:k.checkbox,mouse:k.mouse,selectable:k.selectable,selectmenu:k.selectmenu,tabmenu:k.tabmenu,multiselect:k.multiselect,togglebutton:k.togglebutton,slider:k.slider,spinner:k.spinner,menu:k.menu,tristatecheckbox:k.tristatecheckbox};\nthis.state=$.extend({video_state:m.a.V_IDEL,repeat:m.a.V_REPEAT_OFF,danmaku:this.config.danmaku?m.a.DM_ON:m.a.DM_OFF,mode:d._getAdMode()?this.config.admode:this.videoSettings.video_status.iswidescreen&&this.videoSettings.video_status.widescreensave||f.asWide?m.a.UI_WIDE:m.a.UI_NORMAL,play_type:0<this.videoSettings.video_status.autopart?1:0},b);this.container=this.container.addClass(this.prefix).unbind().empty();this.eventLog=new c.a(this);this.user=new P.a(this);this.initialized||this.loadTemplate();\nthis.user.load();this.config.record&&(this.record=new w.a({container:this.template.record,duration:2,time:function(){return e.video?e.currentTime():0}}));b=this.supportMSE();d.utils.browser.version.safari&&!d.utils.browser.version.safariSupportMSE&&(b=!1);d.allowFlv=b;d.getVideoData(m.a.QUALITY.CODE[\"1\"===d.config.high_quality?3:1],b?\"\":\"mp4\");this.userLoadedCallback(function(b){if(d.initialized)return b={domain:1<=d.config.seasonType?z.a.domains.bangumi:z.a.domains.interface,enableSSLResolve:d.config.enableSSLResolve,\nenableSSLStream:d.config.enableSSLStream,cid:d.config.cid,quality:d.allowFlv?m.a.QUALITY.CODE[4]:m.a.QUALITY.CODE[2],type:d.allowFlv?\"\":\"mp4\",extra_params:d.config.extraParams},b.extra_params=b.extra_params?b.extra_params+(\"&qn=\"+b.quality):\"qn=\"+b.quality,d.config.seasonType&&!h.a.getSearchParam(\"season_type\",\"?\"+b.extra_params)&&(b.extra_params+=\"&season_type=\"+d.config.seasonType),d.window.typeid&&(b.extra_params+=\"&tid=\"+d.window.typeid),d.trigger(m.a.EVENT.VIDEO_PLAYURL_LOAD),z.a.r(b,function(b){d.trigger(m.a.EVENT.VIDEO_PLAYURL_LOADED);\nvoid 0!==b&&null!==b.mediaDataSource&&(b.acceptQuality=d.transformQuality(b.acceptQuality),d.eventLog.log(\"\\r\\n\"+JSON.stringify(b)+\"\\r\\n\",3),d._setVideoQuality(b.quality),d.controller.updateQuality(b.acceptQuality,d.videoQuality,b.bp,b.hasPaid),d.videoData={acceptQuality:b.acceptQuality,videoQuality:d.videoQuality,bp:b.bp,hasPaid:b.hasPaid})}),!1;if(d.initializing)return!1;d.initializing=!0;if(b.ad&&(b.ad.bvid||b.ad.aid)&&b.ad.cid&&!d.config.ad){var c=$('<div class=\"'+d.prefix+\" \"+d.prefix+'-ad\"></div>').prependTo(d.template.container);\nd.config.autoplay=!1;d.admode=d.state&&d.state.mode?d.state.mode:0;d.adPlayer=new window.bilibiliPlayer({element:c,namespace:\".bilibiliplayerad\"+(+new Date).toString().substr(-8),ad:b.ad.url,sourceplayer:d,aid:b.ad.aid,bvid:b.ad.bvid,cid:b.ad.cid,skipable:b.ad.skipable,autoplay:!0,admode:d.admode,afterplay:function(){d.adPlayer.destroy(!0);d.resize();d._play();delete d.adPlayer;d.trigger(m.a.EVENT.VIDEO_MEDIA_ENTER)}})}})};n.prototype.loadTemplate=function(c){var d=this;this.template=new t.a(this);\nthis.toast=new T.a(this);this.config.ad||(this.track=new I.a(this));this.loadingpanel=new C.a(this,this.template.videoPanel);this.loadingpanel.ready(0);this.controller=new H.a(this);this.setting=(new q.a(this)).setting;this.sendJump=new Q.a(this);this.suspension=new ba.a(this);this.recommend=new ca.a(this);this.sharepanel=new U.a(this);this.pausepanel=new fa.a(this);this.videoInfo=new b.a(this);this.loadingpanel.complete(0,!0);this.loadingpanel.ready(1);this.endingpanel=new y.a(this);this.template.container.find('[data-tooltip=\"1\"]').each(function(b,\nc){new e.a({name:\"controll-tooltip\",target:$(c),type:\"tip\",margin:1})});this.bind(m.a.EVENT.VIDEO_MEDIA_ENTER,function(){var b=d.utils.timeParser(d.config.t);!d.adPlayer&&b&&(d._seek(b),d.config.t=null)})};n.prototype.getVideoData=function(b,c,e){var d=this,f=this;f.loadingpanel.ready(2);this.userLoadedCallback(function(k){k={domain:1<=f.config.seasonType?z.a.domains.bangumi:z.a.domains.interface,enableSSLResolve:f.config.enableSSLResolve,enableSSLStream:f.config.enableSSLStream,cid:f.config.cid,\nquality:b,type:d.allowFlv?\"\":\"mp4\",extra_params:f.config.extraParams,player:f};k.extra_params=k.extra_params?k.extra_params+(\"&qn=\"+k.quality):\"qn=\"+k.quality;f.config.seasonType&&!h.a.getSearchParam(\"season_type\",\"?\"+k.extra_params)&&(k.extra_params+=\"&season_type=\"+f.config.seasonType);d.window.typeid&&(k.extra_params+=\"&tid=\"+d.window.typeid);f.trigger(m.a.EVENT.VIDEO_PLAYURL_LOAD);z.a.r(k,function(c){if(void 0!==c&&null!==c.mediaDataSource){c.acceptQuality=f.transformQuality(c.acceptQuality);\nf.eventLog.log(\"\\r\\n\"+JSON.stringify(c)+\"\\r\\n\",3);f.errorPlayurl=!1;f.trigger(m.a.EVENT.VIDEO_PLAYURL_LOADED);f.mediaDataSource=c.mediaDataSource;f.currentStreamType=c.streamType;var d=(1===Number(c.status)||3===Number(c.status))&&!c.hasPaid&&(3!==Number(c.status)||3===Number(c.status)&&(0<Number(c.vipType)&&1!==Number(c.vipStatus)||0===Number(c.vipType))),k=\"range\";if(\"flv\"===c.mediaDataSource.type)for(var t=c.mediaDataSource.segments,u=0;u<t.length;u++)if(t[u].url.match(/\\/ws\\.acgvideo\\.com\\//)){k=\n\"param\";break}c.timelength&&c.mediaDataSource.duration&&d&&(f.videoDisableTime=Math.max(0,(c.timelength-c.mediaDataSource.duration)/1E3));f.load({mediaDataSource:c.mediaDataSource,seekType:k},e);f.videoQuality=b;f._setVideoQuality(c.quality);f.controller.updateQuality(c.acceptQuality,b,c.bp,c.hasPaid);f.videoData={acceptQuality:c.acceptQuality,videoQuality:f.videoQuality,bp:c.bp,hasPaid:c.hasPaid};f.loadingpanel.complete(2,!0)}else f.loadingpanel.complete(2,!1,\"Video url error.\",1<=f.config.seasonType?\nm.a.PLAYURL_BANGUMI_RESOLVE_ERROR:m.a.PLAYURL_RESOLVE_ERROR),f.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,1<=f.config.seasonType?m.a.PLAYURL_BANGUMI_RESOLVE_ERROR:m.a.PLAYURL_RESOLVE_ERROR)},function(d,k,t){var u=z.a.errorTypes;f.errorPlayurl=!0;if(\"Resolve Error: video is encoding.\"===k)f.trigger(m.a.EVENT.VIDEO_PLAYURL_LOADED),f.load({mediaDataSource:{type:\"mp4\",url:\"//static.hdslb.com/encoding.mp4\"}},e);else{if(/JSON/.test(k))f.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,1<=\nf.config.seasonType?m.a.PLAYURL_BANGUMI_FORM_ERROR:m.a.PLAYURL_FORM_ERROR,(k?\"status:\"+k+\",\":\"\")+\"url:\"+t);else if(d===u.resolve)f.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,1<=f.config.seasonType?m.a.PLAYURL_BANGUMI_RESOLVE_ERROR:m.a.PLAYURL_RESOLVE_ERROR,(k?\"status:\"+k+\",\":\"\")+\"url:\"+t);else if(f.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.PLAYURL_ERROR,1<=f.config.seasonType?m.a.PLAYURL_BANGUMI_NETWORK_ERROR:m.a.PLAYURL_NETWORK_ERROR,\"error_type:\"+(1===f._option(\"enable_ssl_resolve\")?\"https\":\n\"http\")+(k?\",status:\"+k+\",\":\",\")+\"url:\"+t),!0===f._option(\"enable_ssl_resolve\")&&\"http:\"===window.location.protocol)return f._option(\"enable_ssl_resolve\",!1),f.loadingpanel.complete(2,!1,'<span style=\"opacity: 0.5;\">https resolve failed, fallback to http</span>'),f.loadingpanel.reset(2),setTimeout(function(){f.getVideoData(b,c,e)},1E3),!1;f.trackInfoPush(\"video_error\",\"code:\"+m.a.VIDEO_URL_ERROR);f.record&&f.record.disable();f.load({mediaDataSource:{type:\"mp4\",url:\"//static.hdslb.com/error.mp4\"}},\ne)}f.controller.updateQuality([80,64,32,16],m.a.QUALITY.CODE[1],!1,!1);f.videoData={acceptQuality:[80,64,32,16],videoQuality:m.a.QUALITY.CODE[1],bp:!1,hasPaid:!1};f.loadingpanel.complete(2,!0);f.trigger(m.a.EVENT.VIDEO_PLAYURL_LOAD)})})};n.prototype._videoErrorHandler=function(b,c){var e=this,d=this._getPlayurl(),f=c;m.a.ERROR_MESSAGES[b]&&(f=m.a.ERROR_MESSAGES[b]+' <span style=\"opacity: 0.5;\">('+c+\")</span>\");this.initialized?b===m.a.MEDIA_MSE_ERROR||b===m.a.MEDIA_CODEC_UNSUPPORTED?(this._pause(),\nthis.nativePlayer.destroy(),this.nativePlayer=null):(b===m.a.NETWORK_STATUS_CODE_INVALID||b===m.a.VIDEO_PLAY_ERROR)&&e._isUrlExpire()||(b===m.a.VIDEO_PLAY_ERROR||b===m.a.NETWORK_EXCEPTION||b===m.a.NETWORK_STATUS_CODE_INVALID)&&0<--e.errorRetry?(this.errorMessage=f,this._reloadMediaSource({failCallback:function(b){(e.currentTime()+3)/e.duration()>e._getBufferRate()&&(e._pause(),e.showErrorMsg(f),e.infiniteRetry(b));e.trackInfoPush(\"video_error\",\"code:\"+m.a.VIDEO_ANALYZE_ERROR)},doneCallback:function(b){b&&\nb.showSuccess&&(e.retryTimer&&clearTimeout(e.retryTimer),2E3!==e.retrySecond&&(e.retrySecond=2E3),e.toast.addErrorInfo({msg:\"\\u91cd\\u65b0\\u8fde\\u63a5\\u81f3\\u670d\\u52a1\\u5668\\u6210\\u529f\",isSuccess:!0}))}})):((e.currentTime()+3)/e.duration()>e._getBufferRate()?(e._pause(),e.showErrorMsg(f),e.infiniteRetry({failCallback:function(b){e._pause();e.showErrorMsg(f);e.infiniteRetry(b);e.trackInfoPush(\"video_error\",\"code:\"+m.a.VIDEO_ANALYZE_ERROR)},doneCallback:function(b){b&&(e.retryTimer&&clearTimeout(e.retryTimer),\n2E3!==e.retrySecond&&(e.retrySecond=2E3),e.toast.addErrorInfo({msg:\"\\u91cd\\u65b0\\u8fde\\u63a5\\u81f3\\u670d\\u52a1\\u5668\\u6210\\u529f\",isSuccess:!0}))}})):this.errorMessage=f,this.trackInfoPush(\"video_error\",\"code:\"+m.a.VIDEO_ERROR+\",url:\"+d)):(this.video.remove(),this.nativePlayer.destroy(),this.nativePlayer=null,e.config.enableSSLStream&&\"https\"===e.currentStreamType&&\"http:\"===window.location.protocol?(this.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.NETWORK_EXCEPTION,b,\"error_type:\"+e.currentStreamType+\n\",url:\"+d+\",message:\"+c.replace(\",\",\".\")),this.loadingpanel.complete(3,!1,'<span style=\"opacity: 0.5;\">connect to https stream failed, fallback to http</span>'),this.loadingpanel.info(f),e.config.enableSSLStream=!1,this.loadingpanel.reset(2),this.loadingpanel.reset(3),window.setTimeout(function(){e.getVideoData(e.videoQuality,\"\",!0)},1500)):this.initialErrorRetry?(this.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.NETWORK_EXCEPTION,b,\"error_type:\"+e.currentStreamType+\",url:\"+d+\",message:\"+c.replace(\",\",\n\".\")),this.loadingpanel.complete(3,!1),this.loadingpanel.info(f),e.trackInfoPush(\"video_error\",\"code:\"+m.a.VIDEO_ERROR+\",url:\"+d)):(this.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.NETWORK_EXCEPTION,b,\"error_type:\"+e.currentStreamType+\",url:\"+d+\",message:\"+c.replace(\",\",\".\")),this.loadingpanel.complete(3,!1),this.loadingpanel.info(f),this.initialErrorRetry=!0,this.loadingpanel.reset(2),this.loadingpanel.reset(3),window.setTimeout(function(){e.getVideoData(m.a.QUALITY.CODE[1],\"mp4\",!0)},1500)));this.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,\nm.a.VIDEO_ERROR,b,\"error_type:\"+e.currentStreamType+\",url:\"+d+\",message:\"+c.replace(\",\",\".\"))};n.prototype._isUrlExpire=function(){try{var b=this.nativePlayer?this.nativePlayer.statisticsInfo.redirectedURL||this.mediaDataSource.segments[this.nativePlayer.statisticsInfo.currentSegmentIndex].url||this.nativePlayer.statisticsInfo.url:this.mediaDataSource.segments[0].url}catch(cb){return!1}b=+(h.a.getSearchParam(\"expires\",b)||h.a.getSearchParam(\"wsTime\",b)||h.a.getSearchParam(\"txTime\",b));return!!b&&\n1E3*b<Date.now()};n.prototype._reloadMediaSource=function(b){var c=this,e=c.videoTime;b=Object(b);c.quality(c.videoQuality,function(d){d?(c.controller.clearTimeMark(),c._seek(e),\"function\"===typeof b.doneCallback&&b.doneCallback(b)):0<--c.errorRetry?setTimeout(function(){c._reloadMediaSource(b)},1E3):(b.showSuccess=!0,\"function\"===typeof b.failCallback&&b.failCallback(b))})};n.prototype._setVideoQuality=function(b){this.videoRealQuality=b};n.prototype._getHiddenProp=function(){var b=[\"webkit\",\"moz\",\n\"ms\",\"o\"];if(\"hidden\"in document)return\"hidden\";for(var c=0;c<b.length;c++)if(b[c]+\"Hidden\"in document)return b[c]+\"Hidden\";return null};n.prototype._isDocumentHidden=function(){var b=this._getHiddenProp();return b?document[b]:!1};n.prototype._showVideoInfoPanel=function(){if(this.videoInfo){if(this.nativePlayer){var b=N.a.updateVideoInfoData(\"NativePlayer\",{mimeType:\"mp4\"},{url:this.getPlayurl(),playerType:\"NativePlayer\"});this.videoInfo.refresh(b)}this.videoInfo.show()}};n.prototype._hideVideoInfoPanel=\nfunction(){this.videoInfo&&this.videoInfo.hide()};n.prototype._isVideoInfoPanelOpened=function(){return this.videoInfo?this.videoInfo.updateStatus:!1};n.prototype._videoEventListener=function(b){var c=this;this.video=b||document.createElement(\"video\");setTimeout(function(){c.config.ad||c._videoUpdateKeep()},0);var e=this.controller,d=!1,f=0,k=function(){c.timerChecker=window.setInterval(function(){f===b.currentTime?(d=!0,c.controller.setState(m.a.V_BUFF),c.bufferStartTime||(c.trackInfoPush(\"start_load\"),\nc.bufferStartTime=+new Date)):(c.template.playerArea.removeClass(\"video-state-buff\"),f=b.currentTime)},150)};b.addEventListener(\"play\",function(){c.state.video_state===m.a.V_PLAY||e.getLastState()===m.a.V_PAUSE&&c.state.video_state===m.a.V_BUFF||setTimeout(function(){c.controller.setState(m.a.V_PLAY)});clearTimeout(c.timerChecker);k();c.trigger(m.a.EVENT.VIDEO_MEDIA_PLAYING);c.track&&c.track.view();c.hideErrorMsg()});b.addEventListener(\"pause\",function(){clearTimeout(c.timerChecker)});b.addEventListener(\"seeked\",\nfunction(){c.videoSeeking&&(c.videoSeeking=!1,c.seekLoad=!1,c.trigger(m.a.EVENT.VIDEO_MEDIA_SEEKED,{time:c.currentTime()}),d&&(d=!1,c.controller.setState(c.controller.getLastState()),c.bufferStartTime&&c.bufferStartTime<+new Date&&(c.trackInfoPush(\"seek_end_load\",String(+new Date-c.bufferStartTime)),c.bufferStartTime=0)))});b.addEventListener(\"stalled\",function(){});b.addEventListener(\"timeupdate\",function(){0!==b.currentTime&&(c.videoTime=b.currentTime);c.trigger(m.a.EVENT.VIDEO_MEDIA_TIME);d&&f!==\nb.currentTime&&(d=!1,c.controller.setState(c.controller.getLastState()),c.bufferStartTime&&c.bufferStartTime<+new Date&&(c.trackInfoPush(c.seekLoad?\"seek_end_load\":\"end_load\",String(+new Date-c.bufferStartTime)),c.bufferStartTime=0));c.loadlagSymbol&&(c.trackInfoPush(\"web_loadlag_end\",\"time:\"+(+new Date-c.loadlagSymbol)+\",\"+c._getPlayurl()),c.loadlagSymbol=!1);null!=this.buffered&&c.utils.browser.version.safari&&c.controller.buffer(this.buffered,c.duration(),c.currentTime())});b.addEventListener(\"loadstart\",\nfunction(){c.initialized||c.loadingpanel.ready(3);clearTimeout(c.timerChecker);c.controller.setState(m.a.V_IDEL)});b.addEventListener(\"waiting\",function(){c.trigger(m.a.EVENT.VIDEO_MEDIA_BUFFER)});b.addEventListener(\"canplay\",function(){c.errorMessage=null;c.hideErrorMsg();c.trigger(m.a.EVENT.VIDEO_MEDIA_BUFFER_END)});b.addEventListener(\"ended\",function(){if(c.utils.browser.version.safari){if(b.duration<c.controller.getDuration()-1)return c._seek(b.duration-.1),!1;if(Math.round(100*b.currentTime)!==\nMath.round(100*b.duration)&&b.duration===c.controller.getDuration()&&0!==b.currentTime)return c._seek(b.currentTime),!1}if(0===b.currentTime&&!c.config.ad)return c._seek(0),!1;clearTimeout(c.timerChecker);0<c.videoContinueTime?(c.videoContinueCurrentTime=c.video.duration,c.videoContinueCompareTime=+new Date,c._end_timer(c.video.duration),setTimeout(function(){c.video.pause()},0),c._play()):c.controller.setState(m.a.V_COMPLETE)});b.addEventListener(\"progress\",function(){null!=this.buffered&&c.controller.buffer(this.buffered,\nc.duration(),c.currentTime())});b.addEventListener(\"loadedmetadata\",function(){c.track&&c.track.loadTrackUp(!0);c.trigger(m.a.EVENT.VIDEO_METADATA_LOADED);c.trigger(m.a.EVENT.VIDEO_MEDIA_BUFFER);c.initialized||(c.loadingpanel.complete(3,!0),c.controller.setState(m.a.V_READY),c.adPlayer||c.trigger(m.a.EVENT.VIDEO_MEDIA_ENTER),!c.utils.timeParser(c.config.t)&&c.config.autoplay&&c.controller.setState(m.a.V_PLAY));null!=this.buffered&&c.controller.buffer(this.buffered,c.duration(),c.currentTime())});\nb.addEventListener(\"error\",function(b){c.video===this&&((b=document.createElement(\"video\"))&&\"function\"===typeof b.canPlayType&&b.canPlayType('video/mp4; codecs=\"avc1.42001E, mp4a.40.2\"')?c._videoErrorHandler(m.a.VIDEO_PLAY_ERROR,\"[NetworkError] Exception: 3104 Failed to fetch\"):c._videoErrorHandler(m.a.VIDEO_PLAY_ERROR,\"[MediaError] Exception: Unsupported codecs, Please install H.264 codec in your system.\"))});b.addEventListener(\"ratechange\",function(e){c.danmaku&&c.danmaku.option&&c.danmaku.option(\"videospeed\",\nb.playbackRate||1);c.setting&&c.setting.videospeed(b.playbackRate||1)});this.trigger(m.a.EVENT.VIDEO_MEDIA_ATTACHED)};n.prototype._setVideoWrap=function(b,c){this.trigger(m.a.EVENT.VIDEO_METADATA_LOADED);$(b).removeClass(\"seamless\");$(this.video).remove();this.videoInfo.update(N.a.generateVideoInfoItems(c.type));this.nativePlayer&&this.nativePlayer.destroy();this.nativePlayer=c;this._videoEventListener(b);this.playerQualityChanging=!1};n.prototype._videoOnRecoveredEarlyEof=function(){var b=this._getPlayurl();\nthis.trigger(m.a.EVENT.VIDEO_MEDIA_ERROR,m.a.VIDEO_ERROR,m.a.NETWORK_RECOVERED_EARLY_EOF,\"url:\"+b+\",message:RecoveredEarlyEof\")};n.prototype._end_timer=function(b){var c=this;this.duration()>=b&&(clearTimeout(this.videoContinueTimeChecker),this.videoContinueTimeChecker=setTimeout(function(){c.videoContinueCurrentTime=c.currentTime();c.controller.setState(m.a.V_COMPLETE)},1E3*(this.duration()-b)))};n.prototype.isSvipQuality=function(b){return 74===b||112===b||116===b};n.prototype.reloadPlayurl=function(){var b=\nthis,c=this;return new Promise(function(e,d){var f={domain:1<=c.config.seasonType?z.a.domains.bangumi:1===c.config.playerType?z.a.domains.bangumiS:z.a.domains.interface,enableSSLResolve:c.config.enableSSLResolve,enableSSLStream:c.config.enableSSLStream,cid:c.config.cid,episodeId:c.config.episodeId,quality:c.videoQuality,type:c.allowFlv?\"\":\"mp4\",requestFromInit:!0,extra_params:c.config.extraParams,player:c};f.extra_params=f.extra_params?f.extra_params+(\"&qn=\"+f.quality):\"qn=\"+f.quality;c.config.seasonType&&\n!h.a.getSearchParam(\"season_type\",\"?\"+f.extra_params)&&(f.extra_params+=\"&season_type=\"+c.config.seasonType);var m=1;b.allowFlv&&(m=b.config.dashSymbol?b.fnval:1);f.fnver=0;f.fnval=m;f.extra_params=f.extra_params?f.extra_params+(\"&fnver=0&fnval=\"+m):\"fnver=0&fnval=\"+m;z.a.r(f,function(b){b=c.transformQuality(b);void 0!==b&&null!==b.mediaDataSource&&b.mediaDataSource.url?e(b):d(b)},function(b){d(b)})})};n.prototype.updateSource=function(b){var c=this;return new Promise(function(e,d){c.dashPlayer&&\n\"function\"===typeof c.dashPlayer.updateSource?c.reloadPlayurl().then(function(f){c.dashPlayer&&c.dashPlayer.updateSource?c.dashPlayer.updateSource(f.mediaDataSource.url).then(function(d){c.track&&c.trackInfoPush(\"video_retry_success\",b);e()}).catch(function(e){e=e.msg;c.track&&c.trackInfoPush(\"video_retry_fail\",\"from:\"+b+\",msg:\"+e);d(e)}):d(\"no dashplayer updateSource\")}).catch(function(){c.trackInfoPush(\"video_retry_fail\",\"playurl\");d(\"load playurl failed\")}):d(\"no dashplayer\")})};n.prototype.supportMSE=\nfunction(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"')};return n}();v.a=p},function(p,v,n){var h=n(2);v.a=function(){var g=jQuery,d=g.ajax;g.ajax=function(c,b){\"object\"===typeof c&&(b=c,c=void 0);b.offcsrf||\"post\"!==b.type&&\"POST\"!==b.type||!b.data||b.data.csrf||g.extend(b.data,{csrf:h.a.getCookie(\"bili_jct\")});return d(c,b)}}},function(p,v,n){p=n(42);var h=n.n(p);n=function(){function g(d,c){this.player=c;this.advType=this.player.setting.config.type;\nthis.dm=c.danmaku.danmaku.config.container;this.wrap=c.template.videoWrp;this.vid=this.wrap.find(\"video\");this.advdm=c.advDanmaku.container;this.type2={dmType:c.videoSettings.setting_config.type,advType:c.setting.config.type.toLowerCase()};this.config={wrappers:[{dom:this.vid[0],width:this.vid[0].offsetWidth,height:this.vid[0].offsetHeight,margin:[10,10],isVideo:!0}],width:this.wrap[0].offsetWidth,height:this.wrap[0].offsetHeight,background:d.background,rate:d.rate,fixedSize:d.fixedSize,imgWidth:d.imgWidth,\nimgHeight:d.imgHeight,isPNG:d.isPNG,quality:d.quality};this.name=d.name||\"\";this.init(d)}g.prototype.init=function(d){var c=this;d.isPNG?(\"canvas\"===this.type2.advType&&(d=this.player.advDanmaku.container.find(\"canvas\"),this.advdm=0<d.length?d:this.advdm),this.config.wrappers.push({dom:this.advdm[0],dmLayer:\"div\"===this.type2.advType?this.player.advDanmaku.exportDanmaku():null,width:this.advdm[0].offsetWidth,height:this.advdm[0].offsetHeight,margin:[0,0],isVideo:!1,dmType:this.type2.advType},{dom:this.dm,\ndmLayer:\"div\"===this.type2.dmType?this.player.danmaku.danmaku.exportDanmaku():null,width:this.dm.offsetWidth,height:this.dm.offsetHeight,margin:[0,0],isVideo:!1,dmType:this.type2.dmType}),this.config.result=function(b){200===b.code?c.download(b.result,c.randomName(10)+\".png\"):(undefined)},new h.a(this.config)):\"canvas\"===this.player.danmaku.danmaku.danmakuType(\"canvas\")&&(\"canvas\"===this.player.advDanmaku.danmakuType(\"canvas\")&&(\"div\"===this.type2.advType&&(this.advdm=this.player.advDanmaku.container.find(\"canvas\")),\nthis.config.wrappers.push({dom:this.advdm[0],width:this.advdm[0].offsetWidth,height:this.advdm[0].offsetHeight,margin:[0,0],isVideo:!1})),this.dm=this.player.danmaku.danmaku.config.container,this.config.wrappers.push({dom:this.dm,width:this.dm.offsetWidth,height:this.dm.offsetHeight,margin:[0,0],isVideo:!1}),this.config.fps=d.fps,this.config.time=d.time,this.config.rendering=function(b){(undefined)},this.config.result=function(b){200===b.code?c.download(b.result,c.randomName(10)+\".gif\"):(undefined);\n\"div\"===c.type2.dmType&&c.player.danmaku.danmaku.danmakuType(\"div\");\"div\"===c.type2.advType&&c.player.advDanmaku.danmakuType(\"div\")},new h.a(this.config))};g.prototype.randomName=function(d){var c,b=\"\";for(c=0;c<d;c+=1)b+=\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\".charAt(Math.floor(62*Math.random()));return b=(this.name||b)+\"-\"+(new Date).toLocaleString()};g.prototype.download=function(d,c){c=c||\"download.gif\";var b=document.createElement(\"a\");b.download=c;b.href=d;b.click()};\nreturn g}();v.a=n},function(p,v,n){(function(h){var g,d,c,b=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&\"function\"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?\"symbol\":typeof b};!function(e,f){\"object\"==b(v)&&\"object\"==b(h)?h.exports=f():!(d=[],g=f,c=\"function\"===typeof g?g.apply(v,d):g,void 0!==c&&(h.exports=c))}(void 0,function(){return function(b){function c(d){if(e[d])return e[d].exports;var f=e[d]={i:d,l:!1,\nexports:{}};return b[d].call(f.exports,f,f.exports,c),f.l=!0,f.exports}var e={};return c.m=b,c.c=e,c.d=function(b,e,d){c.o(b,e)||Object.defineProperty(b,e,{configurable:!1,enumerable:!0,get:d})},c.n=function(b){var e=b&&b.__esModule?function(){return b.default}:function(){return b};return c.d(e,\"a\",e),e},c.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)},c.p=\"\",c(c.s=0)}([function(b,c,d){c=d(1).default;b.exports=c},function(b,c,d){Object.defineProperty(c,\"__esModule\",{value:!0});\nb=d(2);var e=(d.n(b),d(7)),f=function(){function b(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;\"value\"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(c,e,d){return e&&b(c.prototype,e),d&&b(c,d),c}}();d=function(){function b(c){if(!(this instanceof b))throw new TypeError(\"Cannot call a class as a function\");\"development\"===b.CONFIG.bundleType&&(console.clear(),console.dir(b.CONFIG));this.initialize(c)}return b.prototype.initialize=\nfunction(b){(undefined);this.Screen=new e.a(b)},b.prototype.destroy=function(){return (undefined),this},f(b,null,[{key:\"CONFIG\",get:function(){return{version:\"1.3.1\",gitHash:\"7481a230\",build:\"1\",bundleType:\"release\"}}}]),b}();c.default=d},function(b,c,d){c=d(3);\"string\"==typeof c&&(c=[[b.i,c,\"\"]]);d(5)(c,{transform:void 0});c.locals&&(b.exports=c.locals)},function(b,c,d){c=b.exports=d(4)(void 0);c.push([b.i,\"html,\\nbody {\\n  padding: 0;\\n  margin: 0;\\n  position: relative;\\n  height: 100%;\\n}\\n#danmaku {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 420px;\\n  overflow: hidden;\\n  pointer-events: none;\\n}\\n@media (max-width: 600px) {\\n  .hello {\\n    margin: -200px 0 0;\\n    left: 0;\\n  }\\n  .hello-img {\\n    height: 120px;\\n  }\\n}\\n\",\n\"\"])},function(b,c){function e(b,c){var e=b[1]||\"\",d=b[3];return d?c&&\"function\"==typeof btoa?(b=\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+\" */\",[e].concat(d.sources.map(function(b){return\"/*# sourceURL=\"+d.sourceRoot+b+\" */\"})).concat([b]).join(\"\\n\")):\"\"+e:e}b.exports=function(b){var c=[];return c.toString=function(){return this.map(function(c){var d=e(c,b);return c[2]?\"@media \"+c[2]+\"{\"+d+\"}\":d}).join(\"\")},c.i=function(b,\ne){\"string\"==typeof b&&(b=[[null,b,\"\"]]);for(var d={},f=0;f<this.length;f++){var m=this[f][0];\"number\"==typeof m&&(d[m]=!0)}for(f=0;f<b.length;f++)m=b[f],\"number\"==typeof m[0]&&d[m[0]]||(e&&!m[2]?m[2]=e:e&&(m[2]=\"(\"+m[2]+\") and (\"+e+\")\"),c.push(m))},c}},function(c,d,k){function e(b,c){for(var e=0;e<b.length;e++){var d=b[e],f=v[d.id];if(f){f.refs++;for(var m=0;m<f.parts.length;m++)f.parts[m](d.parts[m]);for(;m<d.parts.length;m++)f.parts.push(n(d.parts[m],c))}else{f=[];for(m=0;m<d.parts.length;m++)f.push(n(d.parts[m],\nc));v[d.id]={id:d.id,refs:1,parts:f}}}}function f(b,c){for(var e=[],d={},f=0;f<b.length;f++){var m=b[f],k=c.base?m[0]+c.base:m[0],m={css:m[1],media:m[2],sourceMap:m[3]};d[k]?d[k].parts.push(m):e.push(d[k]={id:k,parts:[m]})}return e}function g(b,c){var e=ba(b.insertInto);if(!e)throw Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var d=z[z.length-1];if(\"top\"===b.insertAt)d?d.nextSibling?e.insertBefore(c,d.nextSibling):e.appendChild(c):\ne.insertBefore(c,e.firstChild),z.push(c);else{if(\"bottom\"!==b.insertAt)throw Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");e.appendChild(c)}}function t(b){if(null===b.parentNode)return!1;b.parentNode.removeChild(b);b=z.indexOf(b);0<=b&&z.splice(b,1)}function C(b){var c=document.createElement(\"style\");return b.attrs.type=\"text/css\",h(c,b.attrs),g(b,c),c}function y(b){var c=document.createElement(\"link\");return b.attrs.type=\"text/css\",b.attrs.rel=\"stylesheet\",h(c,b.attrs),\ng(b,c),c}function h(b,c){Object.keys(c).forEach(function(e){b.setAttribute(e,c[e])})}function n(b,c){var e;if(c.transform&&b.css){if(!(e=c.transform(b.css)))return function(){};b.css=e}if(c.singleton){e=W++;var d=Q||(Q=C(c));var f=q.bind(null,d,e,!1);var m=q.bind(null,d,e,!0)}else b.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(d=y(c),f=p.bind(null,d,c),m=function(){t(d);d.href&&\nURL.revokeObjectURL(d.href)}):(d=C(c),f=D.bind(null,d),m=function(){t(d)});return f(b),function(c){c?c.css===b.css&&c.media===b.media&&c.sourceMap===b.sourceMap||f(b=c):m()}}function q(b,c,e,d){e=e?\"\":d.css;b.styleSheet?b.styleSheet.cssText=I(c,e):(e=document.createTextNode(e),d=b.childNodes,d[c]&&b.removeChild(d[c]),d.length?b.insertBefore(e,d[c]):b.appendChild(e))}function D(b,c){var e=c.css;c=c.media;if(c&&b.setAttribute(\"media\",c),b.styleSheet)b.styleSheet.cssText=e;else{for(;b.firstChild;)b.removeChild(b.firstChild);\nb.appendChild(document.createTextNode(e))}}function p(b,c,e){var d=e.css;e=e.sourceMap;var f=void 0===c.convertToAbsoluteUrls&&e;(c.convertToAbsoluteUrls||f)&&(d=M(d));e&&(d+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+\" */\");c=new Blob([d],{type:\"text/css\"});d=b.href;b.href=URL.createObjectURL(c);d&&URL.revokeObjectURL(d)}var v={},fa=function(b){var c;return function(){return void 0===c&&(c=b.apply(this,arguments)),c}}(function(){return window&&\ndocument&&document.all&&!window.atob}),ba=function(b){var c={};return function(e){return void 0===c[e]&&(c[e]=b.call(this,e)),c[e]}}(function(b){return document.querySelector(b)}),Q=null,W=0,z=[],M=k(6);c.exports=function(c,d){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=(\"undefined\"===typeof document?\"undefined\":b(document)))throw Error(\"The style-loader cannot be used in a non-browser environment\");d=d||{};d.attrs=\"object\"==b(d.attrs)?d.attrs:{};d.singleton||(d.singleton=fa());d.insertInto||(d.insertInto=\n\"head\");d.insertAt||(d.insertAt=\"bottom\");var m=f(c,d);return e(m,d),function(b){for(var c,k=[],t=0;t<m.length;t++)c=v[m[t].id],c.refs--,k.push(c);b&&e(f(b,d),d);for(t=0;t<k.length;t++)if(c=k[t],0===c.refs){for(b=0;b<c.parts.length;b++)c.parts[b]();delete v[c.id]}}};var I=function(){var b=[];return function(c,e){return b[c]=e,b.filter(Boolean).join(\"\\n\")}}()},function(b,c){b.exports=function(b){var c=\"undefined\"!=typeof window&&window.location;if(!c)throw Error(\"fixUrls requires window.location\");\nif(!b||\"string\"!=typeof b)return b;var e=c.protocol+\"//\"+c.host,d=e+c.pathname.replace(/\\/[^\\/]*$/,\"/\");return b.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(b,c){c=c.trim().replace(/^\"(.*)\"$/,function(b,c){return c}).replace(/^'(.*)'$/,function(b,c){return c});if(/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(c))return b;var f;return f=0===c.indexOf(\"//\")?c:0===c.indexOf(\"/\")?e+c:d+c.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(f)+\")\"})}},function(b,c,d){var e=d(8);b=\nd(9);var f=d.n(b);d=function(){function b(c){if(!(this instanceof b))throw new TypeError(\"Cannot call a class as a function\");this._config=e.a.assign({wrappers:[],width:620,height:420,rate:.7,fps:24,time:2E3,background:\"#000\",fixedSize:!1,imgWidth:300,imgHeight:200,isPNG:1,quality:80,rendering:function(){},result:function(){}},c);this.data={code:200,result:null,message:\"\"};this.initialize()}return b.prototype.initialize=function(){this._config.isPNG?this.screen():this.loadGif()},b.prototype.screen=\nfunction(){var b=this._config.fixedSize?this.fixedScreenShot(this._config.isPNG):this.screenShot(this._config.isPNG);this.data.code=200;this.data.message=\"\";this.data.result=b.toDataURL(\"image/png\");this._config.result(this.data)},b.prototype.screenShot=function(b){var c=this._config.rate,e=this._config.width*c,d=this._config.height*c,f=document.createElement(\"canvas\"),m=f.getContext(\"2d\");f.setAttribute(\"width\",e);f.setAttribute(\"height\",d);for(var k=0,t=this._config.wrappers.length;k<t;k++){var g=\nthis._config.wrappers[k],u=g.dom,A=g.width*c,h=g.height*c,n=g.margin[1]*c,z=g.margin[0]*c,p=n,v=z,N=A,T=h;(0===k&&(m.fillStyle=this._config.background,m.fillRect(0,0,e,d)),g.isVideo)?(g=u.videoWidth*c,n=u.videoHeight*c,A/h>g/n?(N=g*h/n,p+=.5*(A-N)):(T=n*A/g,v+=.5*(h-T)),m.drawImage(u,p,v,N,T)):\"div\"===g.dmType&&b?g.dmLayer&&m.drawImage(g.dmLayer,n,z,e,d):u&&m.drawImage(u,n,z,e,d)}return f},b.prototype.fixedScreenShot=function(b){var c=this._config.width,e=this._config.height,d=this._config.imgWidth,\nf=this._config.imgHeight,m=document.createElement(\"canvas\"),k=m.getContext(\"2d\");m.setAttribute(\"width\",d);m.setAttribute(\"height\",f);for(var t=0,g=this._config.wrappers.length;t<g;t++){var u=this._config.wrappers[t],A=u.dom,h=u.margin[1],n=u.margin[0],z=d/c,p=u.width,v=u.height,N=0,T=0,ma=c,ga=e;(0===t&&(k.fillStyle=this._config.background,k.fillRect(0,0,d,f)),d/f>c/e?(ga=f*c/d,T=0):(z=f/e,ma=d*e/f,N=.5*(c-ma)),u.isVideo)?(N=A.videoWidth,T=A.videoHeight,d/f>N/T?(n*=z,v=f-2*n,p=N*v/T,h=h*z+.5*(d-\np)):(h*=z,p=d-2*h,v=T*p/N,n=n*z+.5*(f-v)),k.drawImage(A,0,0,N,T,h,n,p,v)):(\"div\"===u.dmType&&b&&(A=u.dmLayer),(h=A&&A.width/c)&&k.drawImage(A,N*h,T*h,ma*h,ga*h,0,0,d,f))}return m},b.prototype.loadGif=function(){function b(){+new Date>d._config.time+c+10?(d.drawGif(e,m,k,g),\"div\"===d.default&&(d._config.danmakuType(\"div\")?d._config.danmaku=\"div\":d.message=\"\\u65e0\\u6cd5\\u91cd\\u7f6e\\u5f39\\u5e55type\")):(setTimeout(function(){b()},1E3/d._config.fps),f=d._config.fixedSize?d.fixedScreenShot(d._config.isPNG):\nd.screenShot(d._config.isPNG),f&&e.push(f),g=20*e.length/d._config.time,d._config.rendering(g))}var c=+new Date,e=[],d=this,f=void 0,m=this._config.width*this._config.rate,k=this._config.height*this._config.rate,g=0;this._config.fixedSize&&(m=this._config.imgWidth,k=this._config.imgHeight);setTimeout(function(){b()},10)},b.prototype.drawGif=function(b,c,e,d){var m=this,k=document.createElement(\"canvas\"),t=k.getContext(\"2d\"),g=new f.a({workers:4,quality:this._config.quality,width:c,height:e}),u=b.length;\nk.setAttribute(\"width\",c);k.setAttribute(\"height\",e);for(k=0;k<u;k+=1)t.drawImage(b[k],0,0,c,e),g.addFrame(t,{delay:1E3/this._config.fps,copy:!0}),t.clearRect(0,0,c,e);g.on(\"finished\",function(b){m.data.code=200;m.data.message=\"\";m.data.result=URL.createObjectURL(b);m._config.result(m.data)});g.on(\"progress\",function(b){m._config.rendering(d+(1-d)*b)});g.render()},b}();c.a=d},function(b,c,d){c.a={assign:function(b,c){var e=b||{};b=Object.keys(c||{});var d=Object.keys(e);return b.forEach(function(b){0<=\nd.indexOf(b)&&(e[b]=c[b])}),e}}},function(c,d,k){var e,f,g,t=\"function\"==typeof Symbol&&\"symbol\"==b(Symbol.iterator)?function(c){return\"undefined\"===typeof c?\"undefined\":b(c)}:function(c){return c&&\"function\"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?\"symbol\":\"undefined\"===typeof c?\"undefined\":b(c)},C=k(10);!function(b){\"object\"===t(d)&&void 0!==c?c.exports=b():(f=[],e=b,void 0!==(g=\"function\"==typeof e?e.apply(d,f):e)&&(c.exports=g))}(function(){return function U(b,c,e){function d(m,\nk){if(!c[m]){if(!b[m]){if(f)return f(m,!0);k=Error(\"Cannot find module '\"+m+\"'\");throw k.code=\"MODULE_NOT_FOUND\",k;}k=c[m]={exports:{}};b[m][0].call(k.exports,function(c){return d(b[m][1][c]||c)},k,k.exports,U,b,c,e)}return c[m].exports}for(var f=!1,m=0;m<e.length;m++)d(e[m]);return d}({1:[function(b,c,e){function d(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function f(b){return\"function\"==typeof b}function m(b){return\"object\"===(void 0===b?\"undefined\":t(b))&&null!==\nb}c.exports=d;d.EventEmitter=d;d.prototype._events=void 0;d.prototype._maxListeners=void 0;d.defaultMaxListeners=10;d.prototype.setMaxListeners=function(b){if(\"number\"!=typeof b||0>b||isNaN(b))throw TypeError(\"n must be a positive number\");return this._maxListeners=b,this};d.prototype.emit=function(b){var c,e;if(this._events||(this._events={}),\"error\"===b&&(!this._events.error||m(this._events.error)&&!this._events.error.length)){if((c=arguments[1])instanceof Error)throw c;var d=Error('Uncaught, unspecified \"error\" event. ('+\nc+\")\");throw d.context=c,d;}if(d=this._events[b],void 0===d)return!1;if(f(d))switch(arguments.length){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),d.apply(this,c)}else if(m(d)){c=Array.prototype.slice.call(arguments,1);var k=d.slice();d=k.length;for(e=0;e<d;e++)k[e].apply(this,c)}return!0};d.prototype.addListener=function(b,c){var e;if(!f(c))throw TypeError(\"listener must be a function\");\nreturn this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",b,f(c.listener)?c.listener:c),this._events[b]?m(this._events[b])?this._events[b].push(c):this._events[b]=[this._events[b],c]:this._events[b]=c,m(this._events[b])&&!this._events[b].warned&&(e=void 0===this._maxListeners?d.defaultMaxListeners:this._maxListeners)&&0<e&&this._events[b].length>e&&(this._events[b].warned=!0,(undefined),\"function\"==typeof console.trace&&(undefined)),this};d.prototype.on=d.prototype.addListener;d.prototype.once=function(b,c){function e(){this.removeListener(b,e);d||(d=!0,c.apply(this,arguments))}if(!f(c))throw TypeError(\"listener must be a function\");var d=!1;return e.listener=c,this.on(b,e),this};d.prototype.removeListener=function(b,c){var e,d,k;if(!f(c))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[b])return this;if(e=this._events[b],\nk=e.length,d=-1,e===c||f(e.listener)&&e.listener===c)delete this._events[b],this._events.removeListener&&this.emit(\"removeListener\",b,c);else if(m(e)){for(;0<k--;)if(e[k]===c||e[k].listener&&e[k].listener===c){d=k;break}if(0>d)return this;1===e.length?(e.length=0,delete this._events[b]):e.splice(d,1);this._events.removeListener&&this.emit(\"removeListener\",b,c)}return this};d.prototype.removeAllListeners=function(b){var c,e;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?\nthis._events={}:this._events[b]&&delete this._events[b],this;if(0===arguments.length){for(c in this._events)\"removeListener\"!==c&&this.removeAllListeners(c);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(e=this._events[b],f(e))this.removeListener(b,e);else if(e)for(;e.length;)this.removeListener(b,e[e.length-1]);return delete this._events[b],this};d.prototype.listeners=function(b){return this._events&&this._events[b]?f(this._events[b])?[this._events[b]]:this._events[b].slice():\n[]};d.prototype.listenerCount=function(b){if(this._events){b=this._events[b];if(f(b))return 1;if(b)return b.length}return 0};d.listenerCount=function(b,c){return b.listenerCount(c)}},{}],2:[function(b,c,e){var d=navigator.userAgent.toLowerCase();e=navigator.platform.toLowerCase();b=d.match(/(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/)||[null,\"unknown\",0];b={name:\"version\"===b[1]?b[3]:b[1],version:\"ie\"===b[1]&&document.documentMode||parseFloat(\"opera\"===\nb[1]&&b[4]?b[4]:b[2]),platform:{name:d.match(/ip(?:ad|od|hone)/)?\"ios\":(d.match(/(?:webos|android)/)||e.match(/mac|win|linux/)||[\"other\"])[0]}};b[b.name]=!0;b[b.name+parseInt(b.version,10)]=!0;b.platform[b.platform.name]=!0;c.exports=b},{}],3:[function(b,c,e){var d=function(b,c){function e(){this.constructor=b}for(var d in c)f.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},f={}.hasOwnProperty,m=[].indexOf||function(b){for(var c=0,e=this.length;c<\ne;c++)if(c in this&&this[c]===b)return c;return-1},k=[].slice;e=b(\"events\").EventEmitter;var t=b(\"./browser.coffee\");b=function(b){function c(b){var c,d;this.running=!1;this.options={};this.frames=[];this.freeWorkers=[];this.activeWorkers=[];this.setOptions(b);for(d in e)b=e[d],null==(c=this.options)[d]&&(c[d]=b)}var e,g;d(c,b);!function(){var b=document.scripts,b=b[b.length-1].src;b.substring(0,b.lastIndexOf(\"/\")+1)}();return e={workerScript:\"\",workers:2,repeat:0,background:\"#fff\",quality:10,width:null,\nheight:null,transparent:null,debug:!1,dither:!1},g={delay:500,copy:!1},c.prototype.setOption=function(b,c){if(this.options[b]=c,null!=this._canvas&&(\"width\"===b||\"height\"===b))return this._canvas[b]=c},c.prototype.setOptions=function(b){var c,e;var d=[];for(c in b)f.call(b,c)&&(e=b[c],d.push(this.setOption(c,e)));return d},c.prototype.addFrame=function(b,c){var e;null==c&&(c={});var d={};d.transparent=this.options.transparent;for(e in g)d[e]=c[e]||g[e];if(null==this.options.width&&this.setOption(\"width\",\nb.width),null==this.options.height&&this.setOption(\"height\",b.height),\"undefined\"!=typeof ImageData&&null!==ImageData&&b instanceof ImageData)d.data=b.data;else if(\"undefined\"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&b instanceof CanvasRenderingContext2D||\"undefined\"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&b instanceof WebGLRenderingContext)c.copy?d.data=this.getContextData(b):d.context=b;else{if(null==b.childNodes)throw Error(\"Invalid image\");c.copy?\nd.data=this.getImageData(b):d.image=b}return this.frames.push(d)},c.prototype.render=function(){var b;if(this.running)throw Error(\"Already running\");if(null==this.options.width||null==this.options.height)throw Error(\"Width and height must be set prior to rendering\");this.running=!0;this.finishedFrames=this.nextFrame=0;var c=[];var e=0;for(b=this.frames.length;0<=b?e<b:e>b;0<=b?++e:--e)c.push(null);if(this.imageParts=c,b=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=\n0;0<=b?e<b:e>b;0<=b?++e:--e)this.renderNextFrame();return this.emit(\"start\"),this.emit(\"progress\",0)},c.prototype.abort=function(){for(var b;null!=(b=this.activeWorkers.shift());)this.log(\"killing active worker\"),b.terminate();return this.running=!1,this.emit(\"abort\")},c.prototype.spawnWorkers=function(){var b,c,e;return b=Math.min(this.options.workers,this.frames.length),function(){e=[];for(var d=c=this.freeWorkers.length;c<=b?d<b:d>b;c<=b?d++:d--)e.push(d);return e}.apply(this).forEach(function(b){return function(c){var e;\nreturn b.log(\"spawning worker \"+c),e=new Worker(C),e.onmessage=function(c){return b.activeWorkers.splice(b.activeWorkers.indexOf(e),1),b.freeWorkers.push(e),b.frameFinished(c.data)},b.freeWorkers.push(e)}}(this)),b},c.prototype.frameFinished=function(b){var c;if(this.log(\"frame \"+b.index+\" finished - \"+this.activeWorkers.length+\" active\"),this.finishedFrames++,this.emit(\"progress\",this.finishedFrames/this.frames.length),this.imageParts[b.index]=b,!0===this.options.globalPalette&&(this.options.globalPalette=\nb.globalPalette,this.log(\"global palette analyzed\"),2<this.frames.length))for(b=1,c=this.freeWorkers.length;1<=c?b<c:b>c;1<=c?++b:--b)this.renderNextFrame();return 0<=m.call(this.imageParts,null)?this.renderNextFrame():this.finishRendering()},c.prototype.finishRendering=function(){var b,c,e,d;var f=0;var m=this.imageParts;var k=0;for(c=m.length;k<c;k++){var t=m[k];f+=(t.data.length-1)*t.pageSize+t.cursor}f+=t.pageSize-t.cursor;this.log(\"rendering finished - filesize \"+Math.round(f/1E3)+\"kb\");k=new Uint8Array(f);\nvar g=0;var u=this.imageParts;c=0;for(e=u.length;c<e;c++){t=u[c];var C=t.data;f=m=0;for(d=C.length;m<d;f=++m){var A=C[f];k.set(A,g);f===t.data.length-1?g+=t.cursor:g+=t.pageSize}}return b=new Blob([k],{type:\"image/gif\"}),this.emit(\"finished\",b,k)},c.prototype.renderNextFrame=function(){var b,c,e;if(0===this.freeWorkers.length)throw Error(\"No free workers\");if(!(this.nextFrame>=this.frames.length))return b=this.frames[this.nextFrame++],e=this.freeWorkers.shift(),c=this.getTask(b),this.log(\"starting frame \"+\n(c.index+1)+\" of \"+this.frames.length),this.activeWorkers.push(e),e.postMessage(c)},c.prototype.getContextData=function(b){return b.getImageData(0,0,this.options.width,this.options.height).data},c.prototype.getImageData=function(b){var c;return null==this._canvas&&(this._canvas=document.createElement(\"canvas\"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),c=this._canvas.getContext(\"2d\"),c.setFill=this.options.background,c.fillRect(0,0,this.options.width,this.options.height),\nc.drawImage(b,0,0),this.getContextData(c)},c.prototype.getTask=function(b){var c,e;if(c=this.frames.indexOf(b),e={index:c,last:c===this.frames.length-1,delay:b.delay,transparent:b.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:\"chrome\"===t.name},null!=b.data)e.data=b.data;else if(null!=b.context)e.data=this.getContextData(b.context);else{if(null==\nb.image)throw Error(\"Invalid frame\");e.data=this.getImageData(b.image)}return e},c.prototype.log=function(){var b;if(b=1<=arguments.length?k.call(arguments,0):[],this.options.debug)return console.log.apply(console,b)},c}(e);c.exports=b},{\"./browser.coffee\":2,events:1}]},{},[3])(3)})},function(b,c){c=new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module \\'\"+o+\"\\'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require(\"./TypedNeuQuant.js\");var LZWEncoder=require(\"./LZWEncoder.js\");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv=\"\";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither=\"FloydSteinberg\";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes(\"GIF89a\")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace(\"-serpentine\",\"\"),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw\"Unknown dithering kernel: \"+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes(\"NETSCAPE2.0\");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{\"./LZWEncoder.js\":2,\"./TypedNeuQuant.js\":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require(\"./GIFEncoder.js\");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{\"./GIFEncoder.js\":1}]},{},[4]);'],\n{type:\"application/javascript\"});c=URL.createObjectURL(c);b.exports=c}])})}).call(v,n(6)(p))},function(p,v,n){var h=n(0);p=n(44);var g=n.n(p);n=function(){function d(c){this.player=c;this.bindEvents();this.eventLog=new g.a(\".bilibili-player-area\",{hideCallback:function(){c&&c.videoInfo&&\"function\"===typeof c.videoInfo.hideLog&&c.videoInfo.hideLog()}})}d.prototype.bindEvents=function(){var c=this;this.player&&(this.player.bind(h.a.EVENT.VIDEO_LOG,function(b,e,d,k){c.log(e,d||0,k)}),this.player.bind(h.a.EVENT.VIDEO_PLAYER_LOAD,\nfunction(){c.playerLoadTime=+new Date;c.log(\"Load video config\")}),this.player.bind(h.a.EVENT.VIDEO_PLAYER_LOADED,function(){c.log(\"Load video config finished\",0,c.playerLoadTime)}),this.player.bind(h.a.EVENT.VIDEO_PLAYURL_LOAD,function(){c.playurlLoadTime=+new Date;c.log(\"Load video playurl\")}),this.player.bind(h.a.EVENT.VIDEO_PLAYURL_LOADED,function(){c.log(\"Load video playurl finished\",0,c.playurlLoadTime)}),this.player.bind(h.a.EVENT.VIDEO_METADATA_LOAD,function(){c.metadataLoadTime=+new Date;\nc.log(\"Load video data\")}),this.player.bind(h.a.EVENT.VIDEO_METADATA_LOADED,function(){c.log(\"Load video data finished\",0,c.metadataLoadTime)}),this.player.bind(h.a.EVENT.VIDEO_DANMAKU_LOAD,function(){c.danmakuLoadTime=+new Date;c.log(\"Load video danmaku\")}),this.player.bind(h.a.EVENT.VIDEO_DANMAKU_LOADED,function(b,e,d){e?c.log(\"Load video danmaku finished \"+(d?d:\"\"),0,c.danmakuLoadTime):c.log(\"Load video danmaku failed \"+(d?d:\"\"),2)}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_BUFFER,function(){c.metaBufferTime=\n+new Date;c.log(\"Load video buffer\")}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_BUFFER_END,function(){c.log(\"Load video buffer finished\",0,c.metaBufferTime)}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_ERROR,function(b,e,d,k){c.log(\"Load \"+[\"\",\"video config\",\"video playurl\",\"video data\"][e]+\" error\"+(d?\" code:\"+d:\"\")+(k?\",\"+k:\"\"),2)}),this.player.bind(h.a.EVENT.VIDEO_WEBSOCKET_LINK,function(){c.websocketLoadTime=+new Date;c.log(\"Link websocket server\")}),this.player.bind(h.a.EVENT.VIDEO_WEBSOCKET_LINKED,\nfunction(){c.log(\"Link websocket server finished\",0,c.websocketLoadTime)}),this.player.bind(h.a.EVENT.VIDEO_WEBSOCKET_ERROR,function(){c.log(\"Link websocket error\",2)}),this.player.bind(h.a.EVENT.VIDEO_WEBSOCKET_END,function(){c.log(\"Close websocket\")}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_PLAY,function(){c.log(\"Play\")}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_PAUSE,function(){c.log(\"Pause\")}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_SEEK,function(){c.seekTime=+new Date;c.log(\"Seeking\")}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_SEEKED,\nfunction(){c.log(\"Seeked\",0,c.seekTime)}),this.player.bind(h.a.EVENT.VIDEO_MEDIA_ENDED,function(){c.log(\"Play end\")}))};d.prototype.log=function(c,b,e){window.EVENT_LOG_QUEUE=\"object Array\"===Object.prototype.toString.call(window.EVENT_LOG_QUEUE)?window.EVENT_LOG_QUEUE:[];return this.eventLog?this.eventLog.log(c,b||0,e):window.EVENT_LOG_QUEUE.push({log:c,type:b,start:e})};d.prototype.show=function(){return this.eventLog?this.eventLog.show.apply(this.eventLog,arguments):!1};d.prototype.hide=function(){return this.eventLog?\nthis.eventLog.hide.apply(this.eventLog,arguments):!1};d.prototype.download=function(){return this.eventLog?this.eventLog.download.apply(this.eventLog,arguments):!1};d.prototype.text=function(){return g.a?g.a.text.apply(g.a,arguments):!1};return d}();v.a=n},function(p,v,n){(function(h){var g,d,c,b=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&\"function\"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?\"symbol\":typeof b};\n!function(e,f){\"object\"==b(v)&&\"object\"==b(h)?h.exports=f():!(d=[],g=f,c=\"function\"===typeof g?g.apply(v,d):g,void 0!==c&&(h.exports=c))}(void 0,function(){return function(b){function c(d){if(e[d])return e[d].exports;var f=e[d]={i:d,l:!1,exports:{}};return b[d].call(f.exports,f,f.exports,c),f.l=!0,f.exports}var e={};return c.m=b,c.c=e,c.d=function(b,e,d){c.o(b,e)||Object.defineProperty(b,e,{configurable:!1,enumerable:!0,get:d})},c.n=function(b){var e=b&&b.__esModule?function(){return b.default}:function(){return b};\nreturn c.d(e,\"a\",e),e},c.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)},c.p=\"\",c(c.s=0)}([function(b,c,d){c=d(1).default;b.exports=c},function(b,c,d){Object.defineProperty(c,\"__esModule\",{value:!0});b=d(2);var e=(d.n(b),d(7)),f=d(8);window.EVENT_LOG_QUEUE=\"object Array\"===Object.prototype.toString.call(window.EVENT_LOG_QUEUE)?window.EVENT_LOG_QUEUE:[];d=function(){return function(b,c){return window.$&&window.$.fn.jquery&&\"[object Function]\"===Object.prototype.toString.call(window.$)&&\n\"[object Object]\"===Object.prototype.toString.call(window.$.fn)&&window.mCustomScrollbar?new e.a(b,c):new f.a(b,c)}}();d.text=function(){return window.eventLogText};d.CONFIG=function(){return{version:\"1.0.4\",gitHash:\"a33130ec\",build:\"5\",bundleType:\"release\"}};c.default=d},function(b,c,d){c=d(3);\"string\"==typeof c&&(c=[[b.i,c,\"\"]]);d(5)(c,{transform:void 0});c.locals&&(b.exports=c.locals)},function(b,c,d){c=b.exports=d(4)(void 0);c.push([b.i,'.bilibili-player-event-log-container {\\n  display: none;\\n  position: absolute;\\n  right: 10px;\\n  top: 10px;\\n  z-index: 9999;\\n  background: rgba(28, 28, 28, 0.8);\\n  border-radius: 4px;\\n  font-family: \"Noto Sans CJK SC DemiLight\", Roboto, \"Segoe UI\", Tahoma, Arial, Helvetica, sans-serif;\\n  -webkit-font-smoothing: antialiased;\\n  padding: 15px 0 15px 15px;\\n  width: 240px;\\n  height: 310px;\\n}\\n.bilibili-player-event-log-container.active {\\n  display: block;\\n}\\n.bilibili-player-event-log-container .mCSB_inside > .mCSB_container {\\n  margin-right: 10px;\\n}\\n.bilibili-player-event-log-container .mCSB_scrollTools {\\n  transition: opacity 0.15s linear, background-color 0.15s linear;\\n}\\n.bilibili-player-event-log-container p {\\n  color: #fff;\\n  white-space: nowrap;\\n  font-size: 12px;\\n  line-height: 18px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  margin: 0;\\n}\\n.bilibili-player-event-log-container p.bilibili-player-event-log-info {\\n  color: #fff;\\n}\\n.bilibili-player-event-log-container p.bilibili-player-event-log-warning {\\n  color: #f5b23d;\\n}\\n.bilibili-player-event-log-container p.bilibili-player-event-log-error {\\n  color: #f25d8e;\\n}\\n.bilibili-player-event-log-container .bilibili-player-event-log-duration {\\n  color: #00b498;\\n  margin-left: 4px;\\n}\\n.bilibili-player-event-log-container .bilibili-player-event-log-panel {\\n  width: 230px;\\n}\\n.bilibili-player-event-log-container .bilibili-player-event-log-content {\\n  word-wrap: break-word;\\n  white-space: normal;\\n}\\n.bilibili-player-event-log-container .bilibili-player-event-log-close {\\n  position: absolute;\\n  right: 15px;\\n  top: 10px;\\n  z-index: 49;\\n  color: #ddd;\\n  font-size: 13px;\\n  cursor: pointer;\\n}\\n',\n\"\"])},function(b,c){function e(b,c){var e=b[1]||\"\",d=b[3];return d?c&&\"function\"==typeof btoa?(b=\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+\" */\",[e].concat(d.sources.map(function(b){return\"/*# sourceURL=\"+d.sourceRoot+b+\" */\"})).concat([b]).join(\"\\n\")):\"\"+e:e}b.exports=function(b){var c=[];return c.toString=function(){return this.map(function(c){var d=e(c,b);return c[2]?\"@media \"+c[2]+\"{\"+d+\"}\":d}).join(\"\")},c.i=function(b,\ne){\"string\"==typeof b&&(b=[[null,b,\"\"]]);for(var d={},f=0;f<this.length;f++){var m=this[f][0];\"number\"==typeof m&&(d[m]=!0)}for(f=0;f<b.length;f++)m=b[f],\"number\"==typeof m[0]&&d[m[0]]||(e&&!m[2]?m[2]=e:e&&(m[2]=\"(\"+m[2]+\") and (\"+e+\")\"),c.push(m))},c}},function(c,d,k){function e(b,c){for(var e=0;e<b.length;e++){var d=b[e],f=v[d.id];if(f){f.refs++;for(var m=0;m<f.parts.length;m++)f.parts[m](d.parts[m]);for(;m<d.parts.length;m++)f.parts.push(H(d.parts[m],c))}else{f=[];for(m=0;m<d.parts.length;m++)f.push(H(d.parts[m],\nc));v[d.id]={id:d.id,refs:1,parts:f}}}}function f(b,c){for(var e=[],d={},f=0;f<b.length;f++){var m=b[f],k=c.base?m[0]+c.base:m[0],m={css:m[1],media:m[2],sourceMap:m[3]};d[k]?d[k].parts.push(m):e.push(d[k]={id:k,parts:[m]})}return e}function g(b,c){var e=ba(b.insertInto);if(!e)throw Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var d=z[z.length-1];if(\"top\"===b.insertAt)d?d.nextSibling?e.insertBefore(c,d.nextSibling):e.appendChild(c):\ne.insertBefore(c,e.firstChild),z.push(c);else{if(\"bottom\"!==b.insertAt)throw Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");e.appendChild(c)}}function t(b){if(null===b.parentNode)return!1;b.parentNode.removeChild(b);b=z.indexOf(b);0<=b&&z.splice(b,1)}function C(b){var c=document.createElement(\"style\");return b.attrs.type=\"text/css\",n(c,b.attrs),g(b,c),c}function h(b){var c=document.createElement(\"link\");return b.attrs.type=\"text/css\",b.attrs.rel=\"stylesheet\",n(c,b.attrs),\ng(b,c),c}function n(b,c){Object.keys(c).forEach(function(e){b.setAttribute(e,c[e])})}function H(b,c){var e;if(c.transform&&b.css){if(!(e=c.transform(b.css)))return function(){};b.css=e}if(c.singleton){e=W++;var d=Q||(Q=C(c));var f=q.bind(null,d,e,!1);var m=q.bind(null,d,e,!0)}else b.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(d=h(c),f=p.bind(null,d,c),m=function(){t(d);d.href&&\nURL.revokeObjectURL(d.href)}):(d=C(c),f=D.bind(null,d),m=function(){t(d)});return f(b),function(c){c?c.css===b.css&&c.media===b.media&&c.sourceMap===b.sourceMap||f(b=c):m()}}function q(b,c,e,d){e=e?\"\":d.css;b.styleSheet?b.styleSheet.cssText=I(c,e):(e=document.createTextNode(e),d=b.childNodes,d[c]&&b.removeChild(d[c]),d.length?b.insertBefore(e,d[c]):b.appendChild(e))}function D(b,c){var e=c.css;c=c.media;if(c&&b.setAttribute(\"media\",c),b.styleSheet)b.styleSheet.cssText=e;else{for(;b.firstChild;)b.removeChild(b.firstChild);\nb.appendChild(document.createTextNode(e))}}function p(b,c,e){var d=e.css;