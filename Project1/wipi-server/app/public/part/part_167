Exp(/^(https:)?\\/\\//i),l?\"https://\":\"http://\"),t(\"Matching default timing source protocol to manifest protocol: \",e.value))})),y.initialize(r),T.setConfig({metricsModel:g,dashMetrics:m,baseURLController:y}),T.initialize(u,G.getUseManifestDateHeaderTimeSource())}}function fe(){return Y}function he(e){var t=!1;return C&&C.getProcessors().forEach((function(r){r.getMediaInfo().type===e&&(t=!0)})),t}function pe(e,t){t=t||new Date,V&&(C&&C.getProcessors().forEach((function(r){var n=r.getScheduleController();n&&n.finalisePlayList(t,e)})),g.addPlayList(V),V=null)}function ge(e){(V=new qe).start=new Date,V.mstart=1e3*B.getTime(),V.starttype=e,C&&C.getProcessors().forEach((function(e){var t=e.getScheduleController();t&&t.setPlayList(V)}))}function me(e){if(e.error){var r=\"\",n=a.MEDIA_ERROR;switch(this.MEDIA_DOWNLOAD_ERROR=5001,e.error.code){case 1:r=\"MEDIA_ERR_ABORTED\",n=a.MEDIA_ABORTED_ERROR;break;case 2:r=\"MEDIA_ERR_NETWORK\",n=a.MEDIA_NETWORK_ERROR;break;case 3:r=\"MEDIA_ERR_DECODE\",n=a.MEDIA_DECODE_ERROR;break;case 4:r=\"MEDIA_ERR_SRC_NOT_SUPPORTED\",n=a.MEDIA_SUPPORTED_ERROR;break;case 5:r=\"MEDIA_ERR_ENCRYPTED\",n=a.MEDIA_ENCRYPTED_ERROR;break;default:r=\"UNKNOWN\",n=a.MEDIA_UNKNOWN_ERROR}e.errorCode=n,L=!0,e.error.message&&(r+=\" (\"+e.error.message+\")\"),e.error.msExtendedCode&&(r+=\" (0x\"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+\")\"),t(\"Video Element Error: \"+r),e.error&&t(e.error),N.mediaSourceError(r,n),ve()}}function Ee(){return C?C.getStreamInfo():null}function _e(){if(!(l&&l.hasOwnProperty(\"load\")&&D&&D.hasOwnProperty(\"initialize\")&&D.hasOwnProperty(\"reset\")&&D.hasOwnProperty(\"getClientTimeOffset\")))throw new Error(\"setConfig function has to be called previously\")}function Te(e){isNaN(e.newDuration)||ue(e.newDuration)}function ye(){O=[],M=null,w=!1,C=null,L=!1,F=!1,Y=void 0,q=void 0,H=!0,k=!1,b=!0,V=null,Q=void 0,\nW=!1,K=0}function ve(){_e(),T.reset(),pe(L||F?We.FAILURE_STOP_REASON:We.USER_REQUEST_STOP_REASON);for(var e=0,t=O?O.length:0;e<t;e++){O[e].reset(L)}r.off(p.PLAYBACK_TIME_UPDATED,z,this),r.off(p.PLAYBACK_SEEKING,Z,this),r.off(p.PLAYBACK_ERROR,me,this),r.off(p.PLAYBACK_STARTED,J,this),r.off(p.PLAYBACK_PAUSED,$,this),r.off(p.PLAYBACK_ENDED,ie,this),r.off(p.MANIFEST_UPDATED,ce,this),r.off(p.STREAM_BUFFERING_COMPLETED,re,this),r.off(lr.METRIC_ADDED,Ae,this),r.off(p.MANIFEST_VALIDITY_CHANGED,Te,this),y.reset(),u.reset(),g.clearAllCurrentMetrics(),c.setValue(null),l.reset(),D.reset(),I.reset(),x&&(E.detachMediaSource(U),x=null),U=null,M&&(M.setMediaElement(null),M=null,P=null,c.getValue()&&r.trigger(p.PROTECTION_DESTROYED,{data:c.getValue().url})),r.trigger(p.STREAM_TEARDOWN_COMPLETE),ye()}function Ae(e){e.metric===i.DVR_INFO&&e.mediaType===n.AUDIO&&E.setSeekable(x,e.value.range.start,e.value.range.end)}function Re(e){if(-1!==[n.VIDEO,n.AUDIO,n.FRAGMENTED_TEXT].indexOf(e)){var r=m.getCurrentBufferLevel(g.getReadOnlyMetricsFor(e));return r||NaN}return t(\"Warning  - getBufferLength requested for invalid type\"),NaN}return o={initialize:function(t,n){_e(),b=t,P=n,D.initialize(),(u=nr(e).create()).setConfig({manifestModel:c,dashManifestModel:f,mediaPlayerModel:G,manifestLoader:l,errHandler:N}),u.initialize(),y.setConfig({dashManifestModel:f}),r.on(p.TIME_SYNCHRONIZATION_COMPLETED,de,this),r.on(p.PLAYBACK_SEEKING,Z,this),r.on(p.PLAYBACK_TIME_UPDATED,z,this),r.on(p.PLAYBACK_ENDED,ie,this),r.on(p.PLAYBACK_ERROR,me,this),r.on(p.PLAYBACK_STARTED,J,this),r.on(p.PLAYBACK_PAUSED,$,this),r.on(p.MANIFEST_UPDATED,ce,this),r.on(p.STREAM_BUFFERING_COMPLETED,re,this),r.on(p.MANIFEST_VALIDITY_CHANGED,Te,this),r.on(p.WALLCLOCK_TIME_UPDATED,X,this),r.on(lr.METRIC_ADDED,Ae,this)},getActiveStreamInfo:Ee,isVideoTrackPresent:fe,isAudioTrackPresent:function(){return q},switchToVideoElement:function(e){B.initialize(C.getStreamInfo()),oe(e,null,!0)},getStreamById:function(e){return O.filter((function(t){return t.getId()===e}))[0]},getStreamForTime:ne,getDuration:function(){if(C)return C.getStreamInfo().duration},getTimeRelativeToStreamId:function(e,t){for(var r=null,n=0,i=0,a=null,o=O.length,s=0;s<o;s++){if(i=(r=O[s]).getStartTime(),a=r.getDuration(),Number.isFinite(i)&&(n=i),r.getId()===t)return e-n;Number.isFinite(a)&&(n+=a)}return null},load:function(e,t,r){_e(),l.load(e,t,r)},loadWithManifest:function(e){!function(){if(!u||!u.hasOwnProperty(\"setManifest\"))throw new Error(\"initialize function has to be called previously\")}(),u.setManifest(e)},getActiveStreamProcessors:function(){return C?C.getProcessors():[]},setConfig:function(e){e&&(e.capabilities&&(s=e.capabilities),e.manifestLoader&&(l=e.manifestLoader),e.manifestModel&&(c=e.manifestModel),e.dashManifestModel&&(f=e.dashManifestModel),e.mediaPlayerModel&&(G=e.mediaPlayerModel),e.protectionController&&(M=e.protectionController),e.adapter&&(h=e.adapter),e.metricsModel&&(g=e.metricsModel),e.dashMetrics&&(m=e.dashMetrics),e.errHandler&&(N=e.errHandler),e.timelineConverter&&(D=e.timelineConverter),e.videoModel&&(U=e.videoModel),e.playbackController&&(B=e.playbackController),e.domStorage&&(v=e.domStorage),e.abrController&&(A=e.abrController),e.mediaController&&(R=e.mediaController))},setProtectionData:function(e){P=e},setMediaDuration:ue,reset:ve},T=fr(e).getInstance(),y=br(e).getInstance(),E=Lr(e).getInstance(),I=Ne(e).getInstance(),S=nt(e).getInstance(),ye(),o}Fr.__dashjs_factory_name=\"StreamController\";var xr=s.a.getSingletonFactory(Fr);var Ur=function(e){function t(r,i){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this));return a.url=r||null,a.type=i||null,a.mediaType=n.STREAM,a.responseType=\"\",a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t)\n;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(m);function Br(e){e=e||{};var t=this.context,r=d(t).getInstance(),n=xt(t).create({errHandler:e.errHandler,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(e,t,i){var a=function(n,a){t.resolved=!0,t.resolvedContent=n||null,r.trigger(p.XLINK_ELEMENT_LOADED,{element:t,resolveObject:i,error:n||a?null:new S(1,\"Failed loading Xlink element: \"+e)})};if(\"urn:mpeg:dash:resolve-to-zero:2013\"===e)a(null,!0);else{var o=new Ur(e,G.XLINK_TYPE);n.load({request:o,success:function(e){a(e)},error:function(){a(null)}})}},reset:function(){n&&(n.abort(),n=null)}}}Br.__dashjs_factory_name=\"XlinkLoader\";var Gr=s.a.getClassFactory(Br);Gr.XLINK_LOADER_ERROR_LOADING_FAILURE=1,s.a.updateClassFactory(Br.__dashjs_factory_name,Gr);var kr=Gr;var Hr=function(e){e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0);void 0===e.attributePrefix&&(e.attributePrefix=\"_\");e.arrayAccessForm=e.arrayAccessForm||\"none\",e.emptyNodeForm=e.emptyNodeForm||\"text\",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0);e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0);void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0);e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1);e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1);void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}();var t=1,r=3,n=4,i=8,a=9;function o(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&\"\"!=t||(t=e.nodeName),t}function s(e){return\"string\"==typeof e?e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&apos;\"):e}function u(e,t,r,n){for(var i=0;i<e.length;i++){var a=e[i];if(\"string\"==typeof a){if(a==n)break}else if(a instanceof RegExp){if(a.test(n))break}else if(\"function\"==typeof a&&a(t,r,n))break}return i!=e.length}function l(t,r,n){switch(e.arrayAccessForm){case\"property\":t[r]instanceof Array?t[r+\"_asArray\"]=t[r]:t[r+\"_asArray\"]=[t[r]]}!(t[r]instanceof Array)&&e.arrayAccessFormPaths.length>0&&u(e.arrayAccessFormPaths,t,r,n)&&(t[r]=[t[r]])}function d(e){var t=e.split(/[-T:+Z]/g),r=new Date(t[0],t[1]-1,t[2]),n=t[5].split(\".\");if(r.setHours(t[3],t[4],n[0]),n.length>1&&r.setMilliseconds(n[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+(\"-\"==(/\\d\\d-\\d\\d:\\d\\d$/.test(e)?\"-\":\"+\")?-1*i:i),r.setMinutes(r.getMinutes()-i-r.getTimezoneOffset())}else-1!==e.indexOf(\"Z\",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())));return r}function c(r,n,i,a){return!(n==t&&e.xmlElementsFilter.length>0)||u(e.xmlElementsFilter,r,i,a)}function f(s,h){if(s.nodeType==a){for(var p=new Object,g=s.childNodes,m=0;m<g.length;m++){if((_=g[m]).nodeType==t)if(e.ignoreRoot)p=f(_);else(p={})[T=o(_)]=f(_)}return p}if(s.nodeType==t){(p=new Object).__cnt=0;var E=[];for(g=s.childNodes,m=0;m<g.length;m++){var _,T=o(_=g[m]);if(_.nodeType!=i){var y=h+\".\"+T;if(c(p,_.nodeType,T,y))if(p.__cnt++,null==p[T]){var v=f(_,y);if(\"#text\"!=T||/[^\\s]/.test(v))(A={})[T]=v,E.push(A);p[T]=v,l(p,T,y)}else{null!=p[T]&&(p[T]instanceof Array||(p[T]=[p[T]],l(p,T,y)));var A;v=f(_,y);if(\"#text\"!=T||/[^\\s]/.test(v))(A={})[T]=v,E.push(A);p[T][p[T].length]=v}}}p.__children=E;for(var R=o(s),I=0;I<s.attributes.length;I++){var S=s.attributes[I];p.__cnt++;for(var N=S.value,D=0,O=e.matchers.length;D<O;D++){var C=e.matchers[D];C.test(S,R)&&(N=C.converter(S.value))}p[e.attributePrefix+S.name]=N}var M=function(e){return e.prefix}(s);return null!=M&&\"\"!=M&&(p.__cnt++,p.__prefix=M),null!=p[\"#text\"]&&(p.__text=p[\"#text\"],p.__text instanceof Array&&(p.__text=p.__text.join(\"\\n\")),e.stripWhitespaces&&(p.__text=p.__text.trim()),delete p[\"#text\"],\n\"property\"==e.arrayAccessForm&&delete p[\"#text_asArray\"],p.__text=function(t,r,n){if(e.datetimeAccessFormPaths.length>0){var i=n.split(\".#\")[0];return u(e.datetimeAccessFormPaths,t,r,i)?d(t):t}return t}(p.__text,T,h+\".\"+T)),null!=p[\"#cdata-section\"]&&(p.__cdata=p[\"#cdata-section\"],delete p[\"#cdata-section\"],\"property\"==e.arrayAccessForm&&delete p[\"#cdata-section_asArray\"]),0==p.__cnt&&\"text\"==e.emptyNodeForm?p=\"\":1==p.__cnt&&null!=p.__text?p=p.__text:1!=p.__cnt||null==p.__cdata||e.keepCData?p.__cnt>1&&null!=p.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&\"\"==p.__text||\"\"==p.__text.trim())&&delete p.__text:p=p.__cdata,delete p.__cnt,!e.enableToStringFunc||null==p.__text&&null==p.__cdata||(p.toString=function(){return(null!=this.__text?this.__text:\"\")+(null!=this.__cdata?this.__cdata:\"\")}),p}if(s.nodeType==r||s.nodeType==n)return s.nodeValue}function h(t,r,n,i){var a=\"<\"+(null!=t&&null!=t.__prefix?t.__prefix+\":\":\"\")+r;if(null!=n)for(var o=0;o<n.length;o++){var u=n[o],l=t[u];e.escapeMode&&(l=s(l)),a+=\" \"+u.substr(e.attributePrefix.length)+\"=\",e.useDoubleQuotes?a+='\"'+l+'\"':a+=\"'\"+l+\"'\"}return a+=i?\"/>\":\">\"}function p(e,t){return\"</\"+(null!=e.__prefix?e.__prefix+\":\":\"\")+t+\">\"}function g(t,r){return\"property\"==e.arrayAccessForm&&(n=r.toString(),i=\"_asArray\",-1!==n.indexOf(i,n.length-i.length))||0==r.toString().indexOf(e.attributePrefix)||0==r.toString().indexOf(\"__\")||t[r]instanceof Function;var n,i}function m(e){var t=0;if(e instanceof Object)for(var r in e)g(e,r)||t++;return t}function E(t,r,n){return 0==e.jsonPropertiesFilter.length||\"\"==n||u(e.jsonPropertiesFilter,t,r,n)}function _(t){var r=[];if(t instanceof Object)for(var n in t)-1==n.toString().indexOf(\"__\")&&0==n.toString().indexOf(e.attributePrefix)&&r.push(n);return r}function T(t){var r=\"\";return t instanceof Object?r+=function(t){var r=\"\";return null!=t.__cdata&&(r+=\"<![CDATA[\"+t.__cdata+\"]]>\"),null!=t.__text&&(e.escapeMode?r+=s(t.__text):r+=t.__text),r}(t):null!=t&&(e.escapeMode?r+=s(t):r+=t),r}function y(e,t){return\"\"===e?t:e+\".\"+t}function v(e,t,r,n){var i=\"\";if(0==e.length)i+=h(e,t,r,!0);else for(var a=0;a<e.length;a++)i+=h(e[a],t,_(e[a]),!1),i+=A(e[a],y(n,t)),i+=p(e[a],t);return i}function A(e,t){var r=\"\";if(m(e)>0)for(var n in e)if(!g(e,n)&&(\"\"==t||E(e,n,y(t,n)))){var i=e[n],a=_(i);if(null==i||null==i)r+=h(i,n,a,!0);else if(i instanceof Object)if(i instanceof Array)r+=v(i,n,a,t);else if(i instanceof Date)r+=h(i,n,a,!1),r+=i.toISOString(),r+=p(i,n);else{m(i)>0||null!=i.__text||null!=i.__cdata?(r+=h(i,n,a,!1),r+=A(i,y(t,n)),r+=p(i,n)):r+=h(i,n,a,!0)}else r+=h(i,n,a,!1),r+=T(i),r+=p(i,n)}return r+=T(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var r=new window.DOMParser;try{(t=r.parseFromString(e,\"text/xml\")).getElementsByTagNameNS(\"*\",\"parsererror\").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf(\"<?\")&&(e=e.substr(e.indexOf(\"?>\")+2)),(t=new ActiveXObject(\"Microsoft.XMLDOM\")).async=\"false\",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():\"number\"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return\"string\"==typeof e?d(e):e},this.xml2json=function(e){return f(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return A(e,\"\")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return\"1.2.0\"}},Vr=\"onLoad\",Yr=\"Period\",qr=\"AdaptationSet\",Wr=\"EventStream\";function Qr(e){e=e||{};var t=this.context,r=d(t).getInstance(),n=nt(t).getInstance(),i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;function c(e,t,r){var i={},a=void 0,o=void 0;i.elements=e,i.type=t,i.resolveType=r,0===i.elements.length&&h(i);for(var s=0;s<i.elements.length;s++)a=i.elements[s],o=n.isHTTPURL(a.url)?a.url:a.originalContent.BaseURL+a.url,l.load(o,a,i)}function f(e){var t,r=void 0,n=\"\";if(r=e.element,t=e.resolveObject,\nr.resolvedContent){var i=0;0===r.resolvedContent.indexOf(\"<?xml\")&&(i=r.resolvedContent.indexOf(\"?>\")+2),n=r.resolvedContent.substr(0,i)+\"<response>\"+r.resolvedContent.substr(i)+\"</response>\",r.resolvedContent=u.xml_str2json(n)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&h(t)}function h(e){var t=[],n=void 0,i=void 0;if(function(e){var t=[],r=void 0,n=void 0,i=void 0,a=void 0,u=void 0,l=void 0;for(a=e.elements.length-1;a>=0;a--){if(n=(r=e.elements[a]).type+\"_asArray\",r.resolvedContent){if(r.resolvedContent)for(u=0;u<r.resolvedContent[n].length;u++)i=r.resolvedContent[n][u],t.push(i)}else delete r.originalContent[\"xlink:actuate\"],delete r.originalContent[\"xlink:href\"],t.push(r.originalContent);for(r.parentElement[n].splice(r.index,1),l=0;l<t.length;l++)r.parentElement[n].splice(r.index+l,0,t[l]);t=[]}e.elements.length>0&&o.run(s)}(e),\"onActuate\"===e.resolveType&&r.trigger(p.XLINK_READY,{manifest:s}),e.resolveType===Vr)switch(e.type){case Yr:for(n=0;n<s.Period_asArray.length;n++)(i=s.Period_asArray[n]).hasOwnProperty(\"AdaptationSet_asArray\")&&(t=t.concat(g(i.AdaptationSet_asArray,i,qr,Vr))),i.hasOwnProperty(\"EventStream_asArray\")&&(t=t.concat(g(i.EventStream_asArray,i,Wr,Vr)));c(t,qr,Vr);break;case qr:r.trigger(p.XLINK_READY,{manifest:s})}}function g(e,t,r,n){var i=[],a=void 0,o=void 0,s=void 0;for(o=e.length-1;o>=0;o--)(a=e[o]).hasOwnProperty(\"xlink:href\")&&\"urn:mpeg:dash:resolve-to-zero:2013\"===a[\"xlink:href\"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty(\"xlink:href\")&&a.hasOwnProperty(\"xlink:actuate\")&&a[\"xlink:actuate\"]===n&&(s=m(a[\"xlink:href\"],t,r,o,n,a),i.push(s));return i}function m(e,t,r,n,i,a){return{url:e,parentElement:t,type:r,index:n,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}return i={resolveManifestOnLoad:function(e){u=new Hr({escapeMode:!1,attributePrefix:\"\",arrayAccessForm:\"property\",emptyNodeForm:\"object\",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),c(g((s=e).Period_asArray,s,Yr,Vr),Yr,Vr)},setMatchers:function(e){e&&(a=e)},setIron:function(e){e&&(o=e)},reset:function(){r.off(p.XLINK_ELEMENT_LOADED,f,i),l&&(l.reset(),l=null)}},r.on(p.XLINK_ELEMENT_LOADED,f,i),l=kr(t).create({errHandler:e.errHandler,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),i}Qr.__dashjs_factory_name=\"XlinkController\";var Kr=s.a.getClassFactory(Qr),jr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};function zr(e){function t(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function r(e,r,n){for(var i=0,a=e.length;i<a;++i){var o=e[i];if(r[o.name])if(n[o.name]){if(o.merge){var s=r[o.name],u=n[o.name];\"object\"===(void 0===s?\"undefined\":jr(s))&&\"object\"===(void 0===u?\"undefined\":jr(u))?t(s,u):n[o.name]=s+u}}else n[o.name]=r[o.name]}}function n(e,t){for(var i=0,a=e.children.length;i<a;++i){var o=e.children[i],s=t[o.name+\"_asArray\"];if(s)for(var u=0,l=s.length;u<l;++u){var d=s[u];r(e.properties,t,d),n(o,d)}}}return{run:function(t){if(null===t||\"object\"!==(void 0===t?\"undefined\":jr(t)))return t;if(\"period\"in e)for(var r=e.period,i=t.Period_asArray,a=0,o=i.length;a<o;++a){var s=i[a];if(n(r,s),\"adaptationset\"in e){var u=s.AdaptationSet_asArray;if(u)for(var l=e.adaptationset,d=0,c=u.length;d<c;++d)n(l,u[d])}}return t}}}zr.__dashjs_factory_name=\"ObjectIron\";var Xr=s.a.getClassFactory(zr),Zr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Jr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._test=t,this._converter=r}return Zr(e,[{key:\"test\",get:function(){return this._test}},{key:\"converter\",get:function(){\nreturn this._converter}}]),e}();function $r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var en=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this,(function(e,t){var r,n=($r(r={},Je.MPD,[Je.ID,Je.PROFILES]),$r(r,Je.PERIOD,[Je.ID]),$r(r,Je.BASE_URL,[Je.SERVICE_LOCATION,Je.BYTE_RANGE]),$r(r,Je.SEGMENT_BASE,[Je.INDEX_RANGE]),$r(r,Je.INITIALIZATION,[Je.RANGE]),$r(r,Je.REPRESENTATION_INDEX,[Je.RANGE]),$r(r,Je.SEGMENT_LIST,[Je.INDEX_RANGE]),$r(r,Je.BITSTREAM_SWITCHING,[Je.RANGE]),$r(r,Je.SEGMENT_URL,[Je.MEDIA_RANGE,Je.INDEX_RANGE]),$r(r,Je.SEGMENT_TEMPLATE,[Je.INDEX_RANGE,Je.MEDIA,Je.INDEX,Je.INITIALIZATION_MINUS,Je.BITSTREAM_SWITCHING_MINUS]),$r(r,Je.ASSET_IDENTIFIER,[Je.VALUE,Je.ID]),$r(r,Je.EVENT_STREAM,[Je.VALUE]),$r(r,Je.ADAPTATION_SET,[Je.PROFILES,Je.MIME_TYPE,Je.SEGMENT_PROFILES,Je.CODECS,Je.CONTENT_TYPE]),$r(r,Je.FRAME_PACKING,[Je.VALUE,Je.ID]),$r(r,Je.AUDIO_CHANNEL_CONFIGURATION,[Je.VALUE,Je.ID]),$r(r,Je.CONTENT_PROTECTION,[Je.VALUE,Je.ID]),$r(r,Je.ESSENTIAL_PROPERTY,[Je.VALUE,Je.ID]),$r(r,Je.SUPPLEMENTAL_PROPERTY,[Je.VALUE,Je.ID]),$r(r,Je.INBAND_EVENT_STREAM,[Je.VALUE,Je.ID]),$r(r,Je.ACCESSIBILITY,[Je.VALUE,Je.ID]),$r(r,Je.ROLE,[Je.VALUE,Je.ID]),$r(r,Je.RATING,[Je.VALUE,Je.ID]),$r(r,Je.VIEWPOINT,[Je.VALUE,Je.ID]),$r(r,Je.CONTENT_COMPONENT,[Je.CONTENT_TYPE]),$r(r,Je.REPRESENTATION,[Je.ID,Je.DEPENDENCY_ID,Je.MEDIA_STREAM_STRUCTURE_ID]),$r(r,Je.SUBSET,[Je.ID]),$r(r,Je.METRICS,[Je.METRICS_MINUS]),$r(r,Je.REPORTING,[Je.VALUE,Je.ID]),r);if(n.hasOwnProperty(t)){var i=n[t];return void 0!==i&&i.indexOf(e.name)>=0}return!1}),(function(e){return String(e)})))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Jr);var tn=/^([-])?P(([\\d.]*)Y)?(([\\d.]*)M)?(([\\d.]*)D)?T?(([\\d.]*)H)?(([\\d.]*)M)?(([\\d.]*)S)?/,rn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this,(function(e){for(var t=[Je.MIN_BUFFER_TIME,Je.MEDIA_PRESENTATION_DURATION,Je.MINIMUM_UPDATE_PERIOD,Je.TIMESHIFT_BUFFER_DEPTH,Je.MAX_SEGMENT_DURATION,Je.MAX_SUBSEGMENT_DURATION,n.SUGGESTED_PRESENTATION_DELAY,Je.START,n.START_TIME,Je.DURATION],r=t.length,i=0;i<r;i++)if(e.nodeName===t[i])return tn.test(e.value);return!1}),(function(e){var t=tn.exec(e),r=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(r=-r),r})))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Jr);var nn=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,an=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this,(function(e){return nn.test(e.value)}),(function(e){var t=nn.exec(e),r=void 0\n;if(r=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var n=60*parseInt(t[9],10)+parseInt(t[10],10);r+=(\"+\"===t[8]?-1:1)*n*60*1e3}return new Date(r)})))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Jr);var on=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,sn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this,(function(e){return on.test(e.value)}),(function(e){return parseFloat(e)})))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Jr),un=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ln=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var r;this._name=t,this._merge=(r=t)&&r.length&&r.charAt(0)===r.charAt(0).toUpperCase()}return un(e,[{key:\"name\",get:function(){return this._name}},{key:\"merge\",get:function(){return this._merge}}]),e}(),dn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var cn=function(){function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._name=t||\"\",this._properties=[],this._children=n||[],Array.isArray(r)&&r.forEach((function(e){i._properties.push(new ln(e))}))}return dn(e,[{key:\"name\",get:function(){return this._name}},{key:\"children\",get:function(){return this._children}},{key:\"properties\",get:function(){return this._properties}}]),e}();var fn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var r=[Je.PROFILES,Je.WIDTH,Je.HEIGHT,Je.SAR,Je.FRAMERATE,Je.AUDIO_SAMPLING_RATE,Je.MIME_TYPE,Je.SEGMENT_PROFILES,Je.CODECS,Je.MAXIMUM_SAP_PERIOD,Je.START_WITH_SAP,Je.MAX_PLAYOUT_RATE,Je.CODING_DEPENDENCY,Je.SCAN_TYPE,Je.FRAME_PACKING,Je.AUDIO_CHANNEL_CONFIGURATION,Je.CONTENT_PROTECTION,Je.ESSENTIAL_PROPERTY,Je.SUPPLEMENTAL_PROPERTY,Je.INBAND_EVENT_STREAM];return function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this,Je.ADAPTATION_SET,r,[new cn(Je.REPRESENTATION,r,[new cn(Je.SUB_REPRESENTATION,r)])]))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(cn);var hn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var r=[Je.SEGMENT_BASE,Je.SEGMENT_TEMPLATE,Je.SEGMENT_LIST];return function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\n;return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,e.call(this,Je.PERIOD,r,[new cn(Je.ADAPTATION_SET,r,[new cn(Je.REPRESENTATION,r)])]))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(cn);function pn(){var e,t=this.context,r=_(t).getInstance().log,n=void 0,i=void 0,a=void 0;return e={parse:function(e){var t,n=window.performance.now();if(!(t=i.xml_str2json(e)))throw new Error(\"parsing the manifest failed\");var o=window.performance.now();a.run(t);var s=window.performance.now();return r(\"Parsing complete: ( xml2json: \"+(o-n).toPrecision(3)+\"ms, objectiron: \"+(s-o).toPrecision(3)+\"ms, total: \"+((s-n)/1e3).toPrecision(3)+\"s)\"),t},getMatchers:function(){return n},getIron:function(){return a}},n=[new rn,new an,new sn,new en],i=new Hr({escapeMode:!1,attributePrefix:\"\",arrayAccessForm:\"property\",emptyNodeForm:\"object\",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),a=Xr(t).create({adaptationset:new fn,period:new hn}),e}pn.__dashjs_factory_name=\"DashParser\";var gn=s.a.getClassFactory(pn),mn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};function En(){var e,t=this.context,r=_(t).getInstance().log,n=void 0;function i(e,t){return t?e&&e.replace(/http:\\/\\//g,\"https://\"):e}return e={parse:function(e,t){var n={},a=window.performance.now();try{e=function e(t){var r={};if(t instanceof Object){var n=function(n){var i=n.replace(/[\\x41-\\x5A]/g,(function(e,t){var r=String.fromCharCode(e.charCodeAt(0)+32);return t?\"_\"+r:r}));\"[object Array]\"===Object.prototype.toString.call(t[n])?(r[i]=[],t[n].forEach((function(t){r[i].push(e(t))}))):\"[object Object]\"===Object.prototype.toString.call(t[n])?r[i]=e(t[n]):r[i]=t[n]};for(var i in t)n(i)}else r=t;return r}(e)}catch(e){throw new Error(\"Convert bilibili mpd failed, \"+e)}if(n.ProgramInformation={Title:\"\"},n.loadedTime=new Date,n.mediaPresentationDuration=e.duration,n.minBufferTime=e.min_buffer_time,n.profiles=\"urn:mpeg:dash:profile:isoff-on-demand:2011\",n.xmlns=\"urn:mpeg:dash:profile:isoff-on-demand:2011\",n.type=\"static\",n.interactive=\"interactive\"===e.type,n.originalUrl=location.href,n.url=location.href,n.Period={duration:e.duration,AdaptationSet:[]},e.video&&(n.Period.AdaptationSet[0]={},n.Period.AdaptationSet[0].Representation=e.video.map((function(e){var r={__text:i(e.base_url,t)};return e.backup_url&&e.backup_url.forEach((function(e,n){r[\"backupUrl\"+(n+1)]=i(e,t)})),{BaseURL:r,SegmentBase:{Initialization:{range:e.segment_base.initialization},indexRange:e.segment_base.index_range,indexRangeExact:\"true\"},bandwidth:e.bandwidth,codecs:e.codecs,frameRate:e.frame_rate,height:e.height,width:e.width,id:e.id+\"\",mimeType:e.mime_type,sar:e.sar,startWithSAP:e.start_with_sap}}))),e.audio&&(n.Period.AdaptationSet[1]={},n.Period.AdaptationSet[1].Representation=e.audio.map((function(e){var r={__text:i(e.base_url,t)};return e.backup_url&&e.backup_url.forEach((function(e,n){r[\"backupUrl\"+(n+1)]=i(e,t)})),{BaseURL:r,SegmentBase:{Initialization:{range:e.segment_base.initialization},indexRange:e.segment_base.index_range,indexRangeExact:\"true\"},bandwidth:e.bandwidth,codecs:e.codecs,id:e.id+\"\",mimeType:e.mime_type}}))),n.ProgramInformation={Title:\"\"},function e(t){var r=\"[object Array]\"!==Object.prototype.toString.call(t);for(var n in t)\"object\"===mn(t[n])&&(e(t[n]),r&&(t[n+\"_asArray\"]=\"[object Array]\"===Object.prototype.toString.call(t[n])?t[n]:[t[n]]))}(n),!n)throw new Error(\"parsing the manifest failed\");var o=window.performance.now(),s=window.performance.now();return r(\"Parsing complete: ( xml2json: \"+(o-a).toPrecision(3)+\"ms, objectiron: \"+(s-o).toPrecision(3)+\"ms, total: \"+((s-a)/1e3).toPrecision(3)+\"s)\"),n},getMatchers:function(){return null},\ngetIron:function(){return n}},n=Xr(t).create({adaptationset:new fn,period:new hn}),e}En.__dashjs_factory_name=\"DashBilibiliParser\";var _n=s.a.getClassFactory(En);function Tn(e){e=e||{};var t=this.context,r=d(t).getInstance(),i=nt(t).getInstance(),o=_(t).getInstance().log,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,h=e.mssHandler,g=e.errHandler;function m(e){r.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function E(e,s,u,d){if(l){var g=void 0,m=void 0,E=void 0;if(window.location&&window.location&&\"https:\"===window.location.protocol&&(f=!0),d&&d!==e?(m=i.parseBaseUrl(d),g=d):(i.isRelative(e)&&(e=i.resolve(e,window.location.href)),m=i.parseBaseUrl(e)),null===c&&(c=function(e){var r=null;return e.video||e.audio?_n(t).create():e.indexOf(\"SmoothStreamingMedia\")>-1?(h&&(r=h.createMssParser(),h.registerEvents()),r):e.indexOf(\"MPD\")>-1?gn(t).create():r}(s)),null!==c){l.setMatchers(c.getMatchers()),l.setIron(c.getIron());try{E=c.parse(s,f)}catch(t){return void r.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new S(1,\"Failed parsing manifest : \"+(d?e:\"MPD String\"),null,a.MANIFEST_RESOLVE_ERROR)})}E?(E.url=g||e,E.originalUrl||(E.originalUrl=E.url),E.hasOwnProperty(n.LOCATION)&&(m=i.parseBaseUrl(E.Location_asArray[0]),o(\"BaseURI set by Location to: \"+m)),E.baseUri=function(e,t){if(t)return e&&e.replace(/http:\\/\\//g,\"https://\");return e}(m,f),E.loadedTime=new Date,l.resolveManifestOnLoad(E)):r.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new S(1,\"parsing failed\",null,a.MANIFEST_ERROR)})}else r.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new S(1,\"Failed detecting manifest type or manifest type unsupported : \"+(d?e:\"MPD String\"),null,a.MANIFEST_TYPE_ERROR)})}}return s={load:function(e,t){if(f=t,!e||\"string\"!=typeof e||0!==e.indexOf(\"http\")&&0!==e.indexOf(\"/\"))E(\"\",e,\"OK\",\"\");else{var n=new Ur(e,G.MPD_TYPE);u.load({request:n,success:function(t,r,n){E(e,t,r,n)},error:function(t,n,i,o){r.trigger(p.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new S(2,\"Failed loading manifest: \"+e+\", \"+i,null,a.MANIFEST_DOWNLOAD_ERROR,o)})}})}},reset:function(){r.off(p.XLINK_READY,m,s),l&&(l.reset(),l=null),u&&(u.abort(),u=null),h&&h.reset()}},r.on(p.XLINK_READY,m,s),u=xt(t).create({errHandler:g,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),l=Kr(t).create({errHandler:g,videoModel:e.videoModel,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),c=null,s}Tn.__dashjs_factory_name=\"ManifestLoader\";var yn=s.a.getClassFactory(Tn);yn.MANIFEST_LOADER_ERROR_PARSING_FAILURE=1,yn.MANIFEST_LOADER_ERROR_LOADING_FAILURE=2,s.a.updateClassFactory(Tn.__dashjs_factory_name,yn);var vn=yn;function An(){var e,t=void 0;return e={supportsMediaSource:function(){var e=\"WebKitMediaSource\"in window,t=\"MediaSource\"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!(!(\"MediaSource\"in window)||!MediaSource.isTypeSupported(e))||!(!(\"WebKitMediaSource\"in window)||!WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}},t=!1,e}An.__dashjs_factory_name=\"Capabilities\";var Rn=s.a.getSingletonFactory(An);function In(){var e=this.context,t=d(e).getInstance(),r=void 0;return{getValue:function(){return r},setValue:function(e){r=e,e&&t.trigger(p.MANIFEST_LOADED,{data:e})}}}In.__dashjs_factory_name=\"ManifestModel\";var Sn=s.a.getSingletonFactory(In);var Nn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]};var Dn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};var On=function e(){!function(e,t){\nif(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};var Cn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.t=null,this.level=null};var Mn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.target=null,this.state=Fe.BUFFER_EMPTY};var Pn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.time=null,this.range=null,this.manifestInfo=null};var bn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.time=null,this.droppedFrames=null};function wn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var Ln=function e(){wn(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Fn=function e(){wn(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},xn=function e(){wn(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};var Un=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};var Bn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.loadingRequests=[],this.executedRequests=[]};function Gn(){var e,t=this.context,r=d(t).getInstance(),a=void 0;function o(){r.trigger(p.METRICS_CHANGED)}function s(e){r.trigger(p.METRIC_CHANGED,{mediaType:e}),o()}function u(e,t,n){r.trigger(p.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),s(e)}function l(e,t,n){r.trigger(p.METRIC_ADDED,{mediaType:e,metric:t,value:n}),s(e)}function c(e){var t=void 0;return a.hasOwnProperty(e)?t=a[e]:(t=new Nn,a[e]=t),t}function f(e,t,r){var n=c(e);n[t].push(r),n[t].length>1e3&&n[t].shift()}function h(e,t,r){f(e,t,r),l(e,t,r)}return e={clearCurrentMetricsForType:function(e){delete a[e],s(e)},clearAllCurrentMetrics:function(){a={},o()},getReadOnlyMetricsFor:function(e){return a.hasOwnProperty(e)?a[e]:null},getMetricsFor:c,addTcpConnection:function(e,t,r,n,a,o){var s=new Dn;return s.tcpid=t,s.dest=r,s.topen=n,s.tclose=a,s.tconnect=o,h(e,i.TCP_CONNECTION,s),s},addHttpRequest:function e(t,r,n,a,o,s,u,l,d,c,f,p,g,m){var E=new G;return o&&o!==a&&(e(t,null,n,a,null,null,u,l,null,null,null,p,null,null),E.actualurl=o),E.tcpid=r,E.type=n,E.url=a,E.range=u,E.trequest=l,E.tresponse=d,E.responsecode=f,E._tfinish=c,E._stream=t,E._mediaduration=p,E._responseHeaders=g,E._serviceLocation=s,m?m.forEach((function(e){!function(e,t,r,n){var i=new k;i.s=t,i.d=r,i.b=n,e.trace.push(i),e.interval||(e.interval=0),e.interval+=r}(E,e.s,e.d,e.b)})):(delete E.interval,delete E.trace),h(t,i.HTTP_REQUEST,E),E},addRepresentationSwitch:function(e,t,r,n,a){var o=new On;return o.t=t,o.mt=r,o.to=n,a?o.lto=a:delete o.lto,h(e,i.TRACK_SWITCH,o),o},addBufferLevel:function(e,t,r){var n=new Cn;return n.t=t,n.level=r,h(e,i.BUFFER_LEVEL,n),n},addBufferState:function(e,t,r){var n=new Mn;return n.target=r,n.state=t,h(e,i.BUFFER_STATE,n),n},addDVRInfo:function(e,t,r,n){var a=new Pn;return a.time=t,a.range=n,a.manifestInfo=r,h(e,i.DVR_INFO,a),a},addDroppedFrames:function(e,t){var r=new bn,n=c(e).DroppedFrames;return r.time=t.creationTime,r.droppedFrames=t.droppedVideoFrames,n.length>0&&n[n.length-1]==r?n[n.length-1]:(h(e,i.DROPPED_FRAMES,r),r)},addSchedulingInfo:function(e,t,r,n,a,o,s,u,l){var d=new Un;return d.mediaType=e,d.t=t,d.type=r,d.startTime=n,d.availabilityStartTime=a,d.duration=o,\nd.quality=s,d.range=u,d.state=l,h(e,i.SCHEDULING_INFO,d),d},addRequestsQueue:function(e,t,r){var n=new Bn;n.loadingRequests=t,n.executedRequests=r,c(e).RequestsQueue=n,l(e,i.REQUESTS_QUEUE,n)},addManifestUpdate:function(e,t,r,a,o,s,u,d,c,h){var p=new Ln;return p.mediaType=e,p.type=t,p.requestTime=r,p.fetchTime=a,p.availabilityStartTime=o,p.presentationStartTime=s,p.clientTimeOffset=u,p.currentTime=d,p.buffered=c,p.latency=h,f(n.STREAM,i.MANIFEST_UPDATE,p),l(e,i.MANIFEST_UPDATE,p),p},updateManifestUpdateInfo:function(e,t){if(e){for(var r in t)e[r]=t[r];u(e.mediaType,i.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,r,n,a){if(e){var o=new Fn;return o.id=t,o.index=r,o.start=n,o.duration=a,e.streamInfo.push(o),u(e.mediaType,i.MANIFEST_UPDATE_STREAM_INFO,e),o}return null},addManifestUpdateRepresentationInfo:function(e,t,r,n,a,o,s,l){if(e){var d=new xn;return d.id=t,d.index=r,d.streamIndex=n,d.mediaType=a,d.startNumber=s,d.fragmentInfoType=l,d.presentationTimeOffset=o,e.representationInfo.push(d),u(e.mediaType,i.MANIFEST_UPDATE_TRACK_INFO,e),d}return null},addPlayList:function(e){var t=n.STREAM;return e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty(\"subreplevel\")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,h(t,i.PLAY_LIST,e),e},addDVBErrors:function(e){return h(n.STREAM,i.DVB_ERRORS,e),e},setConfig:function(e){e&&e.adapter&&e.adapter}},a={},e}Gn.__dashjs_factory_name=\"MetricsModel\";var kn=s.a.getSingletonFactory(Gn);function Hn(){var e=void 0,t=void 0,r=void 0,n=void 0,i=this.context,a=_(i).getInstance().log,o=d(i).getInstance(),s=[];function u(){e&&(e.playbackRate=n||1,e.removeEventListener(\"canplay\",u))}function l(){return s.length>0}function c(t){var r,i=s.indexOf(t),a=void 0;null!==t&&(-1!==i&&s.splice(i,1),e&&!1===l()&&0===e.playbackRate&&(r=n||1,e&&(e.readyState<=2&&r>0?e.addEventListener(\"canplay\",u):e.playbackRate=r),e.paused||((a=document.createEvent(\"Event\")).initEvent(\"playing\",!0,!1),e.dispatchEvent(a))))}function f(){if(e&&l()&&0===e.playbackRate){var t=document.createEvent(\"Event\");t.initEvent(\"waiting\",!0,!1),e.dispatchEvent(t)}}return{initialize:function(){o.on(p.PLAYBACK_PLAYING,f,this)},setCurrentTime:function(t){if(e){if(e.currentTime==t)return;try{e.currentTime=t}catch(r){0===e.readyState&&r.code===r.INVALID_STATE_ERR&&setTimeout((function(){e.currentTime=t}),400)}}},play:function(){if(e){e.autoplay=!0;var t=e.play();t&&\"undefined\"!=typeof Promise&&t instanceof Promise&&t.catch((function(e){\"NotAllowedError\"===e.name&&o.trigger(p.PLAYBACK_NOT_ALLOWED),a(\"Caught pending play exception - continuing (\"+e+\")\")}))}},isPaused:function(){return e?e.paused:null},pause:function(){e&&(e.pause(),e.autoplay=!1)},isSeeking:function(){return e?e.seeking:null},getTime:function(){return e?e.currentTime:null},getPlaybackRate:function(){return e?e.playbackRate:null},getPlayedRanges:function(){return e?e.played:null},getEnded:function(){return e?e.ended:null},setStallState:function(t,r){!function(t,r){r?function(t){var r=void 0;if(null===t||e.seeking||-1!==s.indexOf(t))return;s.push(t),e&&1===s.length&&((r=document.createEvent(\"Event\")).initEvent(\"waiting\",!0,!1),n=e.playbackRate,e.dispatchEvent(r))}(t):c(t)}(t,r)},getElement:function(){return e},setElement:function(t){if(null!=t&&(!t||!t.nodeName||\"VIDEO\"!==t.nodeName&&\"AUDIO\"!==t.nodeName))throw\"element is not video or audio DOM type!\";(e=t)&&(e.preload=\"auto\")},setSource:function(t){e&&(t?e.src=t:(e.removeAttribute(\"src\"),e.load()))},getSource:function(){return e?e.src:null},getVideoContainer:function(){return r},setVideoContainer:function(e){r=e},getTTMLRenderingDiv:function(){return t},setTTMLRenderingDiv:function(e){(t=e).style.position=\"absolute\",t.style.display=\"flex\",t.style.overflow=\"hidden\",t.style.pointerEvents=\"none\",t.style.top=0,t.style.left=0},getPlaybackQuality:function(){if(!e)return null;var t=\"webkitDroppedFrameCount\"in e&&\"webkitDecodedFrameCount\"in e,r=null;return\"getVideoPlaybackQuality\"in e?r=e.getVideoPlaybackQuality():t&&(r={droppedVideoFrames:e.webkitDroppedFrameCount,\ntotalVideoFrames:e.webkitDroppedFrameCount+e.webkitDecodedFrameCount,creationTime:new Date}),r},addEventListener:function(t,r){e&&e.addEventListener(t,r)},removeEventListener:function(t,r){e&&e.removeEventListener(t,r)},getReadyState:function(){return e?e.readyState:NaN},getBufferRange:function(){return e?e.buffered:null},getClientWidth:function(){return e?e.clientWidth:NaN},getClientHeight:function(){return e?e.clientHeight:NaN},getTextTracks:function(){return e?e.textTracks:[]},getTextTrack:function(t,r,n,i,a){if(e)for(var o=0;o<e.textTracks.length;o++)if(e.textTracks[o].kind===t&&(!r||e.textTracks[o].label==r)&&e.textTracks[o].language===n&&e.textTracks[o].isTTML===i&&e.textTracks[o].isEmbedded===a)return e.textTracks[o];return null},addTextTrack:function(t,r,n){return e?e.addTextTrack(t,r,n):null},appendChild:function(t){e&&(e.appendChild(t),void 0!==t.isTTML&&(e.textTracks[e.textTracks.length-1].isTTML=t.isTTML,e.textTracks[e.textTracks.length-1].isEmbedded=t.isEmbedded))},removeChild:function(t){e&&e.removeChild(t)},getVideoWidth:function(){return e?e.videoWidth:NaN},getVideoHeight:function(){return e?e.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return e&&e.parentNode?e.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return e&&e.parentNode?e.getBoundingClientRect().left-e.parentNode.getBoundingClientRect().left:NaN},setDataOffsetAttr:function(t){e&&e.setAttribute(\"data-offset\",t)},reset:function(){o.off(p.PLAYBACK_PLAYING,f,this)}}}Hn.__dashjs_factory_name=\"VideoModel\";var Vn=s.a.getSingletonFactory(Hn),Yn=[{oldKey:\"dashjs_vbitrate\",newKey:\"dashjs_video_bitrate\"},{oldKey:\"dashjs_abitrate\",newKey:\"dashjs_audio_bitrate\"},{oldKey:\"dashjs_vsettings\",newKey:\"dashjs_video_settings\"},{oldKey:\"dashjs_asettings\",newKey:\"dashjs_audio_settings\"}],qn=\"dashjs_?_bitrate\",Wn=\"dashjs_?_settings\",Qn=\"localStorage\",Kn=\"LastBitrate\",jn=\"LastMediaSettings\";function zn(e){e=e||{};var t,r=this.context,n=_(r).getInstance().log,i=e.mediaPlayerModel,a=void 0;function o(e){if(void 0!==a)return a;a=!1;var t=void 0;try{\"undefined\"!=typeof window&&(t=window[e])}catch(e){return n(\"Warning: DOMStorage access denied: \"+e.message),a}if(!t||e!==Qn&&\"sessionStorage\"!==e)return a;try{t.setItem(\"1\",\"1\"),t.removeItem(\"1\"),a=!0}catch(e){n(\"Warning: DOMStorage is supported, but cannot be used: \"+e.message)}return a}function s(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function u(e,t){return o(e)&&i[\"get\"+t+\"CachingInfo\"]().enabled}function l(){if(!i||!i.hasOwnProperty(\"getLastMediaSettingsCachingInfo\"))throw new Error(\"Missing config parameter(s)\")}return t={getSavedBitrateSettings:function(e){var t=NaN;if(l(),u(Qn,Kn)){var r=qn.replace(/\\?/,e);try{var a=JSON.parse(localStorage.getItem(r))||{},o=(new Date).getTime()-parseInt(a.timestamp,10)>=i.getLastMediaSettingsCachingInfo().ttl||!1,s=parseFloat(a.bitrate);isNaN(s)||o?o&&localStorage.removeItem(r):(t=s,n(\"Last saved bitrate for \"+e+\" was \"+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(u(Qn,Kn)&&t){var r=qn.replace(/\\?/,e);try{localStorage.setItem(r,JSON.stringify({bitrate:t.toFixed(3),timestamp:s()}))}catch(e){n(e.message)}}},getSavedMediaSettings:function(e){if(l(),!u(Qn,jn))return null;var t=null,r=Wn.replace(/\\?/,e);try{var n=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(n.timestamp,10)>=i.getLastMediaSettingsCachingInfo().ttl||!1;t=n.settings,a&&(localStorage.removeItem(r),t=null)}catch(e){return null}return t},setSavedMediaSettings:function(e,t){if(u(Qn,jn)){var r=Wn.replace(/\\?/,e);try{localStorage.setItem(r,JSON.stringify({settings:t,timestamp:s()}))}catch(e){n(e.message)}}}},o(Qn)&&Yn.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){n(e.message)}}})),t}zn.__dashjs_factory_name=\"DOMStorage\";var Xn=s.a.getSingletonFactory(zn),Zn=r(2);var Jn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),\nthis.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};var $n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};var ei=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0};var ti=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};var ri=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData=\"\",this.eventStream=null,this.presentationTimeDelta=NaN},ni=r(9),ii=r.n(ni);function ai(){var e,t=void 0,r=void 0,i=void 0;function a(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function o(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&i[e.streamInfo.id]?i[e.streamInfo.id][e.index]:null}function s(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n];if(e.id===i.id)return i}return null}function u(e){var r=new Jn,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=t.getRepresentationFor(e.index,n);return r.id=e.id,r.quality=e.index,r.bandwidth=t.getBandwidth(i),r.DVRWindow=e.segmentAvailabilityRange,r.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),r.MSETimeOffset=e.MSETimeOffset,r.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,r.mediaInfo=l(e.adaptation),r}function l(e){var r,n=new $n,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return n.id=e.id,n.index=e.index,n.type=e.type,n.streamInfo=c(e.period),n.representationCount=t.getRepresentationCount(i),n.lang=t.getLanguageForAdaptation(i),r=t.getViewpointForAdaptation(i),n.viewpoint=r?r.value:void 0,n.accessibility=t.getAccessibilityForAdaptation(i).map((function(e){var t=e.value,r=t;return e.schemeIdUri&&e.schemeIdUri.search(\"cea-608\")>=0&&void 0!==ii.a&&(r=t?\"cea-608:\"+t:\"cea-608\",n.embeddedCaptions=!0),r})),n.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(i).map((function(e){return e.value})),n.roles=t.getRolesForAdaptation(i).map((function(e){return e.value})),n.codec=t.getCodec(i),n.mimeType=t.getMimeType(i),n.contentProtection=t.getContentProtectionData(i),n.bitrateList=t.getBitrateListForAdaptation(i),n.contentProtection&&n.contentProtection.forEach((function(e){e.KID=t.getKID(e)})),n.isText=t.getIsTextTrack(n.mimeType),n}function d(e,t,r){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=n.EMBEDDED_TEXT,e.codec=\"cea-608-in-SEI\",e.isText=!0,e.isEmbedded=!0,e.lang=r,e.roles=[\"caption\"]}function c(e){var r,n,i=new ei;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(r=e.mpd,(n=new ti).DVRWindowSize=r.timeShiftBufferDepth,n.loadedTime=r.manifest.loadedTime,n.availableFrom=r.availabilityStartTime,n.minBufferTime=r.manifest.minBufferTime,n.maxFragmentDuration=r.maxSegmentDuration,n.duration=t.getDuration(r.manifest),n.isDynamic=t.getIsDynamic(r.manifest),n),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function f(){if(!t||!t.hasOwnProperty(\"getMpd\")||!t.hasOwnProperty(\"getRegularPeriods\"))throw new Error(\"setConfig function has to be called previously\")}function h(e){\nif(!(e&&e.hasOwnProperty(\"getRepresentationController\")&&e.hasOwnProperty(\"getIndexHandler\")&&e.hasOwnProperty(\"getMediaInfo\")&&e.hasOwnProperty(\"getType\")&&e.hasOwnProperty(\"getStreamInfo\")))throw new Error(\"streamProcessor parameter is missing or malformed!\")}function p(e){if(!e||!e.hasOwnProperty(\"getRepresentationForQuality\")||!e.hasOwnProperty(\"getCurrentRepresentation\"))throw new Error(\"representationController parameter is missing or malformed!\")}function g(e){if(!(null!==e&&!isNaN(e)&&e%1==0))throw new Error(\"quality argument is not an integer\")}function m(){r=[],i={}}return e={convertDataToRepresentationInfo:u,getDataForMedia:o,getStreamsInfo:function(e,n){var i=[],a=r;if(e){f();var o=t.getMpd(e);a=t.getRegularPeriods(o)}n||(n=a.length);for(var s=0;s<n;s++)i.push(c(a[s]));return i},getMediaInfoForType:function(e,n){if(0===r.length)return null;var a=r[0].mpd.manifest,o=t.getAdaptationForType(a,e.index,n,e);if(!o)return null;var u=s(e,r),d=u.id,c=t.getIndexForAdaptation(o,a,e.index);return i[d]=i[d]||t.getAdaptationsForPeriod(u),l(i[d][c])},getAllMediaInfoForType:function(e,a,o){var u,c=r,h=o,p=[],g=void 0,m=void 0,E=void 0,_=void 0,T=void 0;if(h){f();var y=t.getMpd(h);c=t.getRegularPeriods(y)}else{if(!(r.length>0))return p;h=r[0].mpd.manifest}var v=s(e,c),A=v.id,R=t.getAdaptationsForType(h,e.index,a!==n.EMBEDDED_TEXT?a:n.VIDEO);if(!R)return p;for(i[A]=i[A]||t.getAdaptationsForPeriod(v),_=0,u=R.length;_<u;_++)if(g=R[_],E=t.getIndexForAdaptation(g,h,e.index),m=l(i[A][E]),a===n.EMBEDDED_TEXT){var I=m.accessibility.length;for(T=0;T<I;T++)if(m){var S=m.accessibility[T];if(0===S.indexOf(\"cea-608:\")){var N=S.substring(8).split(\";\");if(\"CC\"===N[0].substring(0,2))for(T=0;T<N.length;T++)m||(m=l.call(this,i[A][E])),d(m,N[T].substring(0,3),N[T].substring(4)),p.push(m),m=null;else for(T=0;T<N.length;T++)m||(m=l.call(this,i[A][E])),d(m,\"CC\"+(T+1),N[T]),p.push(m),m=null}else 0===S.indexOf(\"cea-608\")&&(d(m,n.CC1,\"eng\"),p.push(m),m=null)}}else a===n.IMAGE?(m.type=n.IMAGE,p.push(m),m=null):m&&p.push(m);return p},getCurrentRepresentationInfo:function(e){p(e);var t=e.getCurrentRepresentation();return t?u(t):null},getRepresentationInfoForQuality:function(e,t){p(e),g(t);var r=e.getRepresentationForQuality(t);return r?u(r):null},updateData:function(e){h(e);var n,i=s(e.getStreamInfo(),r),a=e.getMediaInfo(),u=o(a),l=e.getType(),d=void 0;n=a?a.id:null,r.length>0&&(d=n?t.getAdaptationForId(n,r[0].mpd.manifest,i.index):t.getAdaptationForIndex(a.index,r[0].mpd.manifest,i.index),e.getRepresentationController().updateData(d,u,l))},getInitRequest:function(e,t){var r,n=void 0,i=void 0;return h(e),g(t),n=e.getRepresentationController(),i=e.getIndexHandler(),r=n?n.getRepresentationForQuality(t):null,i?i.getInitRequest(r):null},getNextFragmentRequest:function(e,t){var r,n=void 0;return h(e),r=a(t,e.getRepresentationController()),(n=e.getIndexHandler())?n.getNextSegmentRequest(r):null},getFragmentRequestForTime:function(e,t,r,n){var i,o=void 0;return h(e),i=a(t,e.getRepresentationController()),(o=e.getIndexHandler())?o.getSegmentRequestForTime(i,r,n):null},generateFragmentRequestForTime:function(e,t,r){var n,i=void 0;return h(e),n=a(t,e.getRepresentationController()),(i=e.getIndexHandler())?i.generateSegmentRequestForTime(n,r):null},getIndexHandlerTime:function(e){h(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN},setIndexHandlerTime:function(e,t){h(e);var r=e.getIndexHandler();r&&r.setCurrentTime(t)},getEventsFor:function(e,n){var i=[];if(0===r.length)return i;var u=r[0].mpd.manifest;return e instanceof ei?i=t.getEventsForPeriod(s(e,r)):e instanceof $n?i=t.getEventStreamForAdaptationSet(u,o(e)):e instanceof Jn&&(i=t.getEventStreamForRepresentation(u,a(e,n.getRepresentationController()))),i},getEvent:function(e,t,r){if(!e||!t)return null;var n=new ri,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,c=r*o+s;return t[i]?(n.eventStream=t[i],n.eventStream.value=a,n.eventStream.timescale=o,n.duration=u,n.id=l,n.presentationTime=c,n.messageData=d,n.presentationTimeDelta=s,n):null\n},setConfig:function(e){e&&e.dashManifestModel&&(t=e.dashManifestModel)},updatePeriods:function(e){if(!e)return null;f();var n=t.getMpd(e);r=t.getRegularPeriods(n),i={}},reset:m},m(),e}ai.__dashjs_factory_name=\"DashAdapter\";var oi=s.a.getSingletonFactory(ai);var si=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.period=null,this.index=-1,this.type=null};var ui=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};ui.DEFAULT_ID=\"defaultId\";var li=ui;var di=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};var ci=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value=\"\",this.schemeIdUri=\"\"};function fi(e){e=e||{};var t=this.context,r=nt(t).getInstance(),i=e.mediaController,a=e.timelineConverter,s=e.adapter,u=Number.isInteger||function(e){return\"number\"==typeof e&&isFinite(e)&&Math.floor(e)===e};function l(e,t){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=!1,d=!1;if(!e)throw new Error(\"adaptation is not defined\");if(!t)throw new Error(\"type is not defined\");if(e.hasOwnProperty(\"ContentComponent_asArray\")&&(o=e.ContentComponent_asArray),s=t!==n.TEXT?new RegExp(t):new RegExp(\"(vtt|ttml)\"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty(Je.CODECS)&&(0===(u=e.Representation_asArray[0].codecs).search(n.STPP)||0===u.search(n.WVTT)))return t===n.FRAGMENTED_TEXT;if(o){if(o.length>1)return t===n.MUXED;o[0]&&o[0].contentType===t&&(l=!0,d=!0)}if(e.hasOwnProperty(Je.MIME_TYPE)&&(l=s.test(e.mimeType),d=!0),!d)for(r=0,i=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!d&&r<i;)(a=e.Representation_asArray[r]).hasOwnProperty(Je.MIME_TYPE)&&(l=s.test(a.mimeType),d=!0),r++;return l}function d(e){return l(e,n.AUDIO)}function c(e){return l(e,n.VIDEO)}function f(e){return l(e,n.FRAGMENTED_TEXT)}function h(e){return l(e,n.MUXED)}function p(e){return l(e,n.IMAGE)}function g(e){return\"text/vtt\"===e||\"application/ttml+xml\"===e}function m(e){return e&&e.hasOwnProperty(Je.ROLE_ASARRAY)?e.Role_asArray:[]}function E(e){return m(e).filter((function(e){return e.value===Je.MAIN}))[0]}function _(){return function(e,t){return e.bandwidth-t.bandwidth}}function T(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function y(e,t,r){var n,i=e&&e.Period_asArray&&u(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[],a=void 0,o=[];for(a=0,n=i.length;a<n;a++)l(i[a],r)&&o.push(T(i[a]));return o}function v(e){var t=!1;return e&&e.hasOwnProperty(\"type\")&&(t=e.type===Je.DYNAMIC),t}function A(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function R(e){if(e&&e.period&&u(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&u(e.index))return T(t.AdaptationSet_asArray[e.index])}}function I(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty(\"r\")||t.r>=0}function S(e,t){if(!e)throw new Error(\"Period cannot be null or undefined\");var r=li.DEFAULT_ID+\"_\"+t;return e.hasOwnProperty(Je.ID)&&e.id.length>0&&\"__proto__\"!==e.id&&(r=e.id),r}function N(e,t){var r=[],i=void 0;if(!e)return r\n;for(i=0;i<e.length;i++){var a=new ci;if(a.timescale=1,a.representation=t,!e[i].hasOwnProperty(n.SCHEME_ID_URI))throw new Error(\"Invalid EventStream. SchemeIdUri has to be set\");a.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(Je.TIMESCALE)&&(a.timescale=e[i].timescale),e[i].hasOwnProperty(Je.VALUE)&&(a.value=e[i].value),r.push(a)}return r}function D(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],i=!1;return n.some((function(n){if(n){var a=new Mr,o=n.__text||n;r.isRelative(o)&&(i=!0,e.baseUri&&(o=r.resolve(o,e.baseUri))),a.url=o;for(var s=[],u=1;n[\"backupUrl\"+u];u++)s.push(n[\"backupUrl\"+u]);return a.urls=[a.url].concat(s),n.hasOwnProperty(Je.SERVICE_LOCATION)&&n.serviceLocation.length?a.serviceLocation=n.serviceLocation:a.serviceLocation=o,n.hasOwnProperty(Je.DVB_PRIORITY)&&(a.dvb_priority=n[Je.DVB_PRIORITY]),n.hasOwnProperty(Je.DVB_WEIGHT)&&(a.dvb_weight=n[Je.DVB_WEIGHT]),n.hasOwnProperty(Je.AVAILABILITY_TIME_OFFSET)&&(a.availabilityTimeOffset=n[Je.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(Je.AVAILABILITY_TIME_COMPLETE)&&(a.availabilityTimeComplete=\"false\"!==n[Je.AVAILABILITY_TIME_COMPLETE]),t.push(a),i}})),t}return{getIsTypeOf:l,getIsAudio:d,getIsVideo:c,getIsText:function(e){return l(e,n.TEXT)},getIsMuxed:h,getIsTextTrack:g,getIsFragmentedText:f,getIsImage:p,getIsMain:E,getLanguageForAdaptation:function(e){var t=\"\";return e&&e.hasOwnProperty(Je.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,\"\")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(Je.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:m,getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(Je.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(Je.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,r){var n=t&&t.Period_asArray&&u(r)&&t.Period_asArray[r]?t.Period_asArray[r].AdaptationSet_asArray:null;return n&&u(e)?n[e]:null},getIndexForAdaptation:function(e,r,n){var i=r&&r.Period_asArray&&u(n)&&r.Period_asArray[n]?r.Period_asArray[n].AdaptationSet_asArray:[],a=i.length;if(e)for(var o=0;o<a;o++){if(mr(t).getInstance().areEqual(i[o],e))return o}return-1},getAdaptationForId:function(e,t,r){var n,i=t&&t.Period_asArray&&u(r)&&t.Period_asArray[r]?t.Period_asArray[r].AdaptationSet_asArray:[],a=void 0;for(a=0,n=i.length;a<n;a++)if(i[a].hasOwnProperty(Je.ID)&&i[a].id===e)return i[a];return null},getAdaptationsForType:y,getAdaptationForType:function(e,t,r,n){var a=y(e,t,r);if(!a||0===a.length)return null;if(a.length>1&&n){var o=i.getCurrentTrackFor(r,n),u=s.getAllMediaInfoForType(n,r);if(o)for(var l=0,d=a.length;l<d;l++)if(i.isTracksEqual(o,u[l]))return a[l];for(var c=0,f=a.length;c<f;c++)if(E(a[c]))return a[c]}return a[0]},getCodec:function(e,t,r){if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var n=u(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0],i=n.mimeType+';codecs=\"'+n.codecs+'\"';return r&&void 0!==n.width&&(i+=';width=\"'+n.width+'\";height=\"'+n.height+'\"'),i}return null},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(Je.CENC_DEFAULT_KID)?e[Je.CENC_DEFAULT_KID]:null},getContentProtectionData:function(e){return e&&e.hasOwnProperty(Je.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:v,getIsDVB:function(e){return function(e,t){var r=!1;return e&&e.profiles&&e.profiles.length>0&&(r=-1!==e.profiles.indexOf(t)),r}(e,\"urn:dvb:dash:profile:dvb-dash:2014\")},getDuration:function(e){return e&&e.hasOwnProperty(Je.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=NaN\n;return e&&e.hasOwnProperty(Je.MINIMUM_UPDATE_PERIOD)&&(r=e.minimumUpdatePeriod),isNaN(r)?r:Math.max(r-t,1)},getRepresentationCount:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?T(e).Representation_asArray.map((function(e){return{id:e.id||\"\",bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}})):null},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&u(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t=[],r=R(e),n=void 0,i=void 0;if(e&&e.period&&u(e.period.index)){var o=D(e.period.mpd.manifest);o&&(i=o[0])}if(r&&r.Representation_asArray)for(var s=0,l=r.Representation_asArray.length;s<l;++s){var d=r.Representation_asArray[s],c=new $e;if(c.index=s,c.adaptation=e,d.hasOwnProperty(Je.ID)&&(c.id=d.id),d.hasOwnProperty(Je.CODECS)&&(c.codecs=d.codecs),d.hasOwnProperty(Je.CODEC_PRIVATE_DATA)&&(c.codecPrivateData=d.codecPrivateData),d.hasOwnProperty(Je.BANDWITH)&&(c.bandwidth=d.bandwidth),d.hasOwnProperty(Je.WIDTH)&&(c.width=d.width),d.hasOwnProperty(Je.HEIGHT)&&(c.height=d.height),d.hasOwnProperty(Je.SCAN_TYPE)&&(c.scanType=d.scanType),d.hasOwnProperty(Je.MAX_PLAYOUT_RATE)&&(c.maxPlayoutRate=d.maxPlayoutRate),d.hasOwnProperty(Je.SEGMENT_BASE)?(n=d.SegmentBase,c.segmentInfoType=Je.SEGMENT_BASE):d.hasOwnProperty(Je.SEGMENT_LIST)?(n=d.SegmentList).hasOwnProperty(Je.SEGMENT_TIMELINE)?(c.segmentInfoType=Je.SEGMENT_TIMELINE,c.useCalculatedLiveEdgeTime=I(n.SegmentTimeline)):(c.segmentInfoType=Je.SEGMENT_LIST,c.useCalculatedLiveEdgeTime=!0):d.hasOwnProperty(Je.SEGMENT_TEMPLATE)?((n=d.SegmentTemplate).hasOwnProperty(Je.SEGMENT_TIMELINE)?(c.segmentInfoType=Je.SEGMENT_TIMELINE,c.useCalculatedLiveEdgeTime=I(n.SegmentTimeline)):c.segmentInfoType=Je.SEGMENT_TEMPLATE,n.hasOwnProperty(Je.INITIALIZATION_MINUS)&&(c.initialization=n.initialization.split(\"$Bandwidth$\").join(d.bandwidth).split(\"$RepresentationID$\").join(d.id))):c.segmentInfoType=Je.BASE_URL,c.essentialProperties=A(d),n){if(n.hasOwnProperty(Je.INITIALIZATION)){var f=n.Initialization;f.hasOwnProperty(Je.SOURCE_URL)?c.initialization=f.sourceURL:f.hasOwnProperty(Je.RANGE)&&(c.range=f.range)}else d.hasOwnProperty(Je.MIME_TYPE)&&g(d.mimeType)&&(c.range=0);n.hasOwnProperty(Je.TIMESCALE)&&(c.timescale=n.timescale),n.hasOwnProperty(Je.DURATION)&&(c.segmentDuration=n.duration/c.timescale),n.hasOwnProperty(Je.MEDIA)&&(c.media=n.media),n.hasOwnProperty(Je.START_NUMBER)&&(c.startNumber=n.startNumber),n.hasOwnProperty(Je.INDEX_RANGE)&&(c.indexRange=n.indexRange),n.hasOwnProperty(Je.PRESENTATION_TIME_OFFSET)&&(c.presentationTimeOffset=n.presentationTimeOffset/c.timescale),n.hasOwnProperty(Je.AVAILABILITY_TIME_OFFSET)?c.availabilityTimeOffset=n.availabilityTimeOffset:i&&void 0!==i.availabilityTimeOffset&&(c.availabilityTimeOffset=i.availabilityTimeOffset),n.hasOwnProperty(Je.AVAILABILITY_TIME_COMPLETE)?c.availabilityTimeComplete=\"false\"!==n.availabilityTimeComplete:i&&void 0!==i.availabilityTimeComplete&&(c.availabilityTimeComplete=i.availabilityTimeComplete)}c.MSETimeOffset=a.calcMSETimeOffset(c),c.path=[e.period.index,e.index,s],t.push(c)}return t},getAdaptationsForPeriod:function(e){var t=e&&u(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,r=[],i=void 0,a=void 0,o=void 0;if(t&&t.AdaptationSet_asArray)for(o=0;o<t.AdaptationSet_asArray.length;o++)a=t.AdaptationSet_asArray[o],i=new si,a.hasOwnProperty(Je.ID)&&(i.id=a.id),i.index=o,i.period=e,h(a)?i.type=n.MUXED:d(a)?i.type=n.AUDIO:c(a)?i.type=n.VIDEO:f(a)?i.type=n.FRAGMENTED_TEXT:p(a)?i.type=n.IMAGE:i.type=n.TEXT,r.push(i);return r},getRegularPeriods:function(e){var t,r=!!e&&v(e.manifest),n=[],i=null,a=null,o=null,s=null,u=void 0;for(u=0,\nt=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;u<t;u++)(a=e.manifest.Period_asArray[u]).hasOwnProperty(Je.START)?(s=new li).start=a.start:null!==i&&a.hasOwnProperty(Je.DURATION)&&null!==o?((s=new li).start=parseFloat((o.start+o.duration).toFixed(5)),s.duration=a.duration):0!==u||r||((s=new li).start=0),null!==o&&isNaN(o.duration)&&(o.duration=parseFloat((s.start-o.start).toFixed(5))),null!==s&&(s.id=S(a,u)),null!==s&&a.hasOwnProperty(Je.DURATION)&&(s.duration=a.duration),null!==s&&(s.index=u,s.mpd=e,n.push(s),i=a,o=s),a=null,s=null;return 0===n.length||null!==o&&isNaN(o.duration)&&(o.duration=parseFloat((function(e){var t=v(e.mpd.manifest),r=void 0;if(e.mpd.manifest.mediaPresentationDuration)r=e.mpd.manifest.mediaPresentationDuration;else if(e.duration)r=e.duration;else{if(!t)throw new Error(\"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.\");r=Number.POSITIVE_INFINITY}return r}(o)-o.start).toFixed(5))),n},getMpd:function(e){var t=new di;return e&&(t.manifest=e,e.hasOwnProperty(Je.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(Je.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(Je.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(Je.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(n.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(Je.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(Je.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,r=t?t.Period_asArray:null,i=r&&e&&u(e.index)?r[e.index].EventStream_asArray:null,a=[],o=void 0,s=void 0;if(i)for(o=0;o<i.length;o++){var l=new ci;if(l.period=e,l.timescale=1,!i[o].hasOwnProperty(n.SCHEME_ID_URI))throw new Error(\"Invalid EventStream. SchemeIdUri has to be set\");for(l.schemeIdUri=i[o].schemeIdUri,i[o].hasOwnProperty(Je.TIMESCALE)&&(l.timescale=i[o].timescale),i[o].hasOwnProperty(Je.VALUE)&&(l.value=i[o].value),s=0;s<i[o].Event_asArray.length;s++){var d=new ri;d.presentationTime=0,d.eventStream=l,i[o].Event_asArray[s].hasOwnProperty(Je.PRESENTATION_TIME)&&(d.presentationTime=i[o].Event_asArray[s].presentationTime),i[o].Event_asArray[s].hasOwnProperty(Je.DURATION)&&(d.duration=i[o].Event_asArray[s].duration),i[o].Event_asArray[s].hasOwnProperty(Je.ID)&&(d.id=i[o].Event_asArray[s].id),a.push(d)}}return a},getEventStreamForAdaptationSet:function(e,t){var r=void 0,n=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&u(t.period.index)&&(n=e.Period_asArray[t.period.index])&&n.AdaptationSet_asArray&&u(t.index)&&(i=n.AdaptationSet_asArray[t.index])&&(r=i.InbandEventStream_asArray),N(r,null)},getEventStreamForRepresentation:function(e,t){var r=void 0,n=void 0,i=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&u(t.adaptation.period.index)&&(n=e.Period_asArray[t.adaptation.period.index])&&n.AdaptationSet_asArray&&u(t.adaptation.index)&&(i=n.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&u(t.index)&&(a=i.Representation_asArray[t.index])&&(r=a.InbandEventStream_asArray),N(r,t)},getUTCTimingSources:function(e){var t=v(e),r=!!e&&e.hasOwnProperty(Je.AVAILABILITY_START_TIME),i=e?e.UTCTiming_asArray:null,a=[];return(t||r)&&i&&i.forEach((function(e){var t=new o;e.hasOwnProperty(n.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(Je.VALUE)&&(t.value=e.value.toString(),a.push(t)))})),a},getBaseURLsFromElement:D,getRepresentationSortFunction:_,getLocation:function(e){if(e&&e.hasOwnProperty(n.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=R(e).Representation_asArray[0],r=void 0\n;return t.hasOwnProperty(Je.SEGMENT_LIST)?!(r=t.SegmentList).hasOwnProperty(Je.SEGMENT_TIMELINE)||I(r.SegmentTimeline):!(!t.hasOwnProperty(Je.SEGMENT_TEMPLATE)||!(r=t.SegmentTemplate).hasOwnProperty(Je.SEGMENT_TIMELINE))&&I(r.SegmentTimeline)}}}fi.__dashjs_factory_name=\"DashManifestModel\";var hi=s.a.getSingletonFactory(fi);var pi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return e.round10=function(e,t){return function(e,t,r){if(void 0===r||0==+r)return Math[e](t);if(r=+r,null===(t=+t)||isNaN(t)||!(\"number\"==typeof r&&r%1==0))return NaN;return t=t.toString().split(\"e\"),+((t=(t=Math[e](+(t[0]+\"e\"+(t[1]?+t[1]-r:-r)))).toString().split(\"e\"))[0]+\"e\"+(t[1]?+t[1]+r:r))}(\"round\",e,t)},e}();function gi(e){var t=(e=e||{}).dashManifestModel,r=e.manifestModel;function n(e){return s(e,i.BUFFER_LEVEL)}function a(e){if(!e)return null;var t=e.HttpList,r=null,n=void 0;if(!t||t.length<=0)return null;for(n=t.length-1;n>=0;){if(t[n].responsecode){r=t[n];break}n--}return r}function o(e){return e&&e.HttpList?e.HttpList:[]}function s(e,t){if(!e)return null;var r=e[t];if(!r)return null;var n=r.length;return n<=0?null:r[n-1]}function u(e){var t={};if(!e)return t;for(var r=e.trim().split(\"\\r\\n\"),n=0,i=r.length;n<i;n++){var a=r[n],o=a.indexOf(\": \");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function l(e,t,r){var n=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e)for(n=e.AdaptationSet_asArray,o=0;o<n.length;o+=1)for(a=n[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return r?s:i;return null}function d(e,r){return t.getIsTypeOf(e,r)}return{getBandwidthForRepresentation:function(e,t){var n;return null===(n=l(r.getValue().Period_asArray[t],e))?null:n.bandwidth},getIndexForRepresentation:function(e,t){return function(e,t){var r=l(e,t,!0);if(null!==r)return r;return-1}(r.getValue().Period_asArray[t],e)},getMaxIndexForBufferType:function(e,t){var n=r.getValue();return n?function(e,t){var r=void 0,n=void 0,i=void 0,a=void 0;if(!e||!t)return-1;for(n=e.AdaptationSet_asArray,a=0;a<n.length;a+=1)if(i=(r=n[a]).Representation_asArray,d(r,t))return i.length;return-1}(n.Period_asArray[t],e):-1},getCurrentRepresentationSwitch:function(e){return s(e,i.TRACK_SWITCH)},getLatestBufferLevelVO:n,getCurrentBufferLevel:function(e){var t=n(e);return t?pi.round10(t.level/1e3,-3):0},getCurrentHttpRequest:a,getHttpRequests:o,getCurrentDroppedFrames:function(e){return s(e,i.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return s(e,i.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return s(e,i.DVR_INFO)},getCurrentManifestUpdate:function(e){return s(e,i.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var r={},n=a(e);return n&&(r=u(n._responseHeaders)),void 0===r[t]?null:r[t]},getLatestMPDRequestHeaderValueByID:function(e,t){var r,n={},i=void 0,a=void 0;for(a=(r=o(e)).length-1;a>=0;a--)if((i=r[a]).type===G.MPD_TYPE){n=u(i._responseHeaders);break}return void 0===n[t]?null:n[t]},getRequestsQueue:function(e){return e?e.RequestsQueue:null}}}gi.__dashjs_factory_name=\"DashMetrics\";var mi=s.a.getSingletonFactory(gi);function Ei(){var e=this.context,t=d(e).getInstance(),r=void 0,n=void 0,i=void 0;function a(e){r=e}function o(e,t,n,i){return i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-r)):t.availabilityStartTime}function s(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*r)/1e3}function u(e){n||void 0!==e.offset&&(a(e.offset/1e3),n=!0)}function l(){r=0,n=!1,i=NaN}return{initialize:function(){l(),t.on(p.TIME_SYNCHRONIZATION_COMPLETED,u,this)},isTimeSyncCompleted:function(){return n},setTimeSyncCompleted:function(e){n=e},getClientTimeOffset:function(){return r},setClientTimeOffset:a,getExpectedLiveEdge:function(){return i},setExpectedLiveEdge:function(e){i=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,r){return o.call(this,e,t,r)},\ncalcAvailabilityEndTimeFromPresentationTime:function(e,t,r){return o.call(this,e,t,r,!0)},calcPresentationTimeFromWallTime:s,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var r=e.adaptation.period,i={start:r.start,end:r.start+r.duration};if(!t)return i;if(!n&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var a=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),o=s(new Date,r),u=r.start+r.duration;i.start=Math.max(o-r.mpd.timeShiftBufferDepth,r.start);var l=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<a?a-e.availabilityTimeOffset:a;return i.end=o>=u&&o-l<u?u:o-l,i},calcWallTimeForSegment:function(e,t){var r=void 0,n=void 0,i=void 0;return t&&(r=e.representation.adaptation.period.mpd.suggestedPresentationDelay,n=e.presentationStartTime+r,i=new Date(e.availabilityStartTime.getTime()+1e3*n)),i},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){t.off(p.TIME_SYNCHRONIZATION_COMPLETED,u,this),l()}}}Ei.__dashjs_factory_name=\"TimelineConverter\";var _i=s.a.getSingletonFactory(Ei),Ti=r(6),yi=r.n(Ti);function vi(){var e=\"You must first call initialize() and set a source before calling this method\",t=\"You must first call initialize() and set a valid source and view before calling this method\",r=\"You must first call attachView() to set the video element before calling this method\",u=\"You must first call attachSource() with a valid source before calling this method\",l=\"MediaPlayer not initialized!\",c=this.context,f=d(c).getInstance(),h=_(c).getInstance(),g=h.log,m=NaN,E=void 0,T=void 0,y=void 0,v=void 0,A=void 0,R=void 0,I=void 0,S=void 0,N=void 0,D=void 0,O=void 0,C=void 0,M=void 0,P=void 0,b=void 0,w=void 0,L=void 0,F=void 0,x=void 0,U=void 0,B=void 0,k=void 0,H=void 0,V=void 0,Y=void 0,q=void 0,W=void 0,Q=void 0,K=void 0,j=void 0,z=void 0,X=void 0,Z=void 0,J=void 0,$={video:{},audio:{}},ee={min:0,video:0,audio:0},te=null,re={};function ne(){return!!T&&!!V.getElement()}function ie(){return Object(Zn.a)()}function ae(){if(!R)throw t;return U.isPaused()}function oe(e){var t=[n.VIDEO,n.AUDIO,n.FRAGMENTED_TEXT];if(e){if(-1!==t.indexOf(e)){var r=ge().getCurrentBufferLevel(Ee(e));return r||NaN}return g(\"Warning  - getBufferLength requested for invalid type\"),NaN}var i=t.map((function(e){return ye(e).length>0?ge().getCurrentBufferLevel(Ee(e)):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)}));return i===Number.MAX_VALUE?NaN:i}function se(e){var t=Ne(),r=U.getLiveDelay();if(!t)return 0;var n=t.range.start+e;return n>t.range.end-r&&(n=t.range.end-r),n}function le(e,r){if(!R)throw t;var n=_e().currentTime;if(void 0!==e)n=x.getTimeRelativeToStreamId(n,e);else if(U.getIsDynamic()){var i=Ne();n=null===i?0:de()-(i.range.end-i.time)}var a=w.getCachedDurationOffset(\"time\");return r&&n-a>0&&(n-=a,n=Math.min(n,de(void 0))),n=parseFloat(n.toFixed(5))}function de(e){if(!R)throw t;var r=_e().duration;if(U.getIsDynamic()){var n,i=Ne();if(!i)return 0;r=(n=i.range.end-i.range.start)<i.manifestInfo.DVRWindowSize?n:i.manifestInfo.DVRWindowSize}if(e){var a=_e().currentTime,o=w.getCachedDurationOffset(\"time\"),s=w.getCachedDurationOffset(\"offset\");o?a>o&&(r=a<s?s-o:r-s):r=s?Math.min(r,s):r,r=parseFloat(r.toFixed(5))}return r}function ce(e){I=e}function fe(e,t){he(e,t);var r=new o;r.schemeIdUri=e,r.value=t,w.getUTCTimingSources().push(r)}function he(e,t){var r=w.getUTCTimingSources();r.forEach((function(n,i){n.schemeIdUri===e&&n.value===t&&r.splice(i,1)}))}function pe(){fe(ur.DEFAULT_UTC_TIMING_SOURCE.scheme,ur.DEFAULT_UTC_TIMING_SOURCE.value)}function ge(){return B}function Ee(e){return b.getReadOnlyMetricsFor(e)}function _e(){if(!V.getElement())throw r;return V.getElement()}function Te(e){if(!v)throw l\n;V.setElement(e),e&&(Se(),function(){if(C)return;var e=dashjs.MetricsReporting;if(\"function\"==typeof e){var t=e(c).create();C=t.createMetricsReporting({log:g,eventBus:f,mediaElement:_e(),dashManifestModel:k,metricsModel:b,events:p,constants:n,metricsConstants:i})}}(),function(){if(M)return;var e=dashjs.MssHandler;\"function\"==typeof e&&(M=e(c).create({eventBus:f,mediaPlayerModel:w,metricsModel:b,playbackController:U,protectionController:O,errHandler:L,events:p,constants:n,log:g,initSegmentType:G.INIT_SEGMENT_TYPE,BASE64:yi.a,ISOBoxer:ve.a}))}(),x&&x.switchToVideoElement()),R&&Re(),Ce()}function ye(t){if(!A)throw e;var r=x.getActiveStreamInfo();return r?D.getTracksFor(t,r):[]}function Ae(e){if(!v)throw l;\"string\"==typeof e&&Be(c).getInstance().initialize(e),$.video={},$.audio={},T=e,(A||R)&&Re(),ne()&&Ce()}function Re(){R=!1,A=!1,P.reset(),x.reset(),U.reset(),S.reset(),D.reset(),O&&(O.reset(),O=null,Se())}function Ie(){return vn(c).create({errHandler:L,videoModel:V,metricsModel:b,mediaPlayerModel:w,requestModifier:vt(c).getInstance(),mssHandler:M})}function Se(){if(O)return O;var e=dashjs.Protection;if(\"function\"==typeof e){var t=e(c).create();return p.extend(e.events),lr.extend(e.events,{publicOnly:!0}),F||(F=Rn(c).getInstance()),O=t.createProtectionSystem({log:g,errHandler:L,videoModel:V,capabilities:F,eventBus:f,events:p,BASE64:yi.a,constants:n})}return null}function Ne(){var e=b.getReadOnlyMetricsFor(n.VIDEO)||b.getReadOnlyMetricsFor(n.AUDIO);return B.getCurrentDVRInfo(e)}function De(e){var t=Ne();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function Oe(){if(!A)throw e;var t=x.getActiveStreamInfo();return t?x.getStreamById(t.id):null}function Ce(){var e;!A&&T&&(A=!0,g(\"Streaming Initialized\"),e=Ie(),x||(x=xr(c).getInstance()),D.setConfig({errHandler:L,domStorage:Y}),x.setConfig({capabilities:F,manifestLoader:e,manifestModel:H,dashManifestModel:k,mediaPlayerModel:w,protectionController:O,adapter:P,metricsModel:b,dashMetrics:B,errHandler:L,timelineConverter:N,videoModel:V,playbackController:U,domStorage:Y,abrController:S,mediaController:D}),U.setConfig({streamController:x,metricsModel:b,dashMetrics:B,manifestModel:H,mediaPlayerModel:w,dashManifestModel:k,adapter:P,videoModel:V}),S.setConfig({streamController:x,domStorage:Y,mediaPlayerModel:w,metricsModel:b,dashMetrics:B,dashManifestModel:k,manifestModel:H,videoModel:V,adapter:P,initializeDate:Le()}),S.createAbrRulesCollection(),x.initialize(I,y),T.video||T.audio||\"string\"==typeof T?x.load(T,q):x.loadWithManifest(T,q)),!R&&ne()&&(R=!0,g(\"Playback Initialized\"))}function Me(e){var t=w.getCachedDurationOffset(\"offset\");t&&e.time>=t&&X&&(w.setCachedDurationOffset(\"time\",t),X=!1,V.setDataOffsetAttr(t),f.trigger(p.APPENDED_NEXT_SOURCE_DURATION_CHANGED,{offset:t,totalTime:e.time,totalDuration:de(),time:le(void 0,!0),duration:ee.min||de(!0)}))}function Pe(e){try{if(e&&e.mediaType&&e.segments){var t=e.mediaType,r=$[t],n=e.segments,i=e.representation&&e.representation.index,a=!0,o=[],s={},u=0,l=0;r.total&&r.total===n.length&&(r.segments.forEach((function(e,t){e.duration&&e.duration!==n[t].duration&&t<r.total-1&&(Math.ceil(1e3*Math.abs(e.duration/e.timescale-n[t].duration/n[t].timescale))>100&&o.push(t))})),o.length&&(a=!1,s={old:r.qualityIndex,new:i}));var d=0,c=e.segments&&e.segments[e.segments.length-1];c&&(d=(c.duration+c.startTime)/c.timescale,ee[t]=d,(!ee.min||ee.min>0&&ee.min>d)&&(ee.min=d));var f=0;n&&n.length&&(f=n[0].startTime/n[0].timescale,D.setStartOffsetTimeForType(t,f),u=parseInt(n[0].mediaRange.split(\"-\")[0],10),l=parseInt(n[n.length-1].mediaRange.split(\"-\")[1],10),Z=Math.max(Z,f)),ee.min===d&&w.getCachedDurationOffset(\"duration\")&&f>0&&(ee.min-=f),w.setCachedDurationOffset(\"duration\",ee.min+Q);var h={total:n&&n.length,segments:n,isDurationAllEqual:a,qualityIndex:i,realDuration:d,startOffsetTime:f,rangeStart:u,rangeEnd:l};a||(h.notEqualIndexList=o,h.notEqualQualityIndex=s),$[e.mediaType]=h,\"function\"==typeof te&&te(t,h)}}catch(e){throw new Error(\"Parse segment loaded error, \"+e)}}function be(){K=!0\n;var e=V.getBufferRange(),t=V.getElement().duration,r=e&&e.length&&e.end(e.length-1),n=V.getTime(),i=[t,r,n+oe(\"video\"),n+oe(\"audio\")],a=i.filter((function(e){return!isNaN(e)})),o=a.reduce((function(e,t){return e+t}))/a.length,s=Math.min.apply(null,a);if(g(\"onStreamBufferingCompleted\",Q,i,w.getAppendingSourceState(),j),Math.abs(s-o)<1&&(Q=parseFloat(s.toFixed(5)),j.length)){var u=j.splice(0,1)[0];g(\"Appending delay next source\",u),Fe(u.manifest,u.preloadData)}}function we(e){if(U.getEnded()&&w.getAppendingSourceState()){var t=e.sender.getType();if(re[t]=e.bufferLevel,re.audio>0&&re.video>0){var r=V.getBufferRange(),n=r&&r.length&&r.end(r.length-1),i=U.getTime();n>i+.01&&((undefined),U.seek(i+.01),U.play())}}if(w.getAppendingSourceState()&&z){for(var a=w.getCachedDurationOffset(\"offset\"),o=V.getBufferRange(),s=U.getTime(),u=0,l=0;l<o.length;l++)o.start(l)<s&&o.end(l)>=s&&(u=o.end(l));a>0&&u>a+1&&(w.setAppendingSourceState(!1),g(\"Appended Next Source, currentTime: \"+s+\" , buffered end: \"+u),z=!1,f.trigger(p.APPENDED_NEXT_SOURCE,{time:s,ended:u}))}if(!J){var d=V.getBufferRange(),c=U.getTime(),h=d&&d.length&&d.start(0);d&&d.length&&h>=Z&&(J=!0,c<h&&(f.trigger(p.START_OFFSET_TIME_WARNING,{time:h}),U.seek(h+.2)))}}function Le(){return m}function Fe(e,t){if(g(\"Append Next Source\",V.getTime(),V.isSeeking()),!v)throw l;if(\"string\"==typeof e&&Be(c).getInstance().initialize(e),V.isSeeking()){f.on(p.PLAYBACK_SEEKED,(function t(){g(\"Seeked to append next source\"),f.off(p.PLAYBACK_SEEKED,t),Fe(e)}))}else{if(!K)return g(\"Stream buffering is not completed, delay to append!\"),void(j=[{manifest:e,preloadData:t}]);w.setAppendingSourceState(!0),w.setCachedDurationOffset(\"offset\",Q),f.trigger(p.APPENDING_NEXT_SOURCE,{manifest:e,time:U.getTime(),offset:Q}),z=!0,X=!0,K=!1,$.video={},$.audio={},T=e,ee.min=0,ee.video=0,ee.audio=0,x.load(e,!0,!0)}}return E={initialize:function(e,t,r,n){q=!!n,m=new Date,delete window.__DASH_P2P_TYPE__,F||(F=Rn(c).getInstance()),L=Mt(c).getInstance(),F.supportsMediaSource()?v||(v=!0,N=_i(c).getInstance(),S||(S=ue(c).getInstance()),U||(U=ke(c).getInstance()),D||(D=me(c).getInstance()),P=oi(c).getInstance(),k=hi(c).getInstance({mediaController:D,timelineConverter:N,adapter:P}),H=Sn(c).getInstance(),B=mi(c).getInstance({manifestModel:H,dashManifestModel:k}),b=kn(c).getInstance(),Y=Xn(c).getInstance({mediaPlayerModel:w}),P.setConfig({dashManifestModel:k,mediaPlayerModel:w}),b.setConfig({adapter:P}),pe(),ce(void 0===r||r),e&&Te(e),t&&Ae(t),g(\"[dash.js \"+ie()+\"] MediaPlayer has been initialized\")):L.capabilityError(\"mediasource\")},setConfig:function(e){e&&(e.capabilities&&(F=e.capabilities),e.streamController&&(x=e.streamController),e.playbackController&&(U=e.playbackController),e.mediaPlayerModel&&(w=e.mediaPlayerModel),e.abrController&&(S=e.abrController),e.mediaController&&(D=e.mediaController))},on:function(e,t,r){f.on(e,t,r)},off:function(e,t,r){f.off(e,t,r)},extend:function(e,t,r){s.a.extend(e,t,r,c)},attachView:Te,attachSource:Ae,isReady:ne,preload:function(){if(V.getElement()||A)return!1;if(!T)throw u;Ce()},play:function(){if(!R)throw t;(!I||ae()&&R)&&U.play()},isPaused:ae,pause:function(){if(!R)throw t;U.pause()},isSeeking:function(){if(!R)throw t;return U.isSeeking()},isDynamic:function(){if(!R)throw t;return U.getIsDynamic()},seek:function(e,r){if(!R)throw t;if(\"number\"!=typeof e||isNaN(e))throw\"MediaPlayer Invalid Arguments!\";var n=U.getIsDynamic()?se(e):e;r&&(n+=w.getCachedDurationOffset(\"time\")),U.seek(n)},setPlaybackRate:function(e){if(!V.getElement())throw r;_e().playbackRate=e},getPlaybackRate:function(){if(!V.getElement())throw r;return _e().playbackRate},setMute:function(e){if(!V.getElement())throw r;_e().muted=e},isMuted:function(){if(!V.getElement())throw r;return _e().muted},setVolume:function(e){if(!V.getElement())throw r;_e().volume=e},getVolume:function(){if(!V.getElement())throw r;return _e().volume},time:le,duration:de,timeAsUTC:function(){if(!R)throw t;return le()<0?NaN:De(le())},durationAsUTC:function(){if(!R)throw t\n;return De(de())},getActiveStream:Oe,getDVRWindowSize:function(){var e=Ne();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:se,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(0===t?\"\":t<10?\"0\"+t.toString()+\":\":t.toString()+\":\")+(r<10?\"0\"+r.toString():r.toString())+\":\"+(n<10?\"0\"+n.toString():n.toString())},formatUTC:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:r});return n?o+\" \"+a:o},getVersion:ie,getDebug:function(){return h},getBufferLength:oe,getVideoContainer:function(){return V?V.getVideoContainer():null},getTTMLRenderingDiv:function(){return V?V.getTTMLRenderingDiv():null},getVideoElement:_e,getSource:function(){if(!T)throw u;return T},setLiveDelayFragmentCount:function(e){w.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){w.setLiveDelay(e)},getLiveDelay:function(){return w.getLiveDelay()},getCurrentLiveLatency:function(){if(!v)throw l;return R?U.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(e){w.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){w.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){w.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){S.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return S.getMaxAllowedBitrateFor(e)},getTopBitrateInfoFor:function(t){if(!A)throw e;return S.getTopBitrateInfoFor(t)},setMinAllowedBitrateFor:function(e,t){S.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return S.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){S.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return S.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:ce,getAutoPlay:function(){return I},setScheduleWhilePaused:function(e){w.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return w.getScheduleWhilePaused()},getDashMetrics:ge,getMetricsFor:Ee,getQualityFor:function(t){if(!A)throw e;return S.getQualityFor(t,x.getActiveStreamInfo())},setQualityFor:function(t,r){if(!A)throw e;S.setPlaybackQuality(t,x.getActiveStreamInfo(),r)},updatePortalSize:function(){S.setElementSize(),S.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return S.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){S.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return S.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){S.setUsePixelRatioInLimitBitrateByPortal(e)},getBitrateInfoListFor:function(t){if(!A)throw e;var r=Oe();return r?r.getBitrateListFor(t):[]},setInitialBitrateFor:function(e,t){S.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(t){if(!A)throw e;return S.getInitialBitrateFor(t)},setInitialRepresentationRatioFor:function(e,t){S.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return S.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(t){if(!A)throw e;return P.getStreamsInfo(t)},getTracksFor:ye,getTracksForTypeFromManifest:function(t,r,n){if(!A)throw e;return(n=n||P.getStreamsInfo(r,1)[0])?P.getAllMediaInfoForType(n,t,r):[]},getCurrentTrackFor:function(t){if(!A)throw e;var r=x.getActiveStreamInfo();return r?D.getCurrentTrackFor(t,r):null},setInitialMediaSettingsFor:function(e,t){if(!v)throw l;D.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!v)throw l;return D.getInitialSettings(e)},setCurrentTrack:function(t){if(!A)throw e;D.setTrack(t)},getTrackSwitchModeFor:function(e){if(!v)throw l;return D.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!v)throw l;D.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!v)throw l;D.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!v)throw l;return D.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(e){w.setFastSwitchEnabled(e)\n},getFastSwitchEnabled:function(){return w.getFastSwitchEnabled()},setMovingAverageMethod:function(e){e===n.MOVING_AVERAGE_SLIDING_WINDOW||e===n.MOVING_AVERAGE_EWMA?w.setMovingAverageMethod(e):g(\"Warning: Ignoring setMovingAverageMethod(\"+e+\") - unknown value.\")},getMovingAverageMethod:function(){return w.getMovingAverageMethod()},getAutoSwitchQualityFor:function(e){return S.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){S.setAutoSwitchBitrateFor(e,t)},setABRStrategy:function(e){e===n.ABR_STRATEGY_DYNAMIC||e===n.ABR_STRATEGY_BOLA||e===n.ABR_STRATEGY_THROUGHPUT?w.setABRStrategy(e):g(\"Warning: Ignoring setABRStrategy(\"+e+\") - unknown value.\")},getABRStrategy:function(){return w.getABRStrategy()},useDefaultABRRules:function(e){w.setUseDefaultABRRules(e)},addABRCustomRule:function(e,t,r){w.addABRCustomRule(e,t,r)},removeABRCustomRule:function(e){w.removeABRCustomRule(e)},removeAllABRCustomRule:function(){w.removeAllABRCustomRule()},setBandwidthSafetyFactor:function(e){w.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return w.getBandwidthSafetyFactor()},getAverageThroughput:function(e){var t=S.getThroughputHistory();return t?t.getAverageThroughput(e):0},setAbandonLoadTimeout:function(e){w.setAbandonLoadTimeout(e)},retrieveManifest:function(e,t){var r=Ie(),n=this;f.on(p.INTERNAL_MANIFEST_LOADED,(function e(i){i.error?t(null,i.error):t(i.manifest),f.off(p.INTERNAL_MANIFEST_LOADED,e,n),r.reset()}),n),Be(c).getInstance().initialize(e),r.load(e,q)},addUTCTimingSource:fe,removeUTCTimingSource:he,clearDefaultUTCTimingSources:function(){w.setUTCTimingSources([])},restoreDefaultUTCTimingSources:pe,setBufferToKeep:function(e){w.setBufferToKeep(e)},setBufferAheadToKeep:function(e){w.setBufferAheadToKeep(e)},setBufferPruningInterval:function(e){w.setBufferPruningInterval(e)},setStableBufferTime:function(e){w.setStableBufferTime(e)},getStableBufferTime:function(){return w.getStableBufferTime()},setBufferTimeAtTopQuality:function(e){w.setBufferTimeAtTopQuality(e)},getBufferTimeAtTopQuality:function(){return w.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(e){w.setBufferTimeAtTopQualityLongForm(e)},getBufferTimeAtTopQualityLongForm:function(){return w.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(e){w.setFragmentRetryAttempts(e)},setFragmentLoaderRetryInterval:function(e){w.setFragmentRetryInterval(e)},setManifestLoaderRetryAttempts:function(e){w.setManifestRetryAttempts(e)},setManifestLoaderRetryInterval:function(e){w.setManifestRetryInterval(e)},setXHRWithCredentialsForType:function(e,t){w.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return w.getXHRWithCredentialsForType(e)},setJumpGaps:function(e){w.setJumpGaps(e)},getJumpGaps:function(){return w.getJumpGaps()},setSmallGapLimit:function(e){w.setSmallGapLimit(e)},getSmallGapLimit:function(){return w.getSmallGapLimit()},getLowLatencyEnabled:function(){return w.getLowLatencyEnabled()},setLowLatencyEnabled:function(e){return w.setLowLatencyEnabled(e)},setPreloadData:function(e){return w.setPreloadData(e)},setManifestUpdateRetryInterval:function(e){w.setManifestUpdateRetryInterval(e)},getManifestUpdateRetryInterval:function(){return w.getManifestUpdateRetryInterval()},setLongFormContentDurationThreshold:function(e){w.setLongFormContentDurationThreshold(e)},setSegmentOverlapToleranceTime:function(e){w.setSegmentOverlapToleranceTime(e)},setCacheLoadThresholdForType:function(e,t){w.setCacheLoadThresholdForType(e,t)},getProtectionController:function(){return Se()},attachProtectionController:function(e){O=e},setProtectionData:function(e){y=e,x&&x.setProtectionData(y)},enableManifestDateHeaderTimeSource:function(e){w.setUseManifestDateHeaderTimeSource(e)},attachVideoContainer:function(e){if(!V.getElement())throw r;V.setVideoContainer(e)},attachTTMLRenderingDiv:function(e){if(!V.getElement())throw r;V.setTTMLRenderingDiv(e)},getUseDeadTimeLatencyForAbr:function(){return S.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(e){S.setUseDeadTimeLatency(e)},\ngetThumbnail:function(e){if(e<0)return null;var t=U.getIsDynamic()?se(e):e,r=x.getStreamForTime(t);if(null===r)return null;var n=r.getThumbnailController(),i=r.getStreamInfo();if(!n||!i)return null;var a=x.getTimeRelativeToStreamId(t,r.getId());return n.get(a)},setDefaultQualityFor:function(e,t){S||(S=ue(c).getInstance()),S.setDefaultQualityFor(e,t)},getDefaultQualityFor:function(e){return S.getDefaultQualityFor(e)},getDroppedFramesInfo:function(){return S.getDroppedFramesInfo()},getCurrentSegmentInfoFor:function(e){return S.getCurrentSegmentInfoFor(e)},onInitSegmentsLoaded:function(e){te=e},getThroughputDict:function(e){var t=S.getThroughputHistory();return t?t.getDict(e):{}},getInitializeDate:Le,updateSource:function(e){if(!v)throw l;\"string\"==typeof e&&Be(c).getInstance().initialize(e),$.video={},$.audio={},T=e,x.load(T,q)},switchSource:function(e){if(!v)throw l;\"string\"==typeof e&&Be(c).getInstance().initialize(e),$.video={},$.audio={},ee.min=0,ee.video=0,ee.audio=0,T=e,Q=0,V.setDataOffsetAttr(0),w.setCachedDurationOffset(\"offset\",0),w.setCachedDurationOffset(\"time\",0),w.setCachedDurationOffset(\"duration\",0),w.setAppendingSourceState(!1),X=!1,j=[],(A||R)&&Re(),ne()&&Ce()},appendSource:Fe,setEndOfStreamState:function(e){w&&w.setEndOfStreamState(e)},setP2pPermission:function(e){e||w.addBufferingCount()},setP2pType:function(e,t){var r,n=!1;switch(e){case\"yf-eg\":case\"yf-cg2\":window.YFDashIO&&(n=!0);break;case\"xl-eg\":case\"xl-cg2\":window.xyvp&&(n=!0);break;case\"ks-eg\":case\"ks-cg2\":window.KSLoader&&(n=!0);break;case\"bili-eg\":case\"bili-cg2\":window.DIYSdk&&(n=!0);break;case\"pear-eg\":case\"pear-cg2\":window.PearDownloader&&(n=!0)}n?window.__DASH_P2P_TYPE__=e:t?(r=t,new Promise((function(e,t){var n=document.createElement(\"script\");n.src=r,n.onload=function(){window.clearTimeout(W),e()},n.onerror=function(){window.clearTimeout(W),t(),f.trigger(p.PCDN_LOADED_ERROR,{code:a.DOWNLOAD_PCDN_SCRIPT_ERROR,url:r})},document.body.appendChild(n),W=window.setTimeout((function(){t(),f.trigger(p.PCDN_LOADED_ERROR,{code:a.DOWNLOAD_PCDN_SCRIPT_TIMEOUT,url:r})}),2e3)}))).then((function(){window.__DASH_P2P_TYPE__=e,g(\"[MediaPlayer] p2p Sdk Scripts Loaded\")})).catch((function(){(undefined)})):(undefined)},reset:function(){Ae(null),Te(null),y=null,z=!1,X=!1,Q=0,j=[],O&&(O.reset(),O=null),C&&(C.reset(),C=null),f.off(p.SEGMENTS_LOADED,Pe,E),f.off(p.BUFFER_LEVEL_UPDATED,we,E),f.off(p.PLAYBACK_ENDED,be,this),f.off(p.STREAM_BUFFERING_COMPLETED,be,this),f.off(p.PLAYBACK_TIME_UPDATED,Me,this)}},function(){v=!1,R=!1,A=!1,I=!0,O=null,y=null,P=null,p.extend(lr),w=ur(c).getInstance(),V=Vn(c).getInstance(),Q=0,K=!1,j=[],re={video:0,audio:0},Z=0,f.on(p.SEGMENTS_LOADED,Pe,E),f.on(p.BUFFER_LEVEL_UPDATED,we,E),f.on(p.PLAYBACK_ENDED,be,this),f.on(p.STREAM_BUFFERING_COMPLETED,be,this),f.on(p.PLAYBACK_TIME_UPDATED,Me,this)}(),E}vi.__dashjs_factory_name=\"MediaPlayer\";var Ai=s.a.getClassFactory(vi);Ai.events=lr,s.a.updateClassFactory(vi.__dashjs_factory_name,Ai);t.a=Ai},function(e,t,r){var n,i,o,u,l,d={encode:function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?(t.push(192|n>>6),t.push(128|63&n)):n<65536?(t.push(224|n>>12),t.push(128|63&n>>6),t.push(128|63&n)):(t.push(240|n>>18),t.push(128|63&n>>12),t.push(128|63&n>>6),t.push(128|63&n))}return t},decode:function(e){for(var t=[],r=0;r<e.length;){var n=e[r++];n<128||(n<224?(n=(31&n)<<6,n|=63&e[r++]):n<240?(n=(15&n)<<12,n|=(63&e[r++])<<6,n|=63&e[r++]):(n=(7&n)<<18,n|=(63&e[r++])<<12,n|=(63&e[r++])<<6,n|=63&e[r++])),t.push(String.fromCharCode(n))}return t.join(\"\")}},c={};n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",i=function(e){for(var t=0,r=[],i=0|e.length/3;0<i--;){var a=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,r.push(n.charAt(63&a>>18)),r.push(n.charAt(63&a>>12)),r.push(n.charAt(63&a>>6)),r.push(n.charAt(63&a))}return 2==e.length-t?(a=(e[t]<<16)+(e[t+1]<<8),r.push(n.charAt(63&a>>18)),r.push(n.charAt(63&a>>12)),r.push(n.charAt(63&a>>6)),r.push(\"=\")):1==e.length-t&&(a=e[t]<<16,r.push(n.charAt(63&a>>18)),\nr.push(n.charAt(63&a>>12)),r.push(\"==\")),r.join(\"\")},o=function(){for(var e=[],t=0;t<n.length;++t)e[n.charCodeAt(t)]=t;return e[\"=\".charCodeAt(0)]=0,e}(),u=function(e){for(var t=0,r=[],n=0|e.length/4;0<n--;){var i=(o[e.charCodeAt(t)]<<18)+(o[e.charCodeAt(t+1)]<<12)+(o[e.charCodeAt(t+2)]<<6)+o[e.charCodeAt(t+3)];r.push(255&i>>16),r.push(255&i>>8),r.push(255&i),t+=4}return r&&(\"=\"==e.charAt(t-2)?(r.pop(),r.pop()):\"=\"==e.charAt(t-1)&&r.pop()),r},l={encode:function(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join(\"\")}},c.decodeArray=function(e){var t=u(e);return new Uint8Array(t)},c.encodeASCII=function(e){var t=l.encode(e);return i(t)},c.decodeASCII=function(e){var t=u(e);return l.decode(t)},c.encode=function(e){var t=d.encode(e);return i(t)},c.decode=function(e){var t=u(e);return d.decode(t)},t.decode=c.decode,t.decodeArray=c.decodeArray,t.encode=c.encode,t.encodeASCII=c.encodeASCII},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.BUFFERING=void 0;var n=r(4),i=.5;t.BUFFERING={PLAYBACK:{PLAYING:1,SEEKING:2,SWITCHING_QUALITY:3,SWITCHING_SOURCE:4,UPDATING_SOURCE:5,APPENDING_SOURCE:6},TYPE:{UNKNOWN:0,SEEKING:10,SEEKING_INSIDE_BUFFERED:11,SEEKING_OUTSIDE_BUFFERED:12,NETWORK:20,NETWORK_CONNECT_TIMEOUT:21,NETWORK_READING_TIMEOUT:22,NETWORK_DOWNLOAD_TIMEOUT:23,NETWORK_DOWNLOAD_ERROR:24,NETWORK_POOR:25,MEDIA:30,MEDIA_ERR_ABORTED:31,MEDIA_ERR_NETWORK:32,MEDIA_ERR_DECODE:33,MEDIA_ERR_SRC_NOT_SUPPORTED:34,MEDIA_DECODING_PERFORMANCE:35,GAP:40,GAP_BEFORE_CURRENT:41,GAP_AFTER_CURRENT:42,PERFORMANCE:50,PERFORMANCE_UNKNOWN:51,INTERNAL:60,INTERNAL_STARTING:61,INTERNAL_ENDING:62,INTERNAL_UNNORMAL_RANGES:63}};var a=function(){function e(e){this.video=e}return e.prototype.getInfo=function(e){var r={type:-1};if(!e)return r;try{var n=this.video,a=n.currentTime,o=n.duration,s=n.readyState,u=n.buffered,l=u&&u.length,d=n.seeking,c=t.BUFFERING.TYPE.UNKNOWN,f