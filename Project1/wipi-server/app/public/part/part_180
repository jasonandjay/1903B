b),g(void 0,new Xa(1,\n\"request timeout\")))},headersReceived:function(b){d.trigger(x.FRAGMENT_LOADING_HEADER_RECEIVED,{request:c,headers:b})}})):g(void 0,new Xa(2,\"request is null\"))},abort:function(){f&&f.abort()},reset:function(){f&&(f.abort(),f=null)},resetPreloadData:function(){g=b.mediaPlayerModel.getPreloadData();f.setPreloadData(g)}},g=b.mediaPlayerModel.getPreloadData(),f=rc(c).create({errHandler:b.errHandler,videoModel:b.videoModel,metricsModel:b.metricsModel,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier,\nuseFetch:b.mediaPlayerModel.getLowLatencyEnabled(),dashMetrics:b.dashMetrics,preloadData:g}),e}function Vb(b){function c(b){return b&&b.type&&b.type===da.INIT_SEGMENT_TYPE}function d(){for(var b in z)z[b].reset();z={}}function e(b){if(z[b.request.mediaType]===b.sender){var d=b.request,e=b.response,f=c(d),l=d.mediaInfo.streamInfo;if(b.error&&(b.request.mediaType!==G.AUDIO&&b.request.mediaType!==G.VIDEO&&b.request.mediaType!==G.FRAGMENTED_TEXT||h.trigger(x.SERVICE_LOCATION_BLACKLIST_ADD,{entry:b.request.serviceLocation})),\ne&&l){var l=l.id,m=b.type!==x.FRAGMENT_LOADING_PROGRESS,k=new ee,d=(k.streamId=l,k.mediaInfo=d.mediaInfo,k.segmentType=d.type,k.start=d.startTime,k.duration=d.duration,k.end=k.start+k.duration,k.bytes=e,k.index=d.index,k.quality=d.quality,k.representationId=d.representationId,k.endFragment=m,k);h.trigger(f?x.INIT_FRAGMENT_LOADED:x.MEDIA_FRAGMENT_LOADED,{chunk:d,fragmentModel:b.sender})}else g(\"No \"+d.mediaType+\" bytes to push or stream is inactive.\")}}b=b||{};var f=this.context,g=Ja(f).getInstance().log,\nh=l(f).getInstance(),m=b.errHandler,k=b.mediaPlayerModel,q=b.metricsModel,n=b.abrController,t=b.streamController,p=b.videoModel,u=void 0,z=void 0;return u={getModel:function(c){var d=z[c];return d||(d=pb(f).create({metricsModel:q,fragmentLoader:fe(f).create({metricsModel:q,videoModel:p,mediaPlayerModel:k,errHandler:m,requestModifier:Kc(f).getInstance(),dashMetrics:b.dashMetrics,abrController:n,streamController:t})}),z[c]=d),d},isInitializationRequest:c,reset:function(){h.off(x.FRAGMENT_LOADING_COMPLETED,\ne,this);d()}},d(),h.on(x.FRAGMENT_LOADING_COMPLETED,e,u),u}function vb(b){function c(){for(var b=N?N.length:0,c=0;c<b;c++)N[c].getFragmentModel().removeExecutedRequestsBeforeTime(f()+e()),N[c].reset();N=[];Q=U=!1;w.off(x.CURRENT_TRACK_CHANGED,k,fa)}function d(){ca&&ca.pause();T&&(T.reset(),T=null);c();E=null;ba={};F=!1;v=null;w.off(x.DATA_UPDATE_COMPLETED,z,fa);w.off(x.BUFFERING_COMPLETED,u,fa);w.off(x.KEY_ERROR,h,fa);w.off(x.SERVER_CERTIFICATE_UPDATED,h,fa);w.off(x.LICENSE_REQUEST_COMPLETE,h,fa);\nw.off(x.KEY_SYSTEM_SELECTED,h,fa);w.off(x.KEY_SESSION_CREATED,h,fa);w.off(x.KEY_STATUSES_CHANGED,h,fa)}function e(){return E?E.duration:NaN}function f(){return E?E.start:NaN}function g(){if(!(Z&&Z.hasOwnProperty(\"getBitrateList\")&&S&&S.hasOwnProperty(\"getAllMediaInfoForType\")&&S.hasOwnProperty(\"getEventsFor\")))throw Error(\"Missing config parameter(s)\");}function h(b){b.error&&(B.mediaKeySessionError(b.error),v(b.error),d())}function m(b){var c,d=b.type,e=void 0;if(d===G.MUXED&&b)return v(e=\"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines\"),\nB.manifestError(e,\"multiplexedrep\",A.getValue()),!1;if(d===G.TEXT||d===G.FRAGMENTED_TEXT||d===G.EMBEDDED_TEXT||d===G.IMAGE)return!0;if(c=b.codec,v(d+\" codec: \"+c),b.contentProtection&&!H.supportsEncryptedMedia())B.capabilityError(\"encryptedmedia\");else if(!H.supportsCodec(c))return v(d+\"Codec (\"+c+\") is not supported.\"),!1;return!0}function k(b){if(b.newMediaInfo.streamInfo.id===E.id){var c=D(b.oldMediaInfo);if(c){var d=ca.getTime();v(\"Stream -  Process track changed at current time \"+d);var d=b.newMediaInfo,\ne=A.getValue();v(\"Stream -  Update stream controller\");e.refreshManifestOnSwitchTrack?(v(\"Stream -  Refreshing manifest for switch track\"),X=b,M.refreshManifest()):(c.updateMediaInfo(d),d.type!==G.FRAGMENTED_TEXT&&(Z.updateTopQualityIndex(d),c.switchTrackAsked(),c.getFragmentModel().abortRequests()))}}}function q(c,d){var e=S.getAllMediaInfoForType(E,c),f;if(e&&0!==e.length){for(var g=0,h=e.length;g<h;g++)(f=e[g],c!==G.EMBEDDED_TEXT)&&m(f)&&I.addTrack(f);c!==G.EMBEDDED_TEXT&&0!==I.getTracksFor(c,\nE).length&&(I.checkInitialMediaSettingsForType(c,E),c=I.getCurrentTrackFor(c,E),e=ge(y).create({type:c.type===G.TEXT?c.mimeType:c.type,mimeType:c.mimeType,timelineConverter:ra,adapter:S,manifestModel:A,dashManifestModel:C,mediaPlayerModel:P,metricsModel:L,dashMetrics:b.dashMetrics,baseURLController:b.baseURLController,stream:fa,abrController:Z,domStorage:b.domStorage,playbackController:ca,mediaController:I,streamController:Ea,videoModel:Ma,errHandler:B}),e.initialize(d),Z.updateTopQualityIndex(c),\nN.push(e),c.type===G.TEXT||c.type===G.FRAGMENTED_TEXT||e.updateMediaInfo(c))}else v(\"No \"+c+\" data.\")}function n(b){var c=C.getAdaptationForType(A.getValue(),E.index,b,E);if(!c||!Array.isArray(c.Representation_asArray))return null;c.Representation_asArray=c.Representation_asArray.filter(function(b,d){if(0===d)return!0;b=C.getCodec(c,d,!0);return!!H.supportsCodec(b)||(v(\"[Stream] codec not supported: \"+b),!1)})}function t(){for(var b=N.length,c=ba.audio||ba.video?Error(1,\"Data update failed\",null):\nnull,d=0;d<b;d++)if(N[d].isUpdating()||F)return;Q&&w.trigger(x.STREAM_INITIALIZED,{streamInfo:E,error:c})}function p(){for(var b=0,c=N.length;b<c;b++)N[b].createBuffer()}function u(b){if(b.streamInfo===E){b=ea();var c=b.length;if(0!==c){for(var d=0;d<c;d++)if(!b[d].isBufferingCompleted()&&(b[d].getType()===G.AUDIO||b[d].getType()===G.VIDEO))return void v(\"[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because streamProcessor \"+b[d].getType()+\" is not buffering completed\");\nv(\"[Stream] onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED\");w.trigger(x.STREAM_BUFFERING_COMPLETED,{streamInfo:E})}else v(\"[Stream] onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined\")}}function z(b){var c=b.sender.getStreamProcessor();c.getStreamInfo()===E&&(ba[c.getType()]=b.error,t())}function D(b){return!!b&&ea().filter(function(c){return c.getType()===b.type})[0]}function ea(){for(var b=N.length,c=[],d=void 0,e=void 0,f=0;f<b;f++)(d=\n(e=N[f]).getType())!==G.AUDIO&&d!==G.VIDEO&&d!==G.FRAGMENTED_TEXT||c.push(e);return c}b=b||{};var y=this.context,v=Ja(y).getInstance().log,w=l(y).getInstance(),A=b.manifestModel,C=b.dashManifestModel,P=b.mediaPlayerModel,M=b.manifestUpdater,S=b.adapter,H=b.capabilities,B=b.errHandler,ra=b.timelineConverter,L=b.metricsModel,Z=b.abrController,ca=b.playbackController,I=b.mediaController,Ma=b.videoModel,Ea=b.streamController,fa=void 0,N=void 0,U=void 0,Q=void 0,E=void 0,ba=void 0,F=void 0,T=void 0,W=\nvoid 0,X=void 0,fa={initialize:function(b){E=b},activate:function(b){if(!U){w.on(x.CURRENT_TRACK_CHANGED,k,fa);g();var c=void 0,d=Ma.getElement();W||((W=he(y).create()).setConfig({manifestModel:A,manifestUpdater:M,playbackController:ca}),c=S.getEventsFor(E),W.addInlineEvents(c));F=!0;n(G.VIDEO);n(G.AUDIO);(null===d||d&&\"VIDEO\"===d.nodeName)&&q(G.VIDEO,b);q(G.AUDIO,b);\"open\"!==b.readyState?(b.addEventListener(\"sourceopen\",p,!1),b.addEventListener(\"webkitsourceopen\",p,!1)):p();(Q=!0,F=!1,0===N.length)?\n(B.manifestError(\"No streams to play.\",\"nostreams\",A.getValue()),v(\"No streams to play.\")):t();U=!0}},deactivate:c,getDuration:e,getStartTime:f,getId:function(){return E?E.id:NaN},getStreamInfo:function(){return E},getFragmentController:function(){return T},getEventController:function(){return W},getBitrateListFor:function(b){g();a:{for(var c=N.length,d,e=0;e<c;e++)if((d=N[e]).getType()===b){b=d.getMediaInfo();break a}b=null}return Z.getBitrateList(b)},startEventController:function(){W&&W.start()},\nstopEventController:function(){W&&W.stop()},updateData:function(b){if(v(\"Manifest updated... updating data system wide.\"),U=!1,F=!0,E=b,W)b=S.getEventsFor(E),W.addInlineEvents(b);n(G.VIDEO);n(G.AUDIO);b=0;for(var c=N.length;b<c;b++){var d=N[b],e=S.getMediaInfoForType(E,d.getType());Z.updateTopQualityIndex(e);d.updateMediaInfo(e)}if(X&&\"fragmentedText\"!==X.newMediaInfo.type){b=D(X.oldMediaInfo);if(!b)return;b.switchTrackAsked();X=void 0}F=!1;t()},reset:d,getProcessors:ea,setMediaSource:function(b){for(var c=\n0;c<N.length;)m(N[c].getMediaInfo())?(N[c].setMediaSource(b),c++):(N[c].reset(),N.splice(c,1));for(b=0;b<N.length;b++)N[b].dischargePreBuffer();0===N.length&&(B.manifestError(\"No streams to play.\",\"nostreams\",A.getValue()),v(\"No streams to play.\"))}};c();E=null;ba={};F=!1;return T=ie(y).create({mediaPlayerModel:P,videoModel:Ma,metricsModel:L,errHandler:B,dashMetrics:b.dashMetrics,abrController:Z,streamController:Ea}),w.on(x.BUFFERING_COMPLETED,u,fa),w.on(x.DATA_UPDATE_COMPLETED,z,fa),fa}function dc(){function b(){null!==\nu&&(clearInterval(u),u=null)}function c(c){b();isNaN(c)&&!isNaN(p)&&(c=1E3*p);isNaN(c)||(n(\"Refresh manifest in \"+c+\" milliseconds.\"),u=setTimeout(f,c))}function d(){v=!0;var b=D.getValue(),c=b.url;(b=y.getLocation(b))&&(c=b);ea.load(c)}function e(b){if(w.getAppendingSourceState()){var d=w.getCachedDurationOffset(\"offset\");b.mediaPresentationDuration+=d;b.Period.duration+=d;b.Period_asArray.duration+=d}D.setValue(b);var d=new Date,e=(d.getTime()-b.loadedTime.getTime())/1E3;2147483647<1E3*(p=y.getManifestUpdatePeriod(b,\ne))&&(p=2147483.647);t.trigger(x.MANIFEST_UPDATED,{manifest:b});n(\"Manifest has been refreshed at \"+d+\"[\"+d.getTime()/1E3+\"] \");z||c()}function f(){z&&!w.getScheduleWhilePaused()||(v?c(w.getManifestUpdateRetryInterval()):d())}function g(b){b.error?A.manifestError(b.error.message,b.error.code,\"\",\"\",b.error.errorCode,b.error.httpCode):e(b.manifest)}function h(){z=!1;c()}function m(){z=!0;b()}function k(){v=!1}var q=this.context,n=Ja(q).getInstance().log,t=l(q).getInstance(),p=void 0,u=void 0,z=void 0,\nv=void 0,ea=void 0,D=void 0,y=void 0,w=void 0,A=void 0;return{initialize:function(){p=NaN;v=!1;z=!0;b();t.on(x.STREAMS_COMPOSED,k,this);t.on(x.PLAYBACK_STARTED,h,this);t.on(x.PLAYBACK_PAUSED,m,this);t.on(x.INTERNAL_MANIFEST_LOADED,g,this)},setManifest:function(b){e(b)},refreshManifest:d,setConfig:function(b){b&&(b.manifestModel&&(D=b.manifestModel),b.dashManifestModel&&(y=b.dashManifestModel),b.mediaPlayerModel&&(w=b.mediaPlayerModel),b.manifestLoader&&(ea=b.manifestLoader),b.errHandler&&(A=b.errHandler))},\nreset:function(){t.off(x.PLAYBACK_STARTED,h,this);t.off(x.PLAYBACK_PAUSED,m,this);t.off(x.STREAMS_COMPOSED,k,this);t.off(x.INTERNAL_MANIFEST_LOADED,g,this);p=NaN;v=!1;z=!0;b()}}}function Oa(b,c,d){return c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b}function Tb(){function b(b){var c;for(c=0;c<Z.length;c++)if(Z[c].rulename===b)return c;return-1}var c,d,e,f=void 0,g=void 0,h=void 0,l=void 0,m=void 0,k=void 0,q=void 0,n=void 0,t=void 0,p=void 0,u=void 0,\nz=void 0,v=void 0,D=void 0,y=void 0,w=void 0,A=void 0,C=void 0,P=void 0,x=void 0,S=void 0,M=void 0,H=void 0,B=void 0,L=void 0,Z=void 0,ca=void 0,N=void 0,Ma=void 0,fa=void 0,I=void 0,U=void 0,E=void 0,Q=void 0,ba=void 0,F=void 0,W=void 0,T=void 0,O=void 0;return c={setABRStrategy:function(b){M=b},getABRStrategy:function(){return M},setUseDefaultABRRules:function(b){H=b},getUseDefaultABRRules:function(){return H},getABRCustomRules:function(){return Z},addABRCustomRule:function(c,d,e){var f=b(d);-1===\nf?Z.push({type:c,rulename:d,rule:e}):(Z[f].type=c,Z[f].rule=e)},removeABRCustomRule:function(c){c=b(c);-1!==c&&Z.splice(c,1)},removeAllABRCustomRule:function(){Z=[]},setBandwidthSafetyFactor:function(b){A=b},getBandwidthSafetyFactor:function(){return A},setAbandonLoadTimeout:function(b){C=b},getAbandonLoadTimeout:function(){return C},setLastBitrateCachingInfo:function(b,c){p.enabled=b;void 0===c||isNaN(c)||\"number\"!=typeof c||(p.ttl=c)},getLastBitrateCachingInfo:function(){return p},setLastMediaSettingsCachingInfo:function(b,\nc){u.enabled=b;void 0===c||isNaN(c)||\"number\"!=typeof c||(u.ttl=c)},getLastMediaSettingsCachingInfo:function(){return u},setStableBufferTime:function(b){z=b},getStableBufferTime:function(){return isNaN(z)?L?20:12:z},setBufferTimeAtTopQuality:function(b){v=b},getBufferTimeAtTopQuality:function(){return v},setBufferTimeAtTopQualityLongForm:function(b){D=b},getBufferTimeAtTopQualityLongForm:function(){return D},setLongFormContentDurationThreshold:function(b){y=b},getLongFormContentDurationThreshold:function(){return y},\nsetSegmentOverlapToleranceTime:function(b){w=b},getSegmentOverlapToleranceTime:function(){return w},getCacheLoadThresholdForType:function(b){return N[b]},setCacheLoadThresholdForType:function(b,c){N[b]=c},setBufferToKeep:function(b){q=b},getBufferToKeep:function(){return q},setBufferAheadToKeep:function(b){n=b},getBufferAheadToKeep:function(){return n},setBufferPruningInterval:function(b){t=b},getBufferPruningInterval:function(){return t},setFragmentRetryAttempts:function(b){P[da.MEDIA_SEGMENT_TYPE]=\nb},getFragmentRetryAttempts:function(){return P[da.MEDIA_SEGMENT_TYPE]},setManifestRetryAttempts:function(b){P[da.MPD_TYPE]=b},getManifestRetryAttempts:function(){return P[da.MPD_TYPE]},setRetryAttemptsForType:function(b,c){P[b]=c},getRetryAttemptsForType:function(b){return P[b]},setFragmentRetryInterval:function(b){x[da.MEDIA_SEGMENT_TYPE]=b},getFragmentRetryInterval:function(){return x[da.MEDIA_SEGMENT_TYPE]},setManifestRetryInterval:function(b){x[da.MPD_TYPE]=b},getManifestRetryInterval:function(){return x[da.MPD_TYPE]},\nsetRetryIntervalForType:function(b,c){x[b]=c},getRetryIntervalForType:function(b){return x[b]},setWallclockTimeUpdateInterval:function(b){S=b},getWallclockTimeUpdateInterval:function(){return S},setScheduleWhilePaused:function(b){k=b},getScheduleWhilePaused:function(){return k},getUseSuggestedPresentationDelay:function(){return g},setUseSuggestedPresentationDelay:function(b){g=b},setLiveDelayFragmentCount:function(b){l=b},getLiveDelayFragmentCount:function(){return l},getLiveDelay:function(){return I?\nm||3:m},setLiveDelay:function(b){m=b},setUseManifestDateHeaderTimeSource:function(b){f=b},getUseManifestDateHeaderTimeSource:function(){return f},setUTCTimingSources:function(b){h=b},getUTCTimingSources:function(){return h},setXHRWithCredentialsForType:function V(b,c){b?B[b]=!!c:Object.keys(B).forEach(function(b){V(b,c)})},getXHRWithCredentialsForType:function(b){b=B[b];return void 0===b?B.default:b},setFastSwitchEnabled:function(b){L=b},getFastSwitchEnabled:function(){return L},setMovingAverageMethod:function(b){ca=\nb},getMovingAverageMethod:function(){return ca},setJumpGaps:function(b){Ma=b},getJumpGaps:function(){return Ma},setSmallGapLimit:function(b){fa=b},getSmallGapLimit:function(){return fa},getLowLatencyEnabled:function(){return I},setLowLatencyEnabled:function(b){I=b},getPreloadData:function(){return U},setPreloadData:function(b){U=b},setManifestUpdateRetryInterval:function(b){E=b},getManifestUpdateRetryInterval:function(){return E},setAppendingSourceState:function(b){b!==Q&&(Q=b)},getAppendingSourceState:function(){return Q},\nsetCachedDurationOffset:function(b,c){c=parseFloat(c.toFixed(5));ba[b]=c},getCachedDurationOffset:function(b){return b?ba[b]:ba},clearCachedDruationOffset:function(){ba={offset:0,duration:0}},setEndOfStreamState:function(b){F=b},getEndOfStreamState:function(){return F},setP2pPermission:function(b){W=b},getP2pPermission:function(){return W},addP2pSDKErrorCount:function(){12<(T+=1)&&(W=!1)},getP2pSDKErrorCount:function(){return T},addBufferingCount:function(){O+=1},getBufferingCount:function(){return O},\nreset:function(){}},h=[],g=!1,f=!0,k=!0,M=G.ABR_STRATEGY_DYNAMIC,H=!0,L=!1,p={enabled:!0,ttl:36E4},u={enabled:!0,ttl:36E4},l=4,m=void 0,q=20,n=80,t=10,z=NaN,v=30,D=60,y=600,w=.2,A=.8,C=1E4,S=50,Ma=!1,fa=.8,E=100,B={default:!1},Z=[],ca=G.MOVING_AVERAGE_SLIDING_WINDOW,I=!1,Q=!1,ba={time:0,duration:0,offset:0},Oa(d={},da.MPD_TYPE,3),Oa(d,da.XLINK_EXPANSION_TYPE,1),Oa(d,da.MEDIA_SEGMENT_TYPE,3),Oa(d,da.INIT_SEGMENT_TYPE,3),Oa(d,da.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),Oa(d,da.INDEX_SEGMENT_TYPE,3),Oa(d,\nda.OTHER_TYPE,3),P=d,Oa(e={},da.MPD_TYPE,500),Oa(e,da.XLINK_EXPANSION_TYPE,500),Oa(e,da.MEDIA_SEGMENT_TYPE,1E3),Oa(e,da.INIT_SEGMENT_TYPE,1E3),Oa(e,da.BITSTREAM_SWITCHING_SEGMENT_TYPE,1E3),Oa(e,da.INDEX_SEGMENT_TYPE,1E3),Oa(e,da.OTHER_TYPE,1E3),x=e,(N={})[G.VIDEO]=25,N[G.AUDIO]=5,F=!0,W=!0,T=0,O=0,c}function Sb(){function b(b){var c=Date.parse(b);if(isNaN(c)){var d=void 0,e=void 0;b=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\\.[0-9]*)?)?(?:([+\\-])([0-9]{2})([0-9]{2}))?/.exec(b);\nc=(d=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),b[6]&&(parseInt(b[6],10)||0),b[7]&&1E3*parseFloat(b[7])||0),b[9]&&b[10]&&(e=60*parseInt(b[9],10)+parseInt(b[10],10),d+=(\"+\"===b[8]?-1:1)*e*6E4),(new Date(d)).getTime())}return c}function c(b){return Date.parse(b)}function d(b){return Date.parse(b)}function e(b,c,d){d()}function f(c,d,e){c=b(c);isNaN(c)?e():d(c)}function g(b,c,d,e,f){var h,l,m=!1,k=new XMLHttpRequest,q=f?da.HEAD:da.GET,n=c.match(/\\S+/g);\nif(c=n.shift(),h=function(){m||(m=!0,n.length?g(b,n.join(\" \"),d,e,f):e())},l=function(){var c=void 0,e=void 0;200===k.status&&(c=f?k.getResponseHeader(\"Date\"):k.response,e=b(c),isNaN(e)||(d(e),m=!0))},t.isRelative(c)){var p=w.resolve();p&&(c=t.resolve(c,p.url))}k.open(q,c);k.timeout=5E3;k.onload=l;k.onloadend=h;k.send()}function h(b,c,e){g(d,b,c,e,!0)}function m(b,c,d){u=!1;n.trigger(x.TIME_SYNCHRONIZATION_COMPLETED,{time:c,offset:d,error:b?new Xa(1):null})}var k=this.context,q=Ja(k).getInstance().log,\nn=l(k).getInstance(),t=Ib(k).getInstance(),p=void 0,u=void 0,z=void 0,v=void 0,D=void 0,y=void 0,w=void 0;return{initialize:function(d,l){z=l;p=0;u=!1;!1;v={\"urn:mpeg:dash:utc:http-head:2014\":h,\"urn:mpeg:dash:utc:http-xsdate:2014\":g.bind(null,b),\"urn:mpeg:dash:utc:http-iso:2014\":g.bind(null,c),\"urn:mpeg:dash:utc:direct:2014\":f,\"urn:mpeg:dash:utc:http-head:2012\":h,\"urn:mpeg:dash:utc:http-xsdate:2012\":g.bind(null,b),\"urn:mpeg:dash:utc:http-iso:2012\":g.bind(null,c),\"urn:mpeg:dash:utc:direct:2012\":f,\n\"urn:mpeg:dash:utc:http-ntp:2014\":e,\"urn:mpeg:dash:utc:ntp:2014\":e,\"urn:mpeg:dash:utc:sntp:2014\":e};u||(!function mc(b,c){var d=c||0;c=b[d];var e=function(b,c){var d=!b||!c;d&&z?(b=D.getReadOnlyMetricsFor(G.STREAM),b=y.getLatestMPDRequestHeaderValueByID(b,\"Date\"),b=null!==b?(new Date(b)).getTime():Number.NaN,isNaN(b)?m(!0):(p=b-(new Date).getTime(),m(!1,b/1E3,p))):m(d,b,c)};u=!0;c?v.hasOwnProperty(c.schemeIdUri)?v[c.schemeIdUri](c.value,function(b){var c=(new Date).getTime(),d=b-c;p=d;q(\"Local time:      \"+\nnew Date(c));q(\"Server time:     \"+new Date(b));q(\"Difference (ms): \"+d);e(b,d)},function(){mc(b,d+1)}):mc(b,d+1):(p=0,e())}(d),!0)},getOffsetToDeviceTimeMs:function(){return p},setConfig:function(b){b&&(b.metricsModel&&(D=b.metricsModel),b.dashMetrics&&(y=b.dashMetrics),b.baseURLController&&(w=b.baseURLController))},reset:function(){!1;u=!1}}}function ib(){return{areEqual:function(b,c){return je()(b,c)}}}function Nb(){function b(b,c,d){d=f.getBaseURLsFromElement(d);b[c]?g.areEqual(d,b[c].data.baseUrls)||\n(b[c].data.baseUrls=d,b[c].data.selectedIdx=NaN):b[c]=new fd(d)}function c(){e=new fd}var d,e=void 0,f=void 0,g=gd(this.context).getInstance();return d={reset:c,update:function(c){!function(c){var d=f.getBaseURLsFromElement(c);g.areEqual(d,e.data.baseUrls)||(e.data.baseUrls=d,e.data.selectedIdx=NaN);c.Period_asArray&&c.Period_asArray.forEach(function(c,d){b(e.children,d,c);c.AdaptationSet_asArray&&c.AdaptationSet_asArray.forEach(function(c,g){b(e.children[d].children,g,c);c.Representation_asArray&&\nc.Representation_asArray.sort(f.getRepresentationSortFunction()).forEach(function(c,f){b(e.children[d].children[g].children,f,c)})})})}(c)},getForPath:function(b){var c=e,d=[c.data];return b&&b.forEach(function(b){(c=c.children[b])&&d.push(c.data)}),d.filter(function(b){return b.baseUrls.length})},invalidateSelectedIndexes:function(b){!function Va(b,c){c=c||e;b(c.data);c.children&&c.children.forEach(function(c){return Va(b,c)})}(function(c){isNaN(c.selectedIdx)||b===c.baseUrls[c.selectedIdx].serviceLocation&&\n(c.selectedIdx=NaN)})},setConfig:function(b){b.dashManifestModel&&(f=b.dashManifestModel)}},c(),d}function wb(b){return{select:function(b){return b&&function(b){var c=0,d=[],e=0,f=void 0,g=void 0;if((g=b.sort(function(b,c){b=b.dvb_priority-c.dvb_priority;return isNaN(b)?0:b}).filter(function(b,c,d){return!c||d[0].dvb_priority&&b.dvb_priority&&d[0].dvb_priority===b.dvb_priority})).length)return 1<g.length&&(g.forEach(function(b){c+=b.dvb_weight;d.push(c)}),f=Math.floor(Math.random()*(c-1)),d.every(function(b,\nc){return e=c,!(f<b)})),g[e]}((c=[],b.filter(function(){return!0}).filter(function(b){return!c.length||!b.dvb_priority||-1===c.indexOf(b.dvb_priority)})));var c}}}function eb(b){return{select:function(b){var c=0,d=void 0;return b&&b.some(function(b,d){return c=d,!0})&&(d=b[c]),d}}}function Eb(){var b,c=this.context,d=l(c).getInstance(),e=void 0,f=void 0,g=void 0,h=void 0;return b={chooseSelectorFromManifest:function(b){if(!e||!e.hasOwnProperty(\"getIsDVB\"))throw Error(\"Missing config parameter(s)\");\n!0;h=e.getIsDVB(b)?g:f},select:function(b){var c=b.baseUrls,e=b.selectedIdx;if(!isNaN(e))return c[e];if(e=h.select(c))return b.selectedIdx=c.indexOf(e),e;d.trigger(x.URL_RESOLUTION_FAILED,{error:Error(1,\"Failed to resolve a valid URL\")})},reset:function(){},setConfig:function(b){b.selector&&(h=b.selector);b.dashManifestModel&&(e=b.dashManifestModel)}},f=ke(c).create({}),g=le(c).create({}),h=f,b}function ub(){var b=void 0,c=void 0,d=this.context,e=l(d).getInstance(),f=Ib(d).getInstance(),g=void 0,\nh=void 0;return b={reset:function(){g.reset();h.reset()},initialize:function(b){g.setConfig({dashManifestModel:c});h.setConfig({dashManifestModel:c});g.update(b);h.chooseSelectorFromManifest(b)},resolve:function(b){b=g.getForPath(b).reduce(function(b,c){return(c=h.select(c))?(f.isRelative(c.url)?b.url=f.resolve(c.url,b.url):(b.url=c.url,b.serviceLocation=c.serviceLocation),b.urls=c.urls,b.availabilityTimeOffset=c.availabilityTimeOffset,b.availabilityTimeComplete=c.availabilityTimeComplete,b):new Lc},\nnew Lc);if(!f.isRelative(b.url))return b},setConfig:function(b){b.baseURLTreeModel&&(g=b.baseURLTreeModel);b.baseURLSelector&&(h=b.baseURLSelector);b.dashManifestModel&&(c=b.dashManifestModel)}},g=me(d).create(),h=ne(d).create(),e.on(x.SERVICE_LOCATION_BLACKLIST_CHANGED,function(b){g.invalidateSelectedIndexes(b.entry)},b),b}function Xb(){return{createMediaSource:function(){var b=\"WebKitMediaSource\"in window;return\"MediaSource\"in window?new MediaSource:b?new WebKitMediaSource:null},attachMediaSource:function(b,\nc){b=window.URL.createObjectURL(b);return c.setSource(b),b},detachMediaSource:function(b){b.setSource(null)},setDuration:function Hc(b,c){return b.duration!=c&&function(b,c){var d=void 0,e=function(){for(var c=!1,d=0;d<b.length;d++)b[d].updating&&(c=!0);return c};if(!b.length||!e())return void c();var f=function(){e()||(clearInterval(d),c())},g=function kb(){this.removeEventListener(\"updateend\",kb,!1);this.removeEventListener(\"abort\",kb,!1);this.removeEventListener(\"error\",kb,!1);e()||c()};if(\"function\"==\ntypeof b[0].addEventListener)try{for(var h=0;h<b.length;h++)b[h].updating&&(b[h].addEventListener(\"updateend\",g,!1),b[h].addEventListener(\"abort\",g,!1),b[h].addEventListener(\"error\",g,!1))}catch(kb){d=setInterval(f,50)}else d=setInterval(f,50)}(b.sourceBuffers,function(){if(\"open\"===b.readyState)b.duration=c;else var d=setTimeout(function(){clearTimeout(d);Hc(b,c)},50)}),b.duration},setSeekable:function(b,c,d){b&&\"function\"==typeof b.setLiveSeekableRange&&\"function\"==typeof b.clearLiveSeekableRange&&\n\"open\"===b.readyState&&0<=c&&c<d&&(b.clearLiveSeekableRange(),b.setLiveSeekableRange(c,d))},signalEndOfStream:function(b){var c=b.sourceBuffers,d=c.length;if(\"open\"===b.readyState){for(var e=0;e<d;e++)if(c[e].updating||0===c[e].buffered.length)return;b.endOfStream()}}}}function Yb(){function b(){if(Da){var b=ua.getPlaybackQuality();b&&F.addDroppedFrames(G.VIDEO,b)}}function c(){if(!(!xa.getJumpGaps()||!na||0===na.getProcessors().length||Ka.isSeeking()||Ca||qa||sa||ga)&&40<=++Na){var b=Ka.getTime();\nif(Ia===b){for(var c=na.getProcessors(),d=xa.getSmallGapLimit(),e=void 0,f=0;f<c.length;f++){var g=c[f].getBuffer(),h=g&&g.getAllBufferRanges&&g.getAllBufferRanges(),g=void 0;if(h&&!(1>=h.length)){for(var l=0;l<h.length;l++)if(b<h.start(l)){g=h.start(l);break}0<g&&(h=g-b,0<h&&h<=d&&(void 0===e||g>e)&&(e=g))}}c=Ka.getTimeToStreamEnd();void 0===e&&!isNaN(c)&&c<d&&(e=b+c);0<e&&(!isNaN(c)&&e>=b+c?(L(\"Jumping media gap (discontinuity) at time \",b,\". Jumping to end of the stream\"),Z.trigger(x.PLAYBACK_ENDED)):\n(L(\"Jumping media gap (discontinuity) at time \",b,\". Jumping to time position\",e),Ka.seek(e)))}else Ia=b;Na=0}}function d(b){var c=k(b.seekTime);Aa&&(g(),va=!1);c&&c!==na?(y(Pa.END_OF_PERIOD_STOP_REASON),n(na,c,b.seekTime)):y(Pa.USER_REQUEST_STOP_REASON);w(xb.SEEK_START_REASON)}function e(){L(\"[StreamController][onPlaybackStarted]\");ya?(ya=!1,w(xb.INITIAL_PLAYOUT_START_REASON)):Ca&&(Ca=!1,w(xb.RESUME_FROM_PAUSE_START_REASON),h())}function f(b){L(\"[StreamController][onPlaybackPaused]\");b.ended||(Ca=\n!0,y(Pa.USER_REQUEST_STOP_REASON),h())}function g(){L(\"[StreamController][toggleEndPeriodTimer] stop end period timer.\");clearTimeout(Aa);Aa=void 0}function h(){if(va)if(Aa)g();else{var b=Ka.getTimeToStreamEnd(),b=0<b?1E3*b:0;L(\"[StreamController][toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in \"+b+\" milliseconds\");Aa=setTimeout(function(){Z.trigger(x.PLAYBACK_ENDED)},b)}}function m(){var b=C().isLast,c=xa.getEndOfStreamState();ha&&b?(L(\"[StreamController][onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController.\"),\nc&&T.signalEndOfStream(ha)):ha&&void 0===Aa&&(L(\"[StreamController][onStreamBufferingCompleted] end of period detected\"),va=!0,!1===Ca&&h())}function k(b){var c=0,d=null,e=ma.length;0<e&&(c+=ma[0].getStartTime());for(var f=0;f<e;f++)if(d=ma[f],b<(c=parseFloat((c+d.getDuration()).toFixed(5))))return d;return null}function q(b){var c=function(){if(na){var b=na.getStreamInfo().start,c=na.getStreamInfo().duration;return ma.filter(function(d){return d.getStreamInfo().start===parseFloat((b+c).toFixed(5))})[0]}}();\nc?(Fa=void 0,Da=void 0,n(na,c,NaN)):L(\"StreamController no next stream found\");y(c?Pa.END_OF_PERIOD_STOP_REASON:Pa.END_OF_CONTENT_STOP_REASON);Aa=void 0;va=!1;try{if(xa.getEndOfStreamState()&&!b.isNativeEnded){var d=ca(\"video\"),e=ca(\"audio\");isNaN(d)&&isNaN(e)||(Ka.seek(Ka.getTime()-.3),T.signalEndOfStream(ha))}}catch(ed){(undefined)}}function n(b,c,d){!qa&&c&&b!==c&&(qa=!0,Z.trigger(x.PERIOD_SWITCH_STARTED,{fromStreamInfo:b?b.getStreamInfo():\nnull,toStreamInfo:c.getStreamInfo()}),b&&(b.stopEventController(),b.deactivate()),na=c,Ka.initialize(na.getStreamInfo()),ua.getElement()?t(d,b,!1):p(d))}function t(b,c,d){function e(){ha&&(L(\"MediaSource is open!\"),window.URL.revokeObjectURL(f),ha.removeEventListener(\"sourceopen\",e),ha.removeEventListener(\"webkitsourceopen\",e),u(),c||Z.trigger(x.SOURCE_INITIALIZED),d&&na.setMediaSource(ha))}var f=void 0;ha?T.detachMediaSource(ua):ha=T.createMediaSource();p(b);ha.addEventListener(\"sourceopen\",e,!1);\nha.addEventListener(\"webkitsourceopen\",e,!1);f=T.attachMediaSource(ha,ua);L(\"MediaSource attached to element.  Waiting on open...\")}function p(b){if(na.activate(ha),Fa=D(G.AUDIO),Da=D(G.VIDEO),!ya)if(isNaN(b)){var c=Ka.getStreamStartTime(!0);na.getProcessors().forEach(function(b){ba.setIndexHandlerTime(b,c)})}else Ka.seek(b);na.startEventController();!la&&ya||Ka.play();qa=!1;Z.trigger(x.PERIOD_SWITCH_COMPLETED,{toStreamInfo:na.getStreamInfo()})}function u(b){b=b||na.getStreamInfo().manifestInfo.duration;\nb=T.setDuration(ha,b);L(\"Duration successfully set to: \"+b)}function z(){var b=E.getValue();oa&&(Z.trigger(x.PROTECTION_CREATED,{controller:oa,manifest:b}),oa.setMediaElement(ua.getElement()),ka&&oa.setProtectionData(ka));try{var c=ba.getStreamsInfo();if(0===c.length)throw Error(\"There are no streams\");var d=W.getCurrentManifestUpdate(F.getMetricsFor(G.STREAM));F.updateManifestUpdateInfo(d,{currentTime:Ka.getTime(),buffered:ua.getBufferRange(),presentationStartTime:c[0].start,clientTimeOffset:K.getClientTimeOffset()});\nfor(var b=0,e=c.length;b<e;b++){var f=c[b];a:{for(var g=f,h=0,l=ma.length;h<l;h++)if(ma[h].getId()===g.id){var m=ma[h];break a}m=null}m?m.updateData(f):(m=oe(ra).create({manifestModel:E,dashManifestModel:Q,mediaPlayerModel:xa,metricsModel:F,dashMetrics:W,manifestUpdater:I,adapter:ba,timelineConverter:K,capabilities:fa,errHandler:J,baseURLController:Y,domStorage:aa,abrController:X,playbackController:Ka,mediaController:V,videoModel:ua,streamController:N}),ma.push(m),m.initialize(f,oa));F.addManifestUpdateStreamInfo(d,\nf.id,f.index,f.start,f.duration)}if(!na){var q=Ka.getStartTimeFromUriParameters(),c=null;q&&(c=k(isNaN(q.fragS)?q.fragT:q.fragS));n(null,null!==c?c:ma[0],NaN)}Z.trigger(x.STREAMS_COMPOSED)}catch(Qd){J.manifestError(Qd.message,\"nostreamscomposed\",E.getValue()),ga=!0,S()}}function v(b){if(b.error)ga=!0,S();else{var c=b.manifest;xa.getAppendingSourceState()&&u(c.mediaPresentationDuration);ba.updatePeriods(c);var d=ba.getStreamsInfo(void 0,1)[0],e=ba.getMediaInfoForType(d,G.VIDEO)||ba.getMediaInfoForType(d,\nG.AUDIO),d=void 0;e&&(d=Q.getUseCalculatedLiveEdgeTimeForAdaptation(ba.getDataForMedia(e)))&&(L(\"SegmentTimeline detected using calculated Live Edge Time\"),xa.setUseManifestDateHeaderTimeSource(!1));var e=Q.getUTCTimingSources(b.manifest),d=!Q.getIsDynamic(c)||d?e:e.concat(xa.getUTCTimingSources()),f=R.isHTTPS(b.manifest.url);d.forEach(function(b){b.value.replace(/.*?:\\/\\//g,\"\")===sc.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\\/\\//g,\"\")&&(b.value=b.value.replace(f?new RegExp(/^(http:)?\\/\\//i):new RegExp(/^(https:)?\\/\\//i),\nf?\"https://\":\"http://\"),L(\"Matching default timing source protocol to manifest protocol: \",b.value))});Y.initialize(c);O.setConfig({metricsModel:F,dashMetrics:W,baseURLController:Y});O.initialize(d,xa.getUseManifestDateHeaderTimeSource())}}function D(b){var c=!1;return na&&na.getProcessors().forEach(function(d){d.getMediaInfo().type===b&&(c=!0)}),c}function y(b,c){c=c||new Date;Ha&&(na&&na.getProcessors().forEach(function(d){(d=d.getScheduleController())&&d.finalisePlayList(c,b)}),F.addPlayList(Ha),\nHa=null)}function w(b){(Ha=new xb).start=new Date;Ha.mstart=1E3*Ka.getTime();Ha.starttype=b;na&&na.getProcessors().forEach(function(b){(b=b.getScheduleController())&&b.setPlayList(Ha)})}function A(b){if(b.error){switch(this.MEDIA_DOWNLOAD_ERROR=5001,b.error.code){case 1:var c=\"MEDIA_ERR_ABORTED\";var d=wa.MEDIA_ABORTED_ERROR;break;case 2:c=\"MEDIA_ERR_NETWORK\";d=wa.MEDIA_NETWORK_ERROR;break;case 3:c=\"MEDIA_ERR_DECODE\";d=wa.MEDIA_DECODE_ERROR;break;case 4:c=\"MEDIA_ERR_SRC_NOT_SUPPORTED\";d=wa.MEDIA_SUPPORTED_ERROR;\nbreak;case 5:c=\"MEDIA_ERR_ENCRYPTED\";d=wa.MEDIA_ENCRYPTED_ERROR;break;default:c=\"UNKNOWN\",d=wa.MEDIA_UNKNOWN_ERROR}b.errorCode=d;sa=!0;b.error.message&&(c+=\" (\"+b.error.message+\")\");b.error.msExtendedCode&&(c+=\" (0x\"+(b.error.msExtendedCode>>>0).toString(16).toUpperCase()+\")\");L(\"Video Element Error: \"+c);b.error&&L(b.error);J.mediaSourceError(c,d);S()}}function C(){return na?na.getStreamInfo():null}function P(){if(!(U&&U.hasOwnProperty(\"load\")&&K&&K.hasOwnProperty(\"initialize\")&&K.hasOwnProperty(\"reset\")&&\nK.hasOwnProperty(\"getClientTimeOffset\")))throw Error(\"setConfig function has to be called previously\");}function M(b){isNaN(b.newDuration)||u(b.newDuration)}function H(){ma=[];oa=null;qa=!1;na=null;ga=sa=!1;Fa=Da=void 0;ya=!0;Ca=!1;la=!0;Ha=null;Aa=void 0;va=!1;Na=0}function S(){P();O.reset();y(sa||ga?Pa.FAILURE_STOP_REASON:Pa.USER_REQUEST_STOP_REASON);for(var c=0,g=ma?ma.length:0;c<g;c++)ma[c].reset(sa);Z.off(x.PLAYBACK_TIME_UPDATED,b,this);Z.off(x.PLAYBACK_SEEKING,d,this);Z.off(x.PLAYBACK_ERROR,\nA,this);Z.off(x.PLAYBACK_STARTED,e,this);Z.off(x.PLAYBACK_PAUSED,f,this);Z.off(x.PLAYBACK_ENDED,q,this);Z.off(x.MANIFEST_UPDATED,v,this);Z.off(x.STREAM_BUFFERING_COMPLETED,m,this);Z.off(cc.METRIC_ADDED,B,this);Z.off(x.MANIFEST_VALIDITY_CHANGED,M,this);Y.reset();I.reset();F.clearAllCurrentMetrics();E.setValue(null);U.reset();K.reset();da.reset();ha&&(T.detachMediaSource(ua),ha=null);ua=null;oa&&(oa.setMediaElement(null),oa=null,ka=null,E.getValue()&&Z.trigger(x.PROTECTION_DESTROYED,{data:E.getValue().url}));\nZ.trigger(x.STREAM_TEARDOWN_COMPLETE);H()}function B(b){b.metric===za.DVR_INFO&&b.mediaType===G.AUDIO&&T.setSeekable(ha,b.value.range.start,b.value.range.end)}function ca(b){return-1!==[G.VIDEO,G.AUDIO,G.FRAGMENTED_TEXT].indexOf(b)?W.getCurrentBufferLevel(F.getReadOnlyMetricsFor(b))||NaN:(L(\"Warning  - getBufferLength requested for invalid type\"),NaN)}var ra=this.context,L=Ja(ra).getInstance().log,Z=l(ra).getInstance(),N=void 0,fa=void 0,I=void 0,U=void 0,E=void 0,Q=void 0,ba=void 0,F=void 0,W=void 0,\nT=void 0,O=void 0,Y=void 0,aa=void 0,X=void 0,V=void 0,da=void 0,R=void 0,J=void 0,K=void 0,ma=void 0,na=void 0,oa=void 0,ka=void 0,la=void 0,qa=void 0,sa=void 0,ga=void 0,ha=void 0,ua=void 0,Ka=void 0,xa=void 0,Ca=void 0,ya=void 0,Ha=void 0,Da=void 0,Fa=void 0,va=void 0,Aa=void 0,Na=void 0,Ia=void 0;return N={initialize:function(g,h){P();la=g;ka=h;K.initialize();(I=pe(ra).create()).setConfig({manifestModel:E,dashManifestModel:Q,mediaPlayerModel:xa,manifestLoader:U,errHandler:J});I.initialize();Y.setConfig({dashManifestModel:Q});\nZ.on(x.TIME_SYNCHRONIZATION_COMPLETED,z,this);Z.on(x.PLAYBACK_SEEKING,d,this);Z.on(x.PLAYBACK_TIME_UPDATED,b,this);Z.on(x.PLAYBACK_ENDED,q,this);Z.on(x.PLAYBACK_ERROR,A,this);Z.on(x.PLAYBACK_STARTED,e,this);Z.on(x.PLAYBACK_PAUSED,f,this);Z.on(x.MANIFEST_UPDATED,v,this);Z.on(x.STREAM_BUFFERING_COMPLETED,m,this);Z.on(x.MANIFEST_VALIDITY_CHANGED,M,this);Z.on(x.WALLCLOCK_TIME_UPDATED,c,this);Z.on(cc.METRIC_ADDED,B,this)},getActiveStreamInfo:C,isVideoTrackPresent:function(){return Da},isAudioTrackPresent:function(){return Fa},\nswitchToVideoElement:function(b){Ka.initialize(na.getStreamInfo());t(b,null,!0)},getStreamById:function(b){return ma.filter(function(c){return c.getId()===b})[0]},getStreamForTime:k,getDuration:function(){if(na)return na.getStreamInfo().duration},getTimeRelativeToStreamId:function(b,c){for(var d=null,e=0,f=0,g,h=ma.length,l=0;l<h;l++){if(f=(d=ma[l]).getStartTime(),g=d.getDuration(),Number.isFinite(f)&&(e=f),d.getId()===c)return b-e;Number.isFinite(g)&&(e+=g)}return null},load:function(b,c,d){P();\nU.load(b,c,d)},loadWithManifest:function(b){if(!I||!I.hasOwnProperty(\"setManifest\"))throw Error(\"initialize function has to be called previously\");!0;I.setManifest(b)},getActiveStreamProcessors:function(){return na?na.getProcessors():[]},setConfig:function(b){b&&(b.capabilities&&(fa=b.capabilities),b.manifestLoader&&(U=b.manifestLoader),b.manifestModel&&(E=b.manifestModel),b.dashManifestModel&&(Q=b.dashManifestModel),b.mediaPlayerModel&&(xa=b.mediaPlayerModel),b.protectionController&&(oa=b.protectionController),\nb.adapter&&(ba=b.adapter),b.metricsModel&&(F=b.metricsModel),b.dashMetrics&&(W=b.dashMetrics),b.errHandler&&(J=b.errHandler),b.timelineConverter&&(K=b.timelineConverter),b.videoModel&&(ua=b.videoModel),b.playbackController&&(Ka=b.playbackController),b.domStorage&&(aa=b.domStorage),b.abrController&&(X=b.abrController),b.mediaController&&(V=b.mediaController))},setProtectionData:function(b){ka=b},setMediaDuration:u,reset:S},O=qe(ra).getInstance(),Y=re(ra).getInstance(),T=se(ra).getInstance(),da=bd(ra).getInstance(),\nR=Ib(ra).getInstance(),H(),N}function Lb(b){b=b||{};var c=this.context,d=l(c).getInstance(),e=rc(c).create({errHandler:b.errHandler,videoModel:b.videoModel,metricsModel:b.metricsModel,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier});return{load:function(b,c,f){var g=function(b){function c(c,d){return b.apply(this,arguments)}c.toString=function(){return b.toString()};return c}(function(e,g){c.resolved=!0;c.resolvedContent=e||null;d.trigger(x.XLINK_ELEMENT_LOADED,{element:c,resolveObject:f,\nerror:e||g?null:new Xa(1,\"Failed loading Xlink element: \"+b)})});if(\"urn:mpeg:dash:resolve-to-zero:2013\"===b)g(null,!0);else{var h=new hd(b,da.XLINK_TYPE);e.load({request:h,success:function(b){g(b)},error:function(){g(null)}})}},reset:function(){e&&(e.abort(),e=null)}}}function Sc(b){function c(b,c,d){var f={};f.elements=b;f.type=c;f.resolveType=d;0===f.elements.length&&e(f);for(d=0;d<f.elements.length;d++)b=f.elements[d],c=m.isHTTPURL(b.url)?b.url:b.originalContent.BaseURL+b.url,u.load(c,b,f)}function d(b){var c=\nvoid 0;if(c=b.element,b=b.resolveObject,c.resolvedContent){var d=0;0===c.resolvedContent.indexOf(\"<?xml\")&&(d=c.resolvedContent.indexOf(\"?>\")+2);d=c.resolvedContent.substr(0,d)+\"<response>\"+c.resolvedContent.substr(d)+\"</response>\";c.resolvedContent=p.xml_str2json(d)}a:{for(c=0;c<b.elements.length;c++)if(!1===b.elements[c].resolved){c=!1;break a}c=!0}c&&e(b)}function e(b){var d=[],e=void 0,g=[],l=void 0,m,k,q;for(k=b.elements.length-1;0<=k;k--){if(m=(l=b.elements[k]).type+\"_asArray\",l.resolvedContent){if(l.resolvedContent)for(q=\n0;q<l.resolvedContent[m].length;q++){var p=l.resolvedContent[m][q];g.push(p)}}else delete l.originalContent[\"xlink:actuate\"],delete l.originalContent[\"xlink:href\"],g.push(l.originalContent);l.parentElement[m].splice(l.index,1);for(p=0;p<g.length;p++)l.parentElement[m].splice(l.index+p,0,g[p]);g=[]}0<b.elements.length&&n.run(t);if(\"onActuate\"===b.resolveType&&h.trigger(x.XLINK_READY,{manifest:t}),\"onLoad\"===b.resolveType)switch(b.type){case \"Period\":for(b=0;b<t.Period_asArray.length;b++)(e=t.Period_asArray[b]).hasOwnProperty(\"AdaptationSet_asArray\")&&\n(d=d.concat(f(e.AdaptationSet_asArray,e,\"AdaptationSet\",\"onLoad\"))),e.hasOwnProperty(\"EventStream_asArray\")&&(d=d.concat(f(e.EventStream_asArray,e,\"EventStream\",\"onLoad\")));c(d,\"AdaptationSet\",\"onLoad\");break;case \"AdaptationSet\":h.trigger(x.XLINK_READY,{manifest:t})}}function f(b,c,d,e){var f=[],g=void 0,h,l=void 0;for(h=b.length-1;0<=h;h--)(g=b[h]).hasOwnProperty(\"xlink:href\")&&\"urn:mpeg:dash:resolve-to-zero:2013\"===g[\"xlink:href\"]&&b.splice(h,1);for(h=0;h<b.length;h++)(g=b[h]).hasOwnProperty(\"xlink:href\")&&\ng.hasOwnProperty(\"xlink:actuate\")&&g[\"xlink:actuate\"]===e&&(l={url:g[\"xlink:href\"],parentElement:c,type:d,index:h,resolveType:e,originalContent:g,resolvedContent:null,resolved:!1},f.push(l));return f}b=b||{};var g=this.context,h=l(g).getInstance(),m=Ib(g).getInstance(),k=void 0,q=void 0,n=void 0,t=void 0,p=void 0,u=void 0;return k={resolveManifestOnLoad:function(b){p=new id({escapeMode:!1,attributePrefix:\"\",arrayAccessForm:\"property\",emptyNodeForm:\"object\",stripWhitespaces:!1,enableToStringFunc:!1,\nignoreRoot:!0,matchers:q});c(f((t=b).Period_asArray,t,\"Period\",\"onLoad\"),\"Period\",\"onLoad\")},setMatchers:function(b){b&&(q=b)},setIron:function(b){b&&(n=b)},reset:function(){h.off(x.XLINK_ELEMENT_LOADED,d,k);u&&(u.reset(),u=null)}},h.on(x.XLINK_ELEMENT_LOADED,d,k),u=te(g).create({errHandler:b.errHandler,videoModel:b.videoModel,metricsModel:b.metricsModel,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier}),k}function Jb(b){function c(b,d){for(var e=0,f=b.children.length;e<f;++e){var g=\nb.children[e],h=d[g.name+\"_asArray\"];if(h)for(var l=0,m=h.length;l<m;++l){for(var k=h[l],q=b.properties,n=d,t=k,p=0,u=q.length;p<u;++p){var z=q[p];if(n[z.name])if(t[z.name]){if(z.merge){var v=n[z.name],y=t[z.name];if(\"object\"===(void 0===v?\"undefined\":Mc(v))&&\"object\"===(void 0===y?\"undefined\":Mc(y)))for(z in z=void 0,v)y.hasOwnProperty(z)||(y[z]=v[z]);else t[z.name]=v+y}}else t[z.name]=n[z.name]}c(g,k)}}}return{run:function(d){if(null===d||\"object\"!==(void 0===d?\"undefined\":Mc(d)))return d;if(\"period\"in\nb)for(var e=b.period,f=d.Period_asArray,g=0,h=f.length;g<h;++g){var l=f[g];if(c(e,l),\"adaptationset\"in b)if(l=l.AdaptationSet_asArray)for(var m=b.adaptationset,k=0,q=l.length;k<q;++k)c(m,l[k])}return d}}}function ka(b,c,d){return c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b}function hb(){var b,c=this.context,d=Ja(c).getInstance().log,e=void 0,f=void 0,g=void 0;return b={parse:function(b){var c=window.performance.now();if(!(b=f.xml_str2json(b)))throw Error(\"parsing the manifest failed\");\nvar e=window.performance.now();g.run(b);var h=window.performance.now();return d(\"Parsing complete: ( xml2json: \"+(e-c).toPrecision(3)+\"ms, objectiron: \"+(h-e).toPrecision(3)+\"ms, total: \"+((h-c)/1E3).toPrecision(3)+\"s)\"),b},getMatchers:function(){return e},getIron:function(){return g}},e=[new ue,new ve,new we,new xe],f=new id({escapeMode:!1,attributePrefix:\"\",arrayAccessForm:\"property\",emptyNodeForm:\"object\",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:e}),g=jd(c).create({adaptationset:new kd,\nperiod:new ld}),b}function Kb(){function b(b,c){return c?b&&b.replace(/http:\\/\\//g,\"https://\"):b}var c,d=this.context,e=Ja(d).getInstance().log,f=void 0;return c={parse:function(c,d){var f={},g=window.performance.now();try{c=function Wa(b){var c={};if(b instanceof Object){var d=function(d){var e=d.replace(/[\\x41-\\x5A]/g,function(b,c){b=String.fromCharCode(b.charCodeAt(0)+32);return c?\"_\"+b:b});\"[object Array]\"===Object.prototype.toString.call(b[d])?(c[e]=[],b[d].forEach(function(b){c[e].push(Wa(b))})):\n\"[object Object]\"===Object.prototype.toString.call(b[d])?c[e]=Wa(b[d]):c[e]=b[d]},e;for(e in b)d(e)}else c=b;return c}(c)}catch(La){throw Error(\"Convert bilibili mpd failed, \"+La);}if(f.ProgramInformation={Title:\"\"},f.loadedTime=new Date,f.mediaPresentationDuration=c.duration,f.minBufferTime=c.min_buffer_time,f.profiles=\"urn:mpeg:dash:profile:isoff-on-demand:2011\",f.xmlns=\"urn:mpeg:dash:profile:isoff-on-demand:2011\",f.type=\"static\",f.interactive=\"interactive\"===c.type,f.originalUrl=location.href,\nf.url=location.href,f.Period={duration:c.duration,AdaptationSet:[]},c.video&&(f.Period.AdaptationSet[0]={},f.Period.AdaptationSet[0].Representation=c.video.map(function(c){var e={__text:b(c.base_url,d)};return c.backup_url&&c.backup_url.forEach(function(c,f){e[\"backupUrl\"+(f+1)]=b(c,d)}),{BaseURL:e,SegmentBase:{Initialization:{range:c.segment_base.initialization},indexRange:c.segment_base.index_range,indexRangeExact:\"true\"},bandwidth:c.bandwidth,codecs:c.codecs,frameRate:c.frame_rate,height:c.height,\nwidth:c.width,id:c.id+\"\",mimeType:c.mime_type,sar:c.sar,startWithSAP:c.start_with_sap}})),c.audio&&(f.Period.AdaptationSet[1]={},f.Period.AdaptationSet[1].Representation=c.audio.map(function(c){var e={__text:b(c.base_url,d)};return c.backup_url&&c.backup_url.forEach(function(c,f){e[\"backupUrl\"+(f+1)]=b(c,d)}),{BaseURL:e,SegmentBase:{Initialization:{range:c.segment_base.initialization},indexRange:c.segment_base.index_range,indexRangeExact:\"true\"},bandwidth:c.bandwidth,codecs:c.codecs,id:c.id+\"\",mimeType:c.mime_type}})),\nf.ProgramInformation={Title:\"\"},function Wa(b){var c=\"[object Array]\"!==Object.prototype.toString.call(b),d;for(d in b)\"object\"===ye(b[d])&&(Wa(b[d]),c&&(b[d+\"_asArray\"]=\"[object Array]\"===Object.prototype.toString.call(b[d])?b[d]:[b[d]]))}(f),!f)throw Error(\"parsing the manifest failed\");c=window.performance.now();var h=window.performance.now();return e(\"Parsing complete: ( xml2json: \"+(c-g).toPrecision(3)+\"ms, objectiron: \"+(h-c).toPrecision(3)+\"ms, total: \"+((h-g)/1E3).toPrecision(3)+\"s)\"),f},\ngetMatchers:function(){return null},getIron:function(){return f}},f=jd(d).create({adaptationset:new kd,period:new ld}),c}function zc(b){function c(b){f.trigger(x.INTERNAL_MANIFEST_LOADED,{manifest:b.manifest})}function d(b,c,d,l){if(q){var m=d=void 0,k=void 0;if(window.location&&window.location&&\"https:\"===window.location.protocol&&(t=!0),l&&l!==b?(m=g.parseBaseUrl(l),d=l):(g.isRelative(b)&&(b=g.resolve(b,window.location.href)),m=g.parseBaseUrl(b)),null===n&&(n=function(b){var c=null;return b.video||\nb.audio?ze(e).create():-1<b.indexOf(\"SmoothStreamingMedia\")?(p&&(c=p.createMssParser(),p.registerEvents()),c):-1<b.indexOf(\"MPD\")?Ae(e).create():c}(c)),null!==n){q.setMatchers(n.getMatchers());q.setIron(n.getIron());try{k=n.parse(c,t)}catch(Qb){return void f.trigger(x.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Xa(1,\"Failed parsing manifest : \"+(l?b:\"MPD String\"),null,wa.MANIFEST_RESOLVE_ERROR)})}k?(k.url=d||b,k.originalUrl||(k.originalUrl=k.url),k.hasOwnProperty(G.LOCATION)&&(m=g.parseBaseUrl(k.Location_asArray[0]),\nh(\"BaseURI set by Location to: \"+m)),k.baseUri=function(b,c){return c?b&&b.replace(/http:\\/\\//g,\"https://\"):b}(m,t),k.loadedTime=new Date,q.resolveManifestOnLoad(k)):f.trigger(x.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Xa(1,\"parsing failed\",null,wa.MANIFEST_ERROR)})}else f.trigger(x.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Xa(1,\"Failed detecting manifest type or manifest type unsupported : \"+(l?b:\"MPD String\"),null,wa.MANIFEST_TYPE_ERROR)})}}b=b||{};var e=this.context,f=l(e).getInstance(),\ng=Ib(e).getInstance(),h=Ja(e).getInstance().log,m=void 0,k=void 0,q=void 0,n=void 0,t=void 0,p=b.mssHandler,u=b.errHandler;return m={load:function(b,c){(t=c,!b||\"string\"!=typeof b||0!==b.indexOf(\"http\")&&0!==b.indexOf(\"/\"))?d(\"\",b,\"OK\",\"\"):(c=new hd(b,da.MPD_TYPE),k.load({request:c,success:function(c,e,f){d(b,c,e,f)},error:function(c,d,e,g){f.trigger(x.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Xa(2,\"Failed loading manifest: \"+b+\", \"+e,null,wa.MANIFEST_DOWNLOAD_ERROR,g)})}}))},reset:function(){f.off(x.XLINK_READY,\nc,m);q&&(q.reset(),q=null);k&&(k.abort(),k=null);p&&p.reset()}},f.on(x.XLINK_READY,c,m),k=rc(e).create({errHandler:u,videoModel:b.videoModel,metricsModel:b.metricsModel,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier}),q=Be(e).create({errHandler:u,videoModel:b.videoModel,metricsModel:b.metricsModel,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier}),n=null,m}function Tc(){var b,c=void 0;return b={supportsMediaSource:function(){var b=\"MediaSource\"in window;\nreturn\"WebKitMediaSource\"in window||b},supportsEncryptedMedia:function(){return c},supportsCodec:function(b){return!!(\"MediaSource\"in window&&MediaSource.isTypeSupported(b))||!!(\"WebKitMediaSource\"in window&&WebKitMediaSource.isTypeSupported(b))},setEncryptedMediaSupported:function(b){c=b}},c=!1,b}function ab(){var b=l(this.context).getInstance(),c=void 0;return{getValue:function(){return c},setValue:function(d){(c=d)&&b.trigger(x.MANIFEST_LOADED,{data:d})}}}function Ac(b,c){if(!(b instanceof c))throw new TypeError(\"Cannot call a class as a function\");\n}function Bc(){function b(b){m.trigger(x.METRIC_CHANGED,{mediaType:b});m.trigger(x.METRICS_CHANGED)}function c(c,d,e){m.trigger(x.METRIC_UPDATED,{mediaType:c,metric:d,value:e});b(c)}function d(c,d,e){m.trigger(x.METRIC_ADDED,{mediaType:c,metric:d,value:e});b(c)}function e(b){var c=void 0;return k.hasOwnProperty(b)?c=k[b]:(c=new Ce,k[b]=c),c}function f(b,c,d){b=e(b);b[c].push(d);1E3<b[c].length&&b[c].shift()}function g(b,c,e){f(b,c,e);d(b,c,e)}var h,m=l(this.context).getInstance(),k=void 0;return h=\n{clearCurrentMetricsForType:function(c){delete k[c];b(c)},clearAllCurrentMetrics:function(){k={};m.trigger(x.METRICS_CHANGED)},getReadOnlyMetricsFor:function(b){return k.hasOwnProperty(b)?k[b]:null},getMetricsFor:e,addTcpConnection:function(b,c,d,e,f,h){var l=new De;return l.tcpid=c,l.dest=d,l.topen=e,l.tclose=f,l.tconnect=h,g(b,za.TCP_CONNECTION,l),l},addHttpRequest:function La(b,c,d,e,f,h,l,m,k,q,n,t,p,u){var z=new da;return f&&f!==e&&(La(b,null,d,e,null,null,l,m,null,null,null,t,null,null),z.actualurl=\nf),z.tcpid=c,z.type=d,z.url=e,z.range=l,z.trequest=m,z.tresponse=k,z.responsecode=n,z._tfinish=q,z._stream=b,z._mediaduration=t,z._responseHeaders=p,z._serviceLocation=h,u?u.forEach(function(b){var c=b.s,d=b.d;b=b.b;var e=new Ed;e.s=c;e.d=d;e.b=b;z.trace.push(e);z.interval||(z.interval=0);z.interval+=d;!0}):(delete z.interval,delete z.trace),g(b,za.HTTP_REQUEST,z),z},addRepresentationSwitch:function(b,c,d,e,f){var h=new Ee;return h.t=c,h.mt=d,h.to=e,f?h.lto=f:delete h.lto,g(b,za.TRACK_SWITCH,h),h},\naddBufferLevel:function(b,c,d){var e=new Fe;return e.t=c,e.level=d,g(b,za.BUFFER_LEVEL,e),e},addBufferState:function(b,c,d){var e=new Ge;return e.target=d,e.state=c,g(b,za.BUFFER_STATE,e),e},addDVRInfo:function(b,c,d,e){var f=new He;return f.time=c,f.range=e,f.manifestInfo=d,g(b,za.DVR_INFO,f),f},addDroppedFrames:function(b,c){var d=new Ie,f=e(b).DroppedFrames;return d.time=c.creationTime,d.droppedFrames=c.droppedVideoFrames,0<f.length&&f[f.length-1]==d?f[f.length-1]:(g(b,za.DROPPED_FRAMES,d),d)},\naddSchedulingInfo:function(b,c,d,e,f,h,l,m,k){var q=new Je;return q.mediaType=b,q.t=c,q.type=d,q.startTime=e,q.availabilityStartTime=f,q.duration=h,q.quality=l,q.range=m,q.state=k,g(b,za.SCHEDULING_INFO,q),q},addRequestsQueue:function(b,c,f){var g=new Ke;g.loadingRequests=c;g.executedRequests=f;e(b).RequestsQueue=g;d(b,za.REQUESTS_QUEUE,g)},addManifestUpdate:function(b,c,e,g,h,l,m,k,q,n){var t=new Le;return t.mediaType=b,t.type=c,t.requestTime=e,t.fetchTime=g,t.availabilityStartTime=h,t.presentationStartTime=\nl,t.clientTimeOffset=m,t.currentTime=k,t.buffered=q,t.latency=n,f(G.STREAM,za.MANIFEST_UPDATE,t),d(b,za.MANIFEST_UPDATE,t),t},updateManifestUpdateInfo:function(b,d){if(b){for(var e in d)b[e]=d[e];c(b.mediaType,za.MANIFEST_UPDATE,b)}},addManifestUpdateStreamInfo:function(b,d,e,f,g){if(b){var h=new Me;return h.id=d,h.index=e,h.start=f,h.duration=g,b.streamInfo.push(h),c(b.mediaType,za.MANIFEST_UPDATE_STREAM_INFO,b),h}return null},addManifestUpdateRepresentationInfo:function(b,d,e,f,g,h,l,m){if(b){var k=\nnew Ne;return k.id=d,k.index=e,k.streamIndex=f,k.mediaType=g,k.startNumber=l,k.fragmentInfoType=m,k.presentationTimeOffset=h,b.representationInfo.push(k),c(b.mediaType,za.MANIFEST_UPDATE_TRACK_INFO,b),k}return null},addPlayList:function(b){var c=G.STREAM;return b.trace&&Array.isArray(b.trace)?b.trace.forEach(function(b){b.hasOwnProperty(\"subreplevel\")&&!b.subreplevel&&delete b.subreplevel}):delete b.trace,g(c,za.PLAY_LIST,b),b},addDVBErrors:function(b){return g(G.STREAM,za.DVB_ERRORS,b),b},setConfig:function(b){b&&\nb.adapter&&b.adapter}},k={},h}function Uc(){function b(){d&&(d.playbackRate=g||1,d.removeEventListener(\"canplay\",b))}function c(){if(d&&0<q.length&&0===d.playbackRate){var b=document.createEvent(\"Event\");b.initEvent(\"waiting\",!0,!1);d.dispatchEvent(b)}}var d=void 0,e=void 0,f=void 0,g=void 0,h=this.context,m=Ja(h).getInstance().log,k=l(h).getInstance(),q=[];return{initialize:function(){k.on(x.PLAYBACK_PLAYING,c,this)},setCurrentTime:function(b){if(d&&d.currentTime!=b)try{d.currentTime=b}catch(Wa){0===\nd.readyState&&Wa.code===Wa.INVALID_STATE_ERR&&setTimeout(function(){d.currentTime=b},400)}},play:function(){if(d){d.autoplay=!0;var b=d.play();b&&\"undefined\"!=typeof Promise&&b instanceof Promise&&b.catch(function(b){\"NotAllowedError\"===b.name&&k.trigger(x.PLAYBACK_NOT_ALLOWED);m(\"Caught pending play exception - continuing (\"+b+\")\")})}},isPaused:function(){return d?d.paused:null},pause:function(){d&&(d.pause(),d.autoplay=!1)},isSeeking:function(){return d?d.seeking:null},getTime:function(){return d?\nd.currentTime:null},getPlaybackRate:function(){return d?d.playbackRate:null},getPlayedRanges:function(){return d?d.played:null},getEnded:function(){return d?d.ended:null},setStallState:function(c,e){if(e){var f=void 0;null===c||d.seeking||-1!==q.indexOf(c)||(q.push(c),d&&1===q.length&&((f=document.createEvent(\"Event\")).initEvent(\"waiting\",!0,!1),g=d.playbackRate,d.dispatchEvent(f)))}else{e=q.indexOf(c);var h=void 0;null!==c&&(-1!==e&&q.splice(e,1),d&&!1===0<q.length&&0===d.playbackRate&&(f=g||1,d&&\n(2>=d.readyState&&0<f?d.addEventListener(\"canplay\",b):d.playbackRate=f),d.paused||((h=document.createEvent(\"Event\")).initEvent(\"playing\",!0,!1),d.dispatchEvent(h))))}!0},getElement:function(){return d},setElement:function(b){if(null!=b&&(!b||!b.nodeName||\"VIDEO\"!==b.nodeName&&\"AUDIO\"!==b.nodeName))throw\"element is not video or audio DOM type!\";(d=b)&&(d.preload=\"auto\")},setSource:function(b){d&&(b?d.src=b:(d.removeAttribute(\"src\"),d.load()))},getSource:function(){return d?d.src:null},getVideoContainer:function(){return f},\nsetVideoContainer:function(b){f=b},getTTMLRenderingDiv:function(){return e},setTTMLRenderingDiv:function(b){(e=b).style.position=\"absolute\";e.style.display=\"flex\";e.style.overflow=\"hidden\";e.style.pointerEvents=\"none\";e.style.top=0;e.style.left=0},getPlaybackQuality:function(){if(!d)return null;var b=\"webkitDroppedFrameCount\"in d&&\"webkitDecodedFrameCount\"in d,c=null;return\"getVideoPlaybackQuality\"in d?c=d.getVideoPlaybackQuality():b&&(c={droppedVideoFrames:d.webkitDroppedFrameCount,totalVideoFrames:d.webkitDroppedFrameCount+\nd.webkitDecodedFrameCount,creationTime:new Date}),c},addEventListener:function(b,c){d&&d.addEventListener(b,c)},removeEventListener:function(b,c){d&&d.removeEventListener(b,c)},getReadyState:function(){return d?d.readyState:NaN},getBufferRange:function(){return d?d.buffered:null},getClientWidth:function(){return d?d.clientWidth:NaN},getClientHeight:function(){return d?d.clientHeight:NaN},getTextTracks:function(){return d?d.textTracks:[]},getTextTrack:function(b,c,e,f,g){if(d)for(var h=0;h<d.textTracks.length;h++)if(d.textTracks[h].kind===\nb&&(!c||d.textTracks[h].label==c)&&d.textTracks[h].language===e&&d.textTracks[h].isTTML===f&&d.textTracks[h].isEmbedded===g)return d.textTracks[h];return null},addTextTrack:function(b,c,e){return d?d.addTextTrack(b,c,e):null},appendChild:function(b){d&&(d.appendChild(b),void 0!==b.isTTML&&(d.textTracks[d.textTracks.length-1].isTTML=b.isTTML,d.textTracks[d.textTracks.length-1].isEmbedded=b.isEmbedded))},removeChild:function(b){d&&d.removeChild(b)},getVideoWidth:function(){return d?d.videoWidth:NaN},\ngetVideoHeight:function(){return d?d.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return d&&d.parentNode?d.getBoundingClientRect().top-d.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return d&&d.parentNode?d.getBoundingClientRect().left-d.parentNode.getBoundingClientRect().left:NaN},setDataOffsetAttr:function(b){d&&d.setAttribute(\"data-offset\",b)},reset:function(){k.off(x.PLAYBACK_PLAYING,c,this)}}}function Vc(b){function c(b){if(void 0!==l)return l;l=\n!1;var c=void 0;try{\"undefined\"!=typeof window&&(c=window[b])}catch(La){return g(\"Warning: DOMStorage access denied: \"+La.message),l}if(!c||\"localStorage\"!==b&&\"sessionStorage\"!==b)return l;try{c.setItem(\"1\",\"1\"),c.removeItem(\"1\"),l=!0}catch(La){g(\"Warning: DOMStorage is supported, but cannot be used: \"+La.message)}return l}function d(b,d){return c(b)&&h[\"get\"+d+\"CachingInfo\"]().enabled}function e(){if(!h||!h.hasOwnProperty(\"getLastMediaSettingsCachingInfo\"))throw Error(\"Missing config parameter(s)\");\n}b=b||{};var f,g=Ja(this.context).getInstance().log,h=b.mediaPlayerModel,l=void 0;return f={getSavedBitrateSettings:function(b){var c=NaN;if(e(),d(\"localStorage\",\"LastBitrate\")){var f=\"dashjs_?_bitrate\".replace(/\\?/,b);try{var l=JSON.parse(localStorage.getItem(f))||{},m=(new Date).getTime()-parseInt(l.timestamp,10)>=h.getLastMediaSettingsCachingInfo().ttl||!1,k=parseFloat(l.bitrate);isNaN(k)||m?m&&localStorage.removeItem(f):(c=k,g(\"Last saved bitrate for \"+b+\" was \"+k))}catch(pa){return null}}return c},\nsetSavedBitrateSettings:function(b,c){if(d(\"localStorage\",\"LastBitrate\")&&c){b=\"dashjs_?_bitrate\".replace(/\\?/,b);try{localStorage.setItem(b,JSON.stringify({bitrate:c.toFixed(3),timestamp:6E5*Math.round((new Date).getTime()/6E5)}))}catch(La){g(La.message)}}},getSavedMediaSettings:function(b){if(e(),!d(\"localStorage\",\"LastMediaSettings\"))return null;var c=null;b=\"dashjs_?_settings\".replace(/\\?/,b);try{var f=JSON.parse(localStorage.getItem(b))||{},g=(new Date).getTime()-parseInt(f.timestamp,10)>=h.getLastMediaSettingsCachingInfo().ttl||\n!1,c=f.settings;g&&(localStorage.removeItem(b),c=null)}catch(kb){return null}return c},setSavedMediaSettings:function(b,c){if(d(\"localStorage\",\"LastMediaSettings\")){b=\"dashjs_?_settings\".replace(/\\?/,b);try{localStorage.setItem(b,JSON.stringify({settings:c,timestamp:6E5*Math.round((new Date).getTime()/6E5)}))}catch(La){g(La.message)}}}},c(\"localStorage\")&&Oe.forEach(function(b){var c=localStorage.getItem(b.oldKey);if(c){localStorage.removeItem(b.oldKey);try{localStorage.setItem(b.newKey,c)}catch(La){g(La.message)}}}),\nf}function Wc(){function b(b,c){return c&&b?c.getRepresentationForQuality(b.quality):null}function c(b){return b&&b.streamInfo&&void 0!==b.streamInfo.id&&z[b.streamInfo.id]?z[b.streamInfo.id][b.index]:null}function d(b,c){for(var d=c.length,e=0;e<d;e++){var f=c[e];if(b.id===f.id)return f}return null}function e(b){var c=new md,d=p.getRepresentationFor(b.index,b.adaptation.period.mpd.manifest.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index]);return c.id=b.id,c.quality=\nb.index,c.bandwidth=p.getBandwidth(d),c.DVRWindow=b.segmentAvailabilityRange,c.fragmentDuration=b.segmentDuration||(b.segments&&0<b.segments.length?b.segments[0].duration:NaN),c.MSETimeOffset=b.MSETimeOffset,c.useCalculatedLiveEdgeTime=b.useCalculatedLiveEdgeTime,c.mediaInfo=f(b.adaptation),c}function f(b){var c,d=new nd,e=b.period.mpd.manifest.Period_asArray[b.period.index].AdaptationSet_asArray[b.index];return d.id=b.id,d.index=b.index,d.type=b.type,d.streamInfo=h(b.period),d.representationCount=\np.getRepresentationCount(e),d.lang=p.getLanguageForAdaptation(e),c=p.getViewpointForAdaptation(e),d.viewpoint=c?c.value:void 0,d.accessibility=p.getAccessibilityForAdaptation(e).map(function(b){var c=b.value,e=c;return b.schemeIdUri&&0<=b.schemeIdUri.search(\"cea-608\")&&void 0!==Pe.a&&(e=c?\"cea-608:\"+c:\"cea-608\",d.embeddedCaptions=!0),e}),d.audioChannelConfiguration=p.getAudioChannelConfigurationForAdaptation(e).map(function(b){return b.value}),d.roles=p.getRolesForAdaptation(e).map(function(b){return b.value}),\nd.codec=p.getCodec(e),d.mimeType=p.getMimeType(e),d.contentProtection=p.getContentProtectionData(e),d.bitrateList=p.getBitrateListForAdaptation(e),d.contentProtection&&d.contentProtection.forEach(function(b){b.KID=p.getKID(b)}),d.isText=p.getIsTextTrack(d.mimeType),d}function g(b,c,d){b.id=c;b.index=100+parseInt(c.substring(2,3));b.type=G.EMBEDDED_TEXT;b.codec=\"cea-608-in-SEI\";b.isText=!0;b.isEmbedded=!0;b.lang=d;b.roles=[\"caption\"]}function h(b){var c,d,e=new od;return e.id=b.id,e.index=b.index,\ne.start=b.start,e.duration=b.duration,e.manifestInfo=(c=b.mpd,(d=new Qe).DVRWindowSize=c.timeShiftBufferDepth,d.loadedTime=c.manifest.loadedTime,d.availableFrom=c.availabilityStartTime,d.minBufferTime=c.manifest.minBufferTime,d.maxFragmentDuration=c.maxSegmentDuration,d.duration=p.getDuration(c.manifest),d.isDynamic=p.getIsDynamic(c.manifest),d),e.isLast=1===b.mpd.manifest.Period_asArray.length||1>Math.abs(e.start+e.duration-e.manifestInfo.duration),e}function l(){if(!p||!p.hasOwnProperty(\"getMpd\")||\n!p.hasOwnProperty(\"getRegularPeriods\"))throw Error(\"setConfig function has to be called previously\");}function m(b){if(!(b&&b.hasOwnProperty(\"getRepresentationController\")&&b.hasOwnProperty(\"getIndexHandler\")&&b.hasOwnProperty(\"getMediaInfo\")&&b.hasOwnProperty(\"getType\")&&b.hasOwnProperty(\"getStreamInfo\")))throw Error(\"streamProcessor parameter is missing or malformed!\");}function k(b){if(!b||!b.hasOwnProperty(\"getRepresentationForQuality\")||!b.hasOwnProperty(\"getCurrentRepresentation\"))throw Error(\"representationController parameter is missing or malformed!\");\n}function q(b){if(null===b||isNaN(b)||0!=b%1)throw Error(\"quality argument is not an integer\");}function n(){u=[];z={}}var t,p=void 0,u=void 0,z=void 0;return t={convertDataToRepresentationInfo:e,getDataForMedia:c,getStreamsInfo:function(b,c){var d=[],e=u;b&&(l(),e=p.getMpd(b),e=p.getRegularPeriods(e));c||(c=e.length);for(b=0;b<c;b++)d.push(h(e[b]));return d},getMediaInfoForType:function(b,c){if(0===u.length)return null;var e=u[0].mpd.manifest,g=p.getAdaptationForType(e,b.index,c,b);if(!g)return null;\nc=d(b,u);var h=c.id;b=p.getIndexForAdaptation(g,e,b.index);return z[h]=z[h]||p.getAdaptationsForPeriod(c),f(z[h][b])},getAllMediaInfoForType:function(b,c,e){var h=u,m=[],k=void 0,q,n=void 0,t;if(e)l(),h=p.getMpd(e),h=p.getRegularPeriods(h);else{if(!(0<u.length))return m;e=u[0].mpd.manifest}var v=d(b,h);var h=v.id,y=p.getAdaptationsForType(e,b.index,c!==G.EMBEDDED_TEXT?c:G.VIDEO);if(!y)return m;z[h]=z[h]||p.getAdaptationsForPeriod(v);var D=0;for(v=y.length;D<v;D++)if(k=y[D],n=p.getIndexForAdaptation(k,\ne,b.index),q=f(z[h][n]),c===G.EMBEDDED_TEXT){var w=q.accessibility.length;for(t=0;t<w;t++)if(q){var A=q.accessibility[t];if(0===A.indexOf(\"cea-608:\"))if(A=A.substring(8).split(\";\"),\"CC\"===A[0].substring(0,2))for(t=0;t<A.length;t++)q||(q=f.call(this,z[h][n])),g(q,A[t].substring(0,3),A[t].substring(4)),m.push(q),q=null;else for(t=0;t<A.length;t++)q||(q=f.call(this,z[h][n])),g(q,\"CC\"+(t+1),A[t]),m.push(q),q=null;else 0===A.indexOf(\"cea-608\")&&(g(q,G.CC1,\"eng\"),m.push(q),q=null)}}else c===G.IMAGE?(q.type=\nG.IMAGE,m.push(q)):q&&m.push(q);return m},getCurrentRepresentationInfo:function(b){k(b);return(b=b.getCurrentRepresentation())?e(b):null},getRepresentationInfoForQuality:function(b,c){k(b);q(c);return(b=b.getRepresentationForQuality(c))?e(b):null},updateData:function(b){m(b);var e=d(b.getStreamInfo(),u),f=b.getMediaInfo(),g=c(f),h=b.getType(),l=void 0;var k=f?f.id:null;0<u.length&&(l=k?p.getAdaptationForId(k,u[0].mpd.manifest,e.index):p.getAdaptationForIndex(f.index,u[0].mpd.manifest,e.index),b.getRepresentationController().updateData(l,\ng,h))},getInitRequest:function(b,c){var d,e=void 0,f=void 0;return m(b),q(c),e=b.getRepresentationController(),f=b.getIndexHandler(),d=e?e.getRepresentationForQuality(c):null,f?f.getInitRequest(d):null},getNextFragmentRequest:function(c,d){var e,f=void 0;return m(c),e=b(d,c.getRepresentationController()),(f=c.getIndexHandler())?f.getNextSegmentRequest(e):null},getFragmentRequestForTime:function(c,d,e,f){var g,h=void 0;return m(c),g=b(d,c.getRepresentationController()),(h=c.getIndexHandler())?h.getSegmentRequestForTime(g,\ne,f):null},generateFragmentRequestForTime:function(c,d,e){var f,g=void 0;return m(c),f=b(d,c.getRepresentationController()),(g=c.getIndexHandler())?g.generateSegmentRequestForTime(f,e):null},getIndexHandlerTime:function(b){m(b);return(b=b.getIndexHandler())?b.getCurrentTime():NaN},setIndexHandlerTime:function(b,c){m(b);(b=b.getIndexHandler())&&b.setCurrentTime(c)},getEventsFor:function(e,f){var g=[];if(0===u.length)return g;var h=u[0].mpd.manifest;return e instanceof od?g=p.getEventsForPeriod(d(e,\nu)):e instanceof nd?g=p.getEventStreamForAdaptationSet(h,c(e)):e instanceof md&&(g=p.getEventStreamForRepresentation(h,b(e,f.getRepresentationController()))),g},getEvent:function(b,c,d){if(!b||!c)return null;var e=new pd,f=b.scheme_id_uri,g=b.value,h=b.timescale,l=b.presentation_time_delta,m=b.event_duration,k=b.id;b=b.message_data;return c[f]?(e.eventStream=c[f],e.eventStream.value=g,e.eventStream.timescale=h,e.duration=m,e.id=k,e.presentationTime=d*h+l,e.messageData=b,e.presentationTimeDelta=l,\ne):null},setConfig:function(b){b&&b.dashManifestModel&&(p=b.dashManifestModel)},updatePeriods:function(b){if(!b)return null;l();b=p.getMpd(b);u=p.getRegularPeriods(b);z={}},reset:n},n(),t}function Xc(b){function c(b,c){var d=void 0;var e=void 0;var f,g=void 0,h=!1,l=!1;if(!b)throw Error(\"adaptation is not defined\");if(!c)throw Error(\"type is not defined\");if(b.hasOwnProperty(\"ContentComponent_asArray\")&&(e=b.ContentComponent_asArray),f=c!==G.TEXT?new RegExp(c):/(vtt|ttml)/,b.Representation_asArray&&\nb.Representation_asArray.length&&0<b.Representation_asArray.length&&b.Representation_asArray[0].hasOwnProperty(B.CODECS)&&(0===(g=b.Representation_asArray[0].codecs).search(G.STPP)||0===g.search(G.WVTT)))return c===G.FRAGMENTED_TEXT;if(e){if(1<e.length)return c===G.MUXED;e[0]&&e[0].contentType===c&&(h=!0,l=!0)}if(b.hasOwnProperty(B.MIME_TYPE)&&(h=f.test(b.mimeType),l=!0),!l)for(c=0,e=b.Representation_asArray&&b.Representation_asArray.length?b.Representation_asArray.length:0;!l&&c<e;)(d=b.Representation_asArray[c]).hasOwnProperty(B.MIME_TYPE)&&\n(h=f.test(d.mimeType),l=!0),c++;return h}function d(b){return c(b,G.AUDIO)}function e(b){return c(b,G.VIDEO)}function f(b){return c(b,G.FRAGMENTED_TEXT)}function g(b){return c(b,G.MUXED)}function h(b){return c(b,G.IMAGE)}function l(b){return\"text/vtt\"===b||\"application/ttml+xml\"===b}function m(b){return b&&b.hasOwnProperty(B.ROLE_ASARRAY)?b.Role_asArray:[]}function k(b){return m(b).filter(function(b){return b.value===B.MAIN})[0]}function q(b){return b&&void 0!==b.Representation_asArray&&null!==b.Representation_asArray&&\nb.Representation_asArray.sort(function(b,c){return b.bandwidth-c.bandwidth}),b}function n(b,d,e){d=b&&b.Period_asArray&&x(d)&&b.Period_asArray[d]?b.Period_asArray[d].AdaptationSet_asArray:[];var f=[];var g=0;for(b=d.length;g<b;g++)c(d[g],e)&&f.push(q(d[g]));return f}function t(b){var c=!1;return b&&b.hasOwnProperty(\"type\")&&(c=b.type===B.DYNAMIC),c}function p(b){return b&&b.EssentialProperty_asArray&&b.EssentialProperty_asArray.length?b.EssentialProperty_asArray.map(function(b){return{schemeIdUri:b.schemeIdUri,\nvalue:b.value}}):null}function u(b){if(b&&b.period&&x(b.period.index)){var c=b.period.mpd.manifest.Period_asArray[b.period.index];if(c&&c.AdaptationSet_asArray&&x(b.index))return q(c.AdaptationSet_asArray[b.index])}}function z(b){b=b.S_asArray[b.S_asArray.length-1];return!b.hasOwnProperty(\"r\")||0<=b.r}function v(b,c){var d=[],e;if(!b)return d;for(e=0;e<b.length;e++){var f=new qd;if(f.timescale=1,f.representation=c,!b[e].hasOwnProperty(G.SCHEME_ID_URI))throw Error(\"Invalid EventStream. SchemeIdUri has to be set\");\nf.schemeIdUri=b[e].schemeIdUri;b[e].hasOwnProperty(B.TIMESCALE)&&(f.timescale=b[e].timescale);b[e].hasOwnProperty(B.VALUE)&&(f.value=b[e].value);d.push(f)}return d}function y(b){var c=[],d=!1;return(b.BaseURL_asArray||[b.baseUri]).some(function(e){if(e){var f=new Lc,g=e.__text||e;w.isRelative(g)&&(d=!0,b.baseUri&&(g=w.resolve(g,b.baseUri)));f.url=g;for(var h=[],l=1;e[\"backupUrl\"+l];l++)h.push(e[\"backupUrl\"+l]);return f.urls=[f.url].concat(h),e.hasOwnProperty(B.SERVICE_LOCATION)&&e.serviceLocation.length?\nf.serviceLocation=e.serviceLocation:f.serviceLocation=g,e.hasOwnProperty(B.DVB_PRIORITY)&&(f.dvb_priority=e[B.DVB_PRIORITY]),e.hasOwnProperty(B.DVB_WEIGHT)&&(f.dvb_weight=e[B.DVB_WEIGHT]),e.hasOwnProperty(B.AVAILABILITY_TIME_OFFSET)&&(f.availabilityTimeOffset=e[B.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(B.AVAILABILITY_TIME_COMPLETE)&&(f.availabilityTimeComplete=\"false\"!==e[B.AVAILABILITY_TIME_COMPLETE]),c.push(f),d}}),c}b=b||{};var D=this.context,w=Ib(D).getInstance(),A=b.mediaController,C=b.timelineConverter,\nP=b.adapter,x=Number.isInteger||function(b){return\"number\"==typeof b&&isFinite(b)&&Math.floor(b)===b};return{getIsTypeOf:c,getIsAudio:d,getIsVideo:e,getIsText:function(b){return c(b,G.TEXT)},getIsMuxed:g,getIsTextTrack:l,getIsFragmentedText:f,getIsImage:h,getIsMain:k,getLanguageForAdaptation:function(b){var c=\"\";return b&&b.hasOwnProperty(B.LANG)&&(c=b.lang.replace(/[^A-Za-z0-9-]/g,\"\")),c},getViewpointForAdaptation:function(b){return b&&b.hasOwnProperty(B.VIEWPOINT)?b.Viewpoint:null},getRolesForAdaptation:m,\ngetAccessibilityForAdaptation:function(b){return b&&b.hasOwnProperty(B.ACCESSIBILITY_ASARRAY)?b.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(b){return b&&b.hasOwnProperty(B.AUDIOCHANNELCONFIGURATION_ASARRAY)?b.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(b,c,d){return(c=c&&c.Period_asArray&&x(d)&&c.Period_asArray[d]?c.Period_asArray[d].AdaptationSet_asArray:null)&&x(b)?c[b]:null},getIndexForAdaptation:function(b,c,d){c=c&&c.Period_asArray&&x(d)&&\nc.Period_asArray[d]?c.Period_asArray[d].AdaptationSet_asArray:[];d=c.length;if(b)for(var e=0;e<d;e++)if(gd(D).getInstance().areEqual(c[e],b))return e;return-1},getAdaptationForId:function(b,c,d){d=c&&c.Period_asArray&&x(d)&&c.Period_asArray[d]?c.Period_asArray[d].AdaptationSet_asArray:[];var e=0;for(c=d.length;e<c;e++)if(d[e].hasOwnProperty(B.ID)&&d[e].id===b)return d[e];return null},getAdaptationsForType:n,getAdaptationForType:function(b,c,d,e){b=n(b,c,d);if(!b||0===b.length)return null;if(1<b.length&&\ne){c=A.getCurrentTrackFor(d,e);d=P.getAllMediaInfoForType(e,d);if(c){e=0;for(var f=b.length;e<f;e++)if(A.isTracksEqual(c,d[e]))return b[e]}c=0;for(d=b.length;c<d;c++)if(k(b[c]))return b[c]}return b[0]},getCodec:function(b,c,d){return b&&b.Representation_asArray&&0<b.Representation_asArray.length?(b=x(c)&&0<=c&&c<b.Representation_asArray.length?b.Representation_asArray[c]:b.Representation_asArray[0],c=b.mimeType+';codecs=\"'+b.codecs+'\"',d&&void 0!==b.width&&(c+=';width=\"'+b.width+'\";height=\"'+b.height+\n'\"'),c):null},getMimeType:function(b){return b&&b.Representation_asArray&&0<b.Representation_asArray.length?b.Representation_asArray[0].mimeType:null},getKID:function(b){return b&&b.hasOwnProperty(B.CENC_DEFAULT_KID)?b[B.CENC_DEFAULT_KID]:null},getContentProtectionData:function(b){return b&&b.hasOwnProperty(B.CONTENTPROTECTION_ASARRAY)&&0!==b.ContentProtection_asArray.length?b.ContentProtection_asArray:null},getIsDynamic:t,getIsDVB:function(b){var c=!1;return b&&b.profiles&&0<b.profiles.length&&(c=\n-1!==b.profiles.indexOf(\"urn:dvb:dash:profile:dvb-dash:2014\")),c},getDuration:function(b){return b&&b.hasOwnProperty(B.MEDIA_PRESENTATION_DURATION)?b.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(b){return b&&b.bandwidth?b.bandwidth:NaN},getManifestUpdatePeriod:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=NaN;return b&&b.hasOwnProperty(B.MINIMUM_UPDATE_PERIOD)&&(d=b.minimumUpdatePeriod),isNaN(d)?d:Math.max(d-c,1)},getRepresentationCount:function(b){return b&&\nb.Representation_asArray&&b.Representation_asArray.length?b.Representation_asArray.length:0},getBitrateListForAdaptation:function(b){return b&&b.Representation_asArray&&b.Representation_asArray.length?q(b).Representation_asArray.map(function(b){return{id:b.id||\"\",bandwidth:b.bandwidth,width:b.width||0,height:b.height||0,scanType:b.scanType||null}}):null},getRepresentationFor:function(b,c){return c&&c.Representation_asArray&&0<c.Representation_asArray.length&&x(b)?c.Representation_asArray[b]:null},\ngetRepresentationsForAdaptation:function(b){var c=[],d=u(b),e=void 0,f=void 0;if(b&&b.period&&x(b.period.index)){var g=y(b.period.mpd.manifest);g&&(f=g[0])}if(d&&d.Representation_asArray)for(var g=0,h=d.Representation_asArray.length;g<h;++g){var m=d.Representation_asArray[g],k=new bc;if(k.index=g,k.adaptation=b,m.hasOwnProperty(B.ID)&&(k.id=m.id),m.hasOwnProperty(B.CODECS)&&(k.codecs=m.codecs),m.hasOwnProperty(B.CODEC_PRIVATE_DATA)&&(k.codecPrivateData=m.codecPrivateData),m.hasOwnProperty(B.BANDWITH)&&\n(k.bandwidth=m.bandwidth),m.hasOwnProperty(B.WIDTH)&&(k.width=m.width),m.hasOwnProperty(B.HEIGHT)&&(k.height=m.height),m.hasOwnProperty(B.SCAN_TYPE)&&(k.scanType=m.scanType),m.hasOwnProperty(B.MAX_PLAYOUT_RATE)&&(k.maxPlayoutRate=m.maxPlayoutRate),m.hasOwnProperty(B.SEGMENT_BASE)?(e=m.SegmentBase,k.segmentInfoType=B.SEGMENT_BASE):m.hasOwnProperty(B.SEGMENT_LIST)?(e=m.SegmentList).hasOwnProperty(B.SEGMENT_TIMELINE)?(k.segmentInfoType=B.SEGMENT_TIMELINE,k.useCalculatedLiveEdgeTime=z(e.SegmentTimeline)):\n(k.segmentInfoType=B.SEGMENT_LIST,k.useCalculatedLiveEdgeTime=!0):m.hasOwnProperty(B.SEGMENT_TEMPLATE)?((e=m.SegmentTemplate).hasOwnProperty(B.SEGMENT_TIMELINE)?(k.segmentInfoType=B.SEGMENT_TIMELINE,k.useCalculatedLiveEdgeTime=z(e.SegmentTimeline)):k.segmentInfoType=B.SEGMENT_TEMPLATE,e.hasOwnProperty(B.INITIALIZATION_MINUS)&&(k.initialization=e.initialization.split(\"$Bandwidth$\").join(m.bandwidth).split(\"$RepresentationID$\").join(m.id))):k.segmentInfoType=B.BASE_URL,k.essentialProperties=p(m),e)e.hasOwnProperty(B.INITIALIZATION)?\n(m=e.Initialization,m.hasOwnProperty(B.SOURCE_URL)?k.initialization=m.sourceURL:m.hasOwnProperty(B.RANGE)&&(k.range=m.range)):m.hasOwnProperty(B.MIME_TYPE)&&l(m.mimeType)&&(k.range=0),e.hasOwnProperty(B.TIMESCALE)&&(k.timescale=e.timescale),e.hasOwnProperty(B.DURATION)&&(k.segmentDuration=e.duration/k.timescale),e.hasOwnProperty(B.MEDIA)&&(k.media=e.media),e.hasOwnProperty(B.START_NUMBER)&&(k.startNumber=e.startNumber),e.hasOwnProperty(B.INDEX_RANGE)&&(k.indexRange=e.indexRange),e.hasOwnProperty(B.PRESENTATION_TIME_OFFSET)&&\n(k.presentationTimeOffset=e.presentationTimeOffset/k.timescale),e.hasOwnProperty(B.AVAILABILITY_TIME_OFFSET)?k.availabilityTimeOffset=e.availabilityTimeOffset:f&&void 0!==f.availabilityTimeOffset&&(k.availabilityTimeOffset=f.availabilityTimeOffset),e.hasOwnProperty(B.AVAILABILITY_TIME_COMPLETE)?k.availabilityTimeComplete=\"false\"!==e.availabilityTimeComplete:f&&void 0!==f.availabilityTimeComplete&&(k.availabilityTimeComplete=f.availabilityTimeComplete);k.MSETimeOffset=C.calcMSETimeOffset(k);k.path=\n[b.period.index,b.index,g];c.push(k)}return c},getAdaptationsForPeriod:function(b){var c=b&&x(b.index)?b.mpd.manifest.Period_asArray[b.index]:null,l=[],m;if(c&&c.AdaptationSet_asArray)for(m=0;m<c.AdaptationSet_asArray.length;m++){var k=c.AdaptationSet_asArray[m];var q=new Re;k.hasOwnProperty(B.ID)&&(q.id=k.id);q.index=m;q.period=b;g(k)?q.type=G.MUXED:d(k)?q.type=G.AUDIO:e(k)?q.type=G.VIDEO:f(k)?q.type=G.FRAGMENTED_TEXT:h(k)?q.type=G.IMAGE:q.type=G.TEXT;l.push(q)}return l},getRegularPeriods:function(b){var c,\nd=!!b&&t(b.manifest),e=[],f=null,g=null,h=null,l=null;var m=0;for(c=b&&b.manifest&&b.manifest.Period_asArray?b.manifest.Period_asArray.length:0;m<c;m++){(g=b.manifest.Period_asArray[m]).hasOwnProperty(B.START)?(l=new tc).start=g.start:null!==f&&g.hasOwnProperty(B.DURATION)&&null!==h?((l=new tc).start=parseFloat((h.start+h.duration).toFixed(5)),l.duration=g.duration):0!==m||d||((l=new tc).start=0);null!==h&&isNaN(h.duration)&&(h.duration=parseFloat((l.start-h.start).toFixed(5)));if(null!==l){var k=\nl;var q=g;if(!q)throw Error(\"Period cannot be null or undefined\");var n=tc.DEFAULT_ID+\"_\"+m;q=(q.hasOwnProperty(B.ID)&&0<q.id.length&&\"__proto__\"!==q.id&&(n=q.id),n);k.id=q}null!==l&&g.hasOwnProperty(B.DURATION)&&(l.duration=g.duration);null!==l&&(l.index=m,l.mpd=b,e.push(l),f=g,h=l);l=g=null}if(0!==e.length&&null!==h&&isNaN(h.duration)){b=h;c=parseFloat;d=h;f=t(d.mpd.manifest);if(d.mpd.manifest.mediaPresentationDuration)d=d.mpd.manifest.mediaPresentationDuration;else if(d.duration)d=d.duration;else{if(!f)throw Error(\"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.\");\nd=Number.POSITIVE_INFINITY}b.duration=c((d-h.start).toFixed(5))}return e},getMpd:function(b){var c=new Se;return b&&(c.manifest=b,b.hasOwnProperty(B.AVAILABILITY_START_TIME)?c.availabilityStartTime=new Date(b.availabilityStartTime.getTime()):c.availabilityStartTime=new Date(b.loadedTime.getTime()),b.hasOwnProperty(B.AVAILABILITY_END_TIME)&&(c.availabilityEndTime=new Date(b.availabilityEndTime.getTime())),b.hasOwnProperty(B.MINIMUM_UPDATE_PERIOD)&&(c.minimumUpdatePeriod=b.minimumUpdatePeriod),b.hasOwnProperty(B.MEDIA_PRESENTATION_DURATION)&&\n(c.mediaPresentationDuration=b.mediaPresentationDuration),b.hasOwnProperty(G.SUGGESTED_PRESENTATION_DELAY)&&(c.suggestedPresentationDelay=b.suggestedPresentationDelay),b.hasOwnProperty(B.TIMESHIFT_BUFFER_DEPTH)&&(c.timeShiftBufferDepth=b.timeShiftBufferDepth),b.hasOwnProperty(B.MAX_SEGMENT_DURATION)&&(c.maxSegmentDuration=b.maxSegmentDuration)),c},getEventsForPeriod:function(b){var c=b&&b.mpd&&b.mpd.manifest?b.mpd.manifest:null,c=(c=c?c.Period_asArray:null)&&b&&x(b.index)?c[b.index].EventStream_asArray:\nnull,d=[],e,f;if(c)for(e=0;e<c.length;e++){var g=new qd;if(g.period=b,g.timescale=1,!c[e].hasOwnProperty(G.SCHEME_ID_URI))throw Error(\"Invalid EventStream. SchemeIdUri has to be set\");g.schemeIdUri=c[e].schemeIdUri;c[e].hasOwnProperty(B.TIMESCALE)&&(g.timescale=c[e].timescale);c[e].hasOwnProperty(B.VALUE)&&(g.value=c[e].value);for(f=0;f<c[e].Event_asArray.length;f++){var h=new pd;h.presentationTime=0;h.eventStream=g;c[e].Event_asArray[f].hasOwnProperty(B.PRESENTATION_TIME)&&(h.presentationTime=c[e].Event_asArray[f].presentationTime);\nc[e].Event_asArray[f].hasOwnProperty(B.DURATION)&&(h.duration=c[e].Event_asArray[f].duration);c[e].Event_asArray[f].hasOwnProperty(B.ID)&&(h.id=c[e].Event_asArray[f].id);d.push(h)}}return d},getEventStreamForAdaptationSet:function(b,c){var d=void 0,e=void 0,f=void 0;return b&&b.Period_asArray&&c&&c.period&&x(c.period.index)&&(e=b.Period_asArray[c.period.index])&&e.AdaptationSet_asArray&&x(c.index)&&(f=e.AdaptationSet_asArray[c.index])&&(d=f.InbandEventStream_asArray),v(d,null)},getEventStreamForRepresentation:function(b,\nc){var d=void 0,e=void 0,f=void 0,g=void 0;return b&&b.Period_asArray&&c&&c.adaptation&&c.adaptation.period&&x(c.adaptation.period.index)&&(e=b.Period_asArray[c.adaptation.period.index])&&e.AdaptationSet_asArray&&x(c.adaptation.index)&&(f=e.AdaptationSet_asArray[c.adaptation.index])&&f.Representation_asArray&&x(c.index)&&(g=f.Representation_asArray[c.index])&&(d=g.InbandEventStream_asArray),v(d,c)},getUTCTimingSources:function(b){var c=t(b),d=!!b&&b.hasOwnProperty(B.AVAILABILITY_START_TIME);b=b?b.UTCTiming_asArray:\nnull;var e=[];return(c||d)&&b&&b.forEach(function(b){var c=new dd;b.hasOwnProperty(G.SCHEME_ID_URI)&&(c.schemeIdUri=b.schemeIdUri,b.hasOwnProperty(B.VALUE)&&(c.value=b.value.toString(),e.push(c)))}),e},getBaseURLsFromElement:y,getRepresentationSortFunction:function(){return function(b,c){return b.bandwidth-c.bandwidth}},getLocation:function(b){if(b&&b.hasOwnProperty(G.LOCATION))return b.Location=b.Location_asArray[0],b.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(b){b=u(b).Representation_asArray[0];\nvar c=void 0;return b.hasOwnProperty(B.SEGMENT_LIST)?!(c=b.SegmentList).hasOwnProperty(B.SEGMENT_TIMELINE)||z(c.SegmentTimeline):!(!b.hasOwnProperty(B.SEGMENT_TEMPLATE)||!(c=b.SegmentTemplate).hasOwnProperty(B.SEGMENT_TIMELINE))&&z(c.SegmentTimeline)}}}function Yc(b){function c(b){return f(b,za.BUFFER_LEVEL)}function d(b){if(!b)return null;b=b.HttpList;var c=null,d;if(!b||0>=b.length)return null;for(d=b.length-1;0<=d;){if(b[d].responsecode){c=b[d];break}d--}return c}function e(b){return b&&b.HttpList?\nb.HttpList:[]}function f(b,c){if(!b)return null;b=b[c];if(!b)return null;c=b.length;return 0>=c?null:b[c-1]}function g(b){var c={};if(!b)return c;b=b.trim().split(\"\\r\\n\");for(var d=0,e=b.length;d<e;d++){var f=b[d],g=f.indexOf(\": \");0<g&&(c[f.substring(0,g)]=f.substring(g+2))}return c}function h(b,c,d){var e,f,g;if(b)for(b=b.AdaptationSet_asArray,f=0;f<b.length;f+=1){var h=b[f].Representation_asArray;for(g=0;g<h.length;g+=1)if(c===(e=h[g]).id)return d?g:e}return null}var l=(b=b||{}).dashManifestModel,\nm=b.manifestModel;return{getBandwidthForRepresentation:function(b,c){var d;return null===(d=h(m.getValue().Period_asArray[c],b))?null:d.bandwidth},getIndexForRepresentation:function(b,c){c=m.getValue().Period_asArray[c];b=h(c,b,!0);return null!==b?b:-1},getMaxIndexForBufferType:function(b,c){var d=m.getValue();if(d)a:{d=d.Period_asArray[c];c=void 0;var e,f;if(d&&b)for(d=d.AdaptationSet_asArray,f=0;f<d.length;f+=1)if(e=(c=d[f]).Representation_asArray,l.getIsTypeOf(c,b)){b=e.length;break a}b=-1}else b=\n-1;return b},getCurrentRepresentationSwitch:function(b){return f(b,za.TRACK_SWITCH)},getLatestBufferLevelVO:c,getCurrentBufferLevel:function(b){return(b=c(b))?Te.round10(b.level/1E3,-3):0},getCurrentHttpRequest:d,getHttpRequests:e,getCurrentDroppedFrames:function(b){return f(b,za.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(b){return f(b,za.SCHEDULING_INFO)},getCurrentDVRInfo:function(b){return f(b,za.DVR_INFO)},getCurrentManifestUpdate:function(b){return f(b,za.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(b,\nc){var e={};b=d(b);return b&&(e=g(b._responseHeaders)),void 0===e[c]?null:e[c]},getLatestMPDRequestHeaderValueByID:function(b,c){var d={},f,h;for(h=(b=e(b)).length-1;0<=h;h--)if((f=b[h]).type===da.MPD_TYPE){d=g(f._responseHeaders);break}return void 0===d[c]?null:d[c]},getRequestsQueue:function(b){return b?b.RequestsQueue:null}}}function Zc(){function b(b,c,d,e){return e?d&&c.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(c.availabilityStartTime.getTime()+1E3*(b+c.timeShiftBufferDepth)):c.availabilityEndTime:\nd?new Date(c.availabilityStartTime.getTime()+1E3*(b-f)):c.availabilityStartTime}function c(b,c){return(b.getTime()-c.mpd.availabilityStartTime.getTime()+1E3*f)/1E3}function d(b){g||void 0===b.offset||(f=b.offset/1E3,g=!0)}var e=l(this.context).getInstance(),f=void 0,g=void 0,h=void 0;return{initialize:function(){f=0;g=!1;h=NaN;e.on(x.TIME_SYNCHRONIZATION_COMPLETED,d,this)},isTimeSyncCompleted:function(){return g},setTimeSyncCompleted:function(b){g=b},getClientTimeOffset:function(){return f},setClientTimeOffset:function(b){f=\nb},getExpectedLiveEdge:function(){return h},setExpectedLiveEdge:function(b){h=b},calcAvailabilityStartTimeFromPresentationTime:function(c,d,e){return b.call(this,c,d,e)},calcAvailabilityEndTimeFromPresentationTime:function(c,d,e){return b.call(this,c,d,e,!0)},calcPresentationTimeFromWallTime:c,calcPresentationTimeFromMediaTime:function(b,c){return b+(c.adaptation.period.start-c.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(b,c){return c-b.adaptation.period.start},calcMediaTimeFromPresentationTime:function(b,\nc){return b-c.adaptation.period.start+c.presentationTimeOffset},calcSegmentAvailabilityRange:function(b,d){var e=b.adaptation.period,f={start:e.start,end:e.start+e.duration};if(!d)return f;if(!g&&b.segmentAvailabilityRange)return b.segmentAvailabilityRange;var h=b.segmentDuration||(b.segments&&b.segments.length?b.segments[b.segments.length-1].duration:0);d=c(new Date,e);var l=e.start+e.duration;f.start=Math.max(d-e.mpd.timeShiftBufferDepth,e.start);b=void 0!==b.availabilityTimeOffset&&b.availabilityTimeOffset<\nh?h-b.availabilityTimeOffset:h;return f.end=d>=l&&d-b<l?l:d-b,f},calcWallTimeForSegment:function(b,c){var d=void 0,e=void 0,f=void 0;return c&&(d=b.representation.adaptation.period.mpd.suggestedPresentationDelay,e=b.presentationStartTime+d,f=new Date(b.availabilityStartTime.getTime()+1E3*e)),f},calcMSETimeOffset:function(b){return b.adaptation.period.start-b.presentationTimeOffset},reset:function(){e.off(x.TIME_SYNCHRONIZATION_COMPLETED,d,this);f=0;g=!1;h=NaN}}}function Cc(){function b(){return!!ba&&\n!!sa.getElement()}function c(){return Object(Ue.a)()}function d(){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";return ga.isPaused()}function e(b){var c=[G.VIDEO,G.AUDIO,G.FRAGMENTED_TEXT];if(b)return-1!==c.indexOf(b)?la.getCurrentBufferLevel(n(b))||NaN:(U(\"Warning  - getBufferLength requested for invalid type\"),NaN);b=c.map(function(b){return 0<u(b).length?la.getCurrentBufferLevel(n(b)):Number.MAX_VALUE}).reduce(function(b,c){return Math.min(b,\nc)});return b===Number.MAX_VALUE?NaN:b}function f(b){var c=w(),d=ga.getLiveDelay();if(!c)return 0;b=c.range.start+b;return b>c.range.end-d&&(b=c.range.end-d),b}function g(b,c){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";var d=t().currentTime;void 0!==b?d=na.getTimeRelativeToStreamId(d,b):ga.getIsDynamic()&&(d=w(),d=null===d?0:h()-(d.range.end-d.time));b=J.getCachedDurationOffset(\"time\");return c&&0<d-b&&(d-=b,d=Math.min(d,h(void 0))),parseFloat(d.toFixed(5))}\nfunction h(b){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";var c=t().duration;if(ga.getIsDynamic()){var d,c=w();if(!c)return 0;c=(d=c.range.end-c.range.start)<c.manifestInfo.DVRWindowSize?d:c.manifestInfo.DVRWindowSize}if(b){b=t().currentTime;d=J.getCachedDurationOffset(\"time\");var e=J.getCachedDurationOffset(\"offset\");d?b>d&&(c=b<e?e-d:c-e):c=e?Math.min(c,e):c;c=parseFloat(c.toFixed(5))}return c}function m(b,c){k(b,c);var d=new dd;d.schemeIdUri=\nb;d.value=c;J.getUTCTimingSources().push(d)}function k(b,c){var d=J.getUTCTimingSources();d.forEach(function(e,f){e.schemeIdUri===b&&e.value===c&&d.splice(f,1)})}function q(){m(sc.DEFAULT_UTC_TIMING_SOURCE.scheme,sc.DEFAULT_UTC_TIMING_SOURCE.value)}function n(b){return ia.getReadOnlyMetricsFor(b)}function t(){if(!sa.getElement())throw\"You must first call attachView() to set the video element before calling this method\";return sa.getElement()}function p(b){if(!T)throw\"MediaPlayer not initialized!\";\nsa.setElement(b);b&&(D(),function(){if(!X){var b=dashjs.MetricsReporting;\"function\"==typeof b&&(X=b(I).create().createMetricsReporting({log:U,eventBus:L,mediaElement:t(),dashManifestModel:ua,metricsModel:ia,events:x,constants:G,metricsConstants:za}))}}(),function(){if(!V){var b=dashjs.MssHandler;\"function\"==typeof b&&(V=b(I).create({eventBus:L,mediaPlayerModel:J,metricsModel:ia,playbackController:ga,protectionController:aa,errHandler:K,events:x,constants:G,log:U,initSegmentType:da.INIT_SEGMENT_TYPE,\nBASE64:rd.a,ISOBoxer:$c.a}))}}(),na&&na.switchToVideoElement());Y&&v();P()}function u(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";var c=na.getActiveStreamInfo();return c?oa.getTracksFor(b,c):[]}function z(c){if(!T)throw\"MediaPlayer not initialized!\";\"string\"==typeof c&&Pb(I).getInstance().initialize(c);va.video={};va.audio={};ba=c;(W||Y)&&v();b()&&P()}function v(){W=Y=!1;ja.reset();na.reset();ga.reset();R.reset();oa.reset();aa&&(aa.reset(),aa=null,\nD())}function y(){return Ve(I).create({errHandler:K,videoModel:sa,metricsModel:ia,mediaPlayerModel:J,requestModifier:Kc(I).getInstance(),mssHandler:V})}function D(){if(aa)return aa;var b=dashjs.Protection;if(\"function\"==typeof b){var c=b(I).create();return x.extend(b.events),cc.extend(b.events,{publicOnly:!0}),ka||(ka=sd(I).getInstance()),aa=c.createProtectionSystem({log:U,errHandler:K,videoModel:sa,capabilities:ka,eventBus:L,events:x,BASE64:rd.a,constants:G})}return null}function w(){var b=ia.getReadOnlyMetricsFor(G.VIDEO)||\nia.getReadOnlyMetricsFor(G.AUDIO);return la.getCurrentDVRInfo(b)}function A(b){var c=w();return c?b+(c.manifestInfo.availableFrom.getTime()/1E3+c.range.start):0}function C(){if(!W)throw\"You must first call initialize() and set a source before calling this method\";var b=na.getActiveStreamInfo();return b?na.getStreamById(b.id):null}function P(){var c;!W&&ba&&(W=!0,U(\"Streaming Initialized\"),c=y(),na||(na=We(I).getInstance()),oa.setConfig({errHandler:K,domStorage:xa}),na.setConfig({capabilities:ka,manifestLoader:c,\nmanifestModel:qa,dashManifestModel:ua,mediaPlayerModel:J,protectionController:aa,adapter:ja,metricsModel:ia,dashMetrics:la,errHandler:K,timelineConverter:ha,videoModel:sa,playbackController:ga,domStorage:xa,abrController:R,mediaController:oa}),ga.setConfig({streamController:na,metricsModel:ia,dashMetrics:la,manifestModel:qa,mediaPlayerModel:J,dashManifestModel:ua,adapter:ja,videoModel:sa}),R.setConfig({streamController:na,domStorage:xa,mediaPlayerModel:J,metricsModel:ia,dashMetrics:la,dashManifestModel:ua,\nmanifestModel:qa,videoModel:sa,adapter:ja,initializeDate:E}),R.createAbrRulesCollection(),na.initialize(ma,F),ba.video||ba.audio||\"string\"==typeof ba?na.load(ba,ya):na.loadWithManifest(ba,ya));!Y&&b()&&(Y=!0,U(\"Playback Initialized\"))}function M(b){var c=J.getCachedDurationOffset(\"offset\");c&&b.time>=c&&Ha&&(J.setCachedDurationOffset(\"time\",c),Ha=!1,sa.setDataOffsetAttr(c),L.trigger(x.APPENDED_NEXT_SOURCE_DURATION_CHANGED,{offset:c,totalTime:b.time,totalDuration:h(),time:g(void 0,!0),duration:Aa.min||\nh(!0)}))}function H(b){try{if(b&&b.mediaType&&b.segments){var c=b.mediaType,d=va[c],e=b.segments,f=b.representation&&b.representation.index,g=!0,h=[],l={},m=0,k=0;d.total&&d.total===e.length&&(d.segments.forEach(function(b,c){b.duration&&b.duration!==e[c].duration&&c<d.total-1&&100<Math.ceil(1E3*Math.abs(b.duration/b.timescale-e[c].duration/e[c].timescale))&&h.push(c)}),h.length&&(g=!1,l={old:d.qualityIndex,new:f}));var q=0,n=b.segments&&b.segments[b.segments.length-1];n&&(q=(n.duration+n.startTime)/\nn.timescale,Aa[c]=q,(!Aa.min||0<Aa.min&&Aa.min>q)&&(Aa.min=q));n=0;e&&e.length&&(n=e[0].startTime/e[0].timescale,oa.setStartOffsetTimeForType(c,n),m=parseInt(e[0].mediaRange.split(\"-\")[0],10),k=parseInt(e[e.length-1].mediaRange.split(\"-\")[1],10),Ia=Math.max(Ia,n));Aa.min===q&&J.getCachedDurationOffset(\"duration\")&&0<n&&(Aa.min-=n);J.setCachedDurationOffset(\"duration\",Aa.min+Ka);var t={total:e&&e.length,segments:e,isDurationAllEqual:g,qualityIndex:f,realDuration:q,startOffsetTime:n,rangeStart:m,rangeEnd:k};\ng||(t.notEqualIndexList=h,t.notEqualQualityIndex=l);va[b.mediaType]=t;\"function\"==typeof Oa&&Oa(c,t)}}catch(Xe){throw Error(\"Parse segment loaded error, \"+Xe);}}function B(){Fa=!0;var b=sa.getBufferRange(),c=sa.getElement().duration,b=b&&b.length&&b.end(b.length-1),d=sa.getTime(),c=[c,b,d+e(\"video\"),d+e(\"audio\")],d=c.filter(function(b){return!isNaN(b)}),b=d.reduce(function(b,c){return b+c})/d.length,d=Math.min.apply(null,d);if(U(\"onStreamBufferingCompleted\",Ka,c,J.getAppendingSourceState(),Ca),1>\nMath.abs(d-b)&&(Ka=parseFloat(d.toFixed(5)),Ca.length))c=Ca.splice(0,1)[0],U(\"Appending delay next source\",c),N(c.manifest,c.preloadData)}function ca(b){if(ga.getEnded()&&J.getAppendingSourceState()){var c=b.sender.getType();if(Ra[c]=b.bufferLevel,0<Ra.audio&&0<Ra.video)b=(b=sa.getBufferRange())&&b.length&&b.end(b.length-1),c=ga.getTime(),b>c+.01&&((undefined),ga.seek(c+.01),ga.play())}if(J.getAppendingSourceState()&&Na){b=J.getCachedDurationOffset(\"offset\");\nfor(var c=sa.getBufferRange(),d=ga.getTime(),e=0,f=0;f<c.length;f++)c.start(f)<d&&c.end(f)>=d&&(e=c.end(f));0<b&&e>b+1&&(J.setAppendingSourceState(!1),U(\"Appended Next Source, currentTime: \"+d+\" , buffered end: \"+e),Na=!1,L.trigger(x.APPENDED_NEXT_SOURCE,{time:d,ended:e}))}Pa||(b=sa.getBufferRange(),c=ga.getTime(),d=b&&b.length&&b.start(0),b&&b.length&&d>=Ia&&(Pa=!0,c<d&&(L.trigger(x.START_OFFSET_TIME_WARNING,{time:d}),ga.seek(d+.2))))}function N(b,c){if(U(\"Append Next Source\",sa.getTime(),sa.isSeeking()),\n!T)throw\"MediaPlayer not initialized!\";if(\"string\"==typeof b&&Pb(I).getInstance().initialize(b),sa.isSeeking())L.on(x.PLAYBACK_SEEKED,function Ic(){U(\"Seeked to append next source\");L.off(x.PLAYBACK_SEEKED,Ic);N(b)});else{if(!Fa)return U(\"Stream buffering is not completed, delay to append!\"),void(Ca=[{manifest:b,preloadData:c}]);J.setAppendingSourceState(!0);J.setCachedDurationOffset(\"offset\",Ka);L.trigger(x.APPENDING_NEXT_SOURCE,{manifest:b,time:ga.getTime(),offset:Ka});Ha=Na=!0;Fa=!1;va.video={};\nva.audio={};ba=b;Aa.min=0;Aa.video=0;Aa.audio=0;na.load(b,!0,!0)}}var I=this.context,L=l(I).getInstance(),fa=Ja(I).getInstance(),U=fa.log,E=NaN,Q=void 0,ba=void 0,F=void 0,T=void 0,W=void 0,Y=void 0,ma=void 0,R=void 0,ha=void 0,oa=void 0,aa=void 0,X=void 0,V=void 0,ja=void 0,ia=void 0,J=void 0,K=void 0,ka=void 0,na=void 0,ga=void 0,la=void 0,ua=void 0,qa=void 0,sa=void 0,xa=void 0,ya=void 0,Da=void 0,Ka=void 0,Fa=void 0,Ca=void 0,Na=void 0,Ha=void 0,Ia=void 0,Pa=void 0,va={video:{},audio:{}},Aa={min:0,\nvideo:0,audio:0},Oa=null,Ra={};return Q={initialize:function(b,d,e,f){ya=!!f;E=new Date;delete window.__DASH_P2P_TYPE__;ka||(ka=sd(I).getInstance());K=Ab(I).getInstance();ka.supportsMediaSource()?T||(T=!0,ha=Ye(I).getInstance(),R||(R=$b(I).getInstance()),ga||(ga=Gc(I).getInstance()),oa||(oa=ec(I).getInstance()),ja=Ze(I).getInstance(),ua=$e(I).getInstance({mediaController:oa,timelineConverter:ha,adapter:ja}),qa=af(I).getInstance(),la=bf(I).getInstance({manifestModel:qa,dashManifestModel:ua}),ia=cf(I).getInstance(),\nxa=df(I).getInstance({mediaPlayerModel:J}),ja.setConfig({dashManifestModel:ua,mediaPlayerModel:J}),ia.setConfig({adapter:ja}),q(),ma=void 0===e||e,b&&p(b),d&&z(d),U(\"[dash.js \"+c()+\"] MediaPlayer has been initialized\")):K.capabilityError(\"mediasource\")},setConfig:function(b){b&&(b.capabilities&&(ka=b.capabilities),b.streamController&&(na=b.streamController),b.playbackController&&(ga=b.playbackController),b.mediaPlayerModel&&(J=b.mediaPlayerModel),b.abrController&&(R=b.abrController),b.mediaController&&\n(oa=b.mediaController))},on:function(b,c,d){L.on(b,c,d)},off:function(b,c,d){L.off(b,c,d)},extend:function(b,c,d){O.a.extend(b,c,d,I)},attachView:p,attachSource:z,isReady:b,preload:function(){if(sa.getElement()||W)return!1;if(!ba)throw\"You must first call attachSource() with a valid source before calling this method\";P()},play:function(){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";(!ma||d()&&Y)&&ga.play()},isPaused:d,pause:function(){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";\nga.pause()},isSeeking:function(){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";return ga.isSeeking()},isDynamic:function(){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";return ga.getIsDynamic()},seek:function(b,c){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";if(\"number\"!=typeof b||isNaN(b))throw\"MediaPlayer Invalid Arguments!\";\nb=ga.getIsDynamic()?f(b):b;c&&(b+=J.getCachedDurationOffset(\"time\"));ga.seek(b)},setPlaybackRate:function(b){if(!sa.getElement())throw\"You must first call attachView() to set the video element before calling this method\";t().playbackRate=b},getPlaybackRate:function(){if(!sa.getElement())throw\"You must first call attachView() to set the video element before calling this method\";return t().playbackRate},setMute:function(b){if(!sa.getElement())throw\"You must first call attachView() to set the video element before calling this method\";\nt().muted=b},isMuted:function(){if(!sa.getElement())throw\"You must first call attachView() to set the video element before calling this method\";return t().muted},setVolume:function(b){if(!sa.getElement())throw\"You must first call attachView() to set the video element before calling this method\";t().volume=b},getVolume:function(){if(!sa.getElement())throw\"You must first call attachView() to set the video element before calling this method\";return t().volume},time:g,duration:h,timeAsUTC:function(){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";\nreturn 0>g()?NaN:A(g())},durationAsUTC:function(){if(!Y)throw\"You must first call initialize() and set a valid source and view before calling this method\";return A(h())},getActiveStream:C,getDVRWindowSize:function(){var b=w();return b?b.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:f,convertToTimeCode:function(b){b=Math.max(b,0);var c=Math.floor(b/3600),d=Math.floor(b%3600/60);b=Math.floor(b%3600%60);return(0===c?\"\":10>c?\"0\"+c.toString()+\":\":c.toString()+\":\")+(10>d?\"0\"+d.toString():d.toString())+\n\":\"+(10>b?\"0\"+b.toString():b.toString())},formatUTC:function(b,c,d){var e=3<arguments.length&&void 0!==arguments[3]&&arguments[3],f=new Date(1E3*b),g=f.toLocaleDateString(c),f=f.toLocaleTimeString(c,{hour12:d});return e?f+\" \"+g:f},getVersion:c,getDebug:function(){return fa},getBufferLength:e,getVideoContainer:function(){return sa?sa.getVideoContainer():null},getTTMLRenderingDiv:function(){return sa?sa.getTTMLRenderingDiv():null},getVideoElement:t,getSource:function(){if(!ba)throw\"You must first call attachSource() with a valid source before calling this method\";\nreturn ba},setLiveDelayFragmentCount:function(b){J.setLiveDelayFragmentCount(b)},setLiveDelay:function(b){J.setLiveDelay(b)},getLiveDelay:function(){return J.getLiveDelay()},getCurrentLiveLatency:function(){if(!T)throw\"MediaPlayer not initialized!\";return Y?ga.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(b){J.setUseSuggestedPresentationDelay(b)},enableLastBitrateCaching:function(b,c){J.setLastBitrateCachingInfo(b,c)},enableLastMediaSettingsCaching:function(b,c){J.setLastMediaSettingsCachingInfo(b,\nc)},setMaxAllowedBitrateFor:function(b,c){R.setMaxAllowedBitrateFor(b,c)},getMaxAllowedBitrateFor:function(b){return R.getMaxAllowedBitrateFor(b)},getTopBitrateInfoFor:function(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";return R.getTopBitrateInfoFor(b)},setMinAllowedBitrateFor:function(b,c){R.setMinAllowedBitrateFor(b,c)},getMinAllowedBitrateFor:function(b){return R.getMinAllowedBitrateFor(b)},setMaxAllowedRepresentationRatioFor:function(b,c){R.setMaxAllowedRepresentationRatioFor(b,\nc)},getMaxAllowedRepresentationRatioFor:function(b){return R.getMaxAllowedRepresentationRatioFor(b)},setAutoPlay:function(b){ma=b},getAutoPlay:function(){return ma},setScheduleWhilePaused:function(b){J.setScheduleWhilePaused(b)},getScheduleWhilePaused:function(){return J.getScheduleWhilePaused()},getDashMetrics:function(){return la},getMetricsFor:n,getQualityFor:function(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";return R.getQualityFor(b,na.getActiveStreamInfo())},\nsetQualityFor:function(b,c){if(!W)throw\"You must first call initialize() and set a source before calling this method\";R.setPlaybackQuality(b,na.getActiveStreamInfo(),c)},updatePortalSize:function(){R.setElementSize();R.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return R.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(b){R.setLimitBitrateByPortal(b)},getUsePixelRatioInLimitBitrateByPortal:function(){return R.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(b){R.setUsePixelRatioInLimitBitrateByPortal(b)},\ngetBitrateInfoListFor:function(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";var c=C();return c?c.getBitrateListFor(b):[]},setInitialBitrateFor:function(b,c){R.setInitialBitrateFor(b,c)},getInitialBitrateFor:function(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";return R.getInitialBitrateFor(b)},setInitialRepresentationRatioFor:function(b,c){R.setInitialRepresentationRatioFor(b,c)},getInitialRepresentationRatioFor:function(b){return R.getInitialRepresentationRatioFor(b)},\ngetStreamsFromManifest:function(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";return ja.getStreamsInfo(b)},getTracksFor:u,getTracksForTypeFromManifest:function(b,c,d){if(!W)throw\"You must first call initialize() and set a source before calling this method\";return(d=d||ja.getStreamsInfo(c,1)[0])?ja.getAllMediaInfoForType(d,b,c):[]},getCurrentTrackFor:function(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";\nvar c=na.getActiveStreamInfo();return c?oa.getCurrentTrackFor(b,c):null},setInitialMediaSettingsFor:function(b,c){if(!T)throw\"MediaPlayer not initialized!\";oa.setInitialSettings(b,c)},getInitialMediaSettingsFor:function(b){if(!T)throw\"MediaPlayer not initialized!\";return oa.getInitialSettings(b)},setCurrentTrack:function(b){if(!W)throw\"You must first call initialize() and set a source before calling this method\";oa.setTrack(b)},getTrackSwitchModeFor:function(b){if(!T)throw\"MediaPlayer not initialized!\";\nreturn oa.getSwitchMode(b)},setTrackSwitchModeFor:function(b,c){if(!T)throw\"MediaPlayer not initialized!\";oa.setSwitchMode(b,c)},setSelectionModeForInitialTrack:function(b){if(!T)throw\"MediaPlayer not initialized!\";oa.setSelectionModeForInitialTrack(b)},getSelectionModeForInitialTrack:function(){if(!T)throw\"MediaPlayer not initialized!\";return oa.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(b){J.setFastSwitchEnabled(b)},getFastSwitchEnabled:function(){return J.getFastSwitchEnabled()},\nsetMovingAverageMethod:function(b){b===G.MOVING_AVERAGE_SLIDING_WINDOW||b===G.MOVING_AVERAGE_EWMA?J.setMovingAverageMethod(b):U(\"Warning: Ignoring setMovingAverageMethod(\"+b+\") - unknown value.\")},getMovingAverageMethod:function(){return J.getMovingAverageMethod()},getAutoSwitchQualityFor:function(b){return R.getAutoSwitchBitrateFor(b)},setAutoSwitchQualityFor:function(b,c){R.setAutoSwitchBitrateFor(b,c)},setABRStrategy:function(b){b===G.ABR_STRATEGY_DYNAMIC||b===G.ABR_STRATEGY_BOLA||b===G.ABR_STRATEGY_THROUGHPUT?\nJ.setABRStrategy(b):U(\"Warning: Ignoring setABRStrategy(\"+b+\") - unknown value.\")},getABRStrategy:function(){return J.getABRStrategy()},useDefaultABRRules:function(b){J.setUseDefaultABRRules(b)},addABRCustomRule:function(b,c,d){J.addABRCustomRule(b,c,d)},removeABRCustomRule:function(b){J.removeABRCustomRule(b)},removeAllABRCustomRule:function(){J.removeAllABRCustomRule()},setBandwidthSafetyFactor:function(b){J.setBandwidthSafetyFactor(b)},getBandwidthSafetyFactor:function(){return J.getBandwidthSafetyFactor()},\ngetAverageThroughput:function(b){var c=R.getThroughputHistory();return c?c.getAverageThroughput(b):0},setAbandonLoadTimeout:function(b){J.setAbandonLoadTimeout(b)},retrieveManifest:function(b,c){var d=y(),e=this;L.on(x.INTERNAL_MANIFEST_LOADED,function Pd(b){b.error?c(null,b.error):c(b.manifest);L.off(x.INTERNAL_MANIFEST_LOADED,Pd,e);d.reset()},e);Pb(I).getInstance().initialize(b);d.load(b,ya)},addUTCTimingSource:m,removeUTCTimingSource:k,clearDefaultUTCTimingSources:function(){J.setUTCTimingSources([])},\nrestoreDefaultUTCTimingSources:q,setBufferToKeep:function(b){J.setBufferToKeep(b)},setBufferAheadToKeep:function(b){J.setBufferAheadToKeep(b)},setBufferPruningInterval:function(b){J.setBufferPruningInterval(b)},setStableBufferTime:function(b){J.setStableBufferTime(b)},getStableBufferTime:function(){return J.getStableBufferTime()},setBufferTimeAtTopQuality:function(