in b)b.hasOwnProperty(d)&&(c[d]=b[d])};return function(c,b){function e(){this.constructor=c}d(c,b);c.prototype=null===b?Object.create(b):(e.prototype=b.prototype,\nnew e)}}();n=function(d){function c(b){return d.call(this,b)||this}g(c,d);c.prototype.getData=function(b){var c=this,d=this.convertUpload(this.data);$.ajax({url:h.a.RECOMMEND,type:\"get\",dataType:\"json\",data:{aid:d.aid,bvid:d.bvid},beforeSend:function(c){\"function\"===typeof b.beforeSend&&b.beforeSend(c)},success:function(d){b.success(c.convertResult(d))},error:function(c){\"function\"===typeof b.error&&b.error(c)}})};c.prototype.convertUpload=function(b){return{aid:b.aid,bvid:b.bvid}};c.prototype.convertResult=\nfunction(b){for(var c=[],d=0;d<b.data.length;d++)c.push({aid:b.data[d].aid,bvid:b.data[d].bvid,pic:b.data[d].pic,title:b.data[d].title});return c};return c}(p.a);v.a=n},function(p,v,n){var h=n(72),g=n(9);p=n(15);var d=n.n(p);p=n(8);var c=n.n(p);n=function(){function b(b,c){this.player=b;this.prefix=b.prefix;this.container=b.template.sharepanel;this._init(c)}b.prototype._init=function(b){var c=this,d=this.player;this.template={};this.setState(0);this._setIsSharePanelShow(!1);d.user.addCallback(function(){c.shareConfig=\n$.extend({url:c._getShareUrl(),title:d.user.status().title,description:d.user.status().desc,pic:\"\",shortTitle:d.user.status().title,summary:\"\",weiboTag:\"#bilibili#\"},b);c._bindShare()})};b.prototype._TPL=function(){var b=this.prefix;return'<div class=\"'+b+'-video-share-panel-mask\"></div><div class=\"'+b+'-video-share-panel-wrap\"><div class=\"'+b+'-share-panel-share-header\"><i class=\"'+b+'-share-panel-close\"></i></div><div class=\"'+b+'-share-panel-share-left\"><div class=\"'+b+'-share\"><div class=\"'+b+\n'-share-btn weibo\" share-type=\"weibo\" title=\"\\u5206\\u4eab\\u5230\\u5fae\\u535a\" name=\"offsite_share_weibo_click\"><i class=\"'+b+'-iconfont icon-48weibo\" name=\"offsite_share_weibo_click\"></i>\\u5206\\u4eab\\u5230\\u5fae\\u535a</div><div class=\"'+b+'-share-btn tieba\" share-type=\"baidu\" title=\"\\u5206\\u4eab\\u5230\\u8d34\\u5427\" name=\"offsite_share_tieba_click\"><i class=\"'+b+'-iconfont icon-48tieba\" name=\"offsite_share_tieba_click\"></i>\\u5206\\u4eab\\u5230\\u8d34\\u5427</div><div class=\"'+b+'-share-btn qzone\" share-type=\"qzone\" title=\"\\u5206\\u4eab\\u5230\\u7a7a\\u95f4\" name=\"offsite_share_qzone_click\"><i class=\"'+\nb+'-iconfont icon-48kongjian\" name=\"offsite_share_qzone_click\"></i>\\u5206\\u4eab\\u5230\\u7a7a\\u95f4</div><div class=\"'+b+'-share-btn qq\" share-type=\"qq\" title=\"\\u5206\\u4eab\\u5230QQ\" name=\"offsite_share_qq_click\"><i class=\"'+b+'-iconfont icon-48qq\" name=\"offsite_share_qq_click\"></i>\\u5206\\u4eab\\u5230QQ</div></div><div class=\"'+b+'-panel-address\"><p class=\"'+b+'-panel-address-label\">\\u89c6\\u9891\\u5730\\u5740:</p><div class=\"'+b+'-panel-address-input-group\"><input class=\"'+b+'-address\" name=\"end_share_link\" readonly/><a href=\"javascript:void(0);\" class=\"'+\nb+'-share-copy-btn copy-url\" title=\"\\u590d\\u5236\" name=\"end_share_link\">\\u590d\\u5236</a></div></div><div class=\"'+b+'-panel-address\"><p class=\"'+b+'-panel-address-label\">HTML\\u5730\\u5740:</p><div class=\"'+b+'-panel-address-input-group\"><input class=\"'+b+'-address\" name=\"end_share_html\" readonly/><a href=\"javascript:void(0);\" class=\"'+b+'-share-copy-btn copy-iframe\" title=\"\\u590d\\u5236\" name=\"end_share_html\">\\u590d\\u5236</a></div></div></div><div class=\"'+b+'-share-panel-share-right\"><div class=\"'+\nb+'-share-qrcode\"><span class=\"'+b+'-share-qrcode-img\"></span><p>\\u5206\\u4eab\\u81f3\\u5fae\\u4fe1</p></div></div></div>'};b.prototype._updateShareConfig=function(){this.share.page_url.val(this._getShareUrl());this.share.html_url.val('<iframe src=\"//player.bilibili.com/player.html?'+(this.player.config.bvid?\"bvid=\"+this.player.config.bvid:\"aid=\"+this.player.config.aid)+\"&cid=\"+this.player.config.cid+\"&page=\"+this.player.config.p+'\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\"></iframe>')};\nb.prototype._getShareUrl=function(){return\"https://www.bilibili.com/video/\"+(this.player.config.bvid||\"av\"+this.player.config.aid)+(1<this.player.config.p?\"/index_\"+this.player.config.p+\".html\":\"\")};b.prototype._getImage=function(b){var c=new Image;c.src=\"//static.hdslb.com/player/images/ic_launcher.png\";c.onload=function(){b({text:\"https://app.bilibili.com\",render:\"canvas\",size:60,mode:4,mSize:.25,quiet:0,minVersion:2,ecLevel:\"M\",fill:\"#626A6F\",background:\"#fff\",radius:10,image:c})}};b.prototype._generateWeChatQRcode=\nfunction(b){var d=this.container.find(\".\"+this.prefix+\"-share-panel-bottom-left-qrcode-img\");this.bilibiliQRcode=new c.a(d[0],b)};b.prototype._bindShare=function(){var b=this,f=this.prefix;this.share={initialized:!1,container:$(b._TPL()),show:function(){if(!b.share.initialized){b.share.container.appendTo(b.container);b.share.page_url=b.share.container.find(\".\"+f+'-address[name=\"end_share_link\"]');b.share.html_url=b.share.container.find(\".\"+f+'-address[name=\"end_share_html\"]');b.template.copyBtn=b.container.find(\".\"+\nf+\"-share-copy-btn\");b.template.qrcode=b.container.find(\".\"+f+\"-share-qrcode-img\");b.template.wrap=b.container.find(\".\"+f+\"-video-share-panel-wrap\");b.template.mask=b.container.find(\".\"+f+\"-video-share-panel-mask\");b.template.close=b.container.find(\".\"+f+\"-share-panel-close\");var e={render:\"canvas\",minVersion:1,ecLevel:\"H\",size:130,quiet:1,fill:\"#000\",background:\"#fff\",text:b._getShareUrl()+\"?source=offsite\"};b.wechatQRcode||(b.wechatQRcode=new c.a(b.template.qrcode[0],e));b.template.copyBtn.each(function(c,\ne){(new d.a(e,{text:function(){return String($(e).prev().val())}})).on(\"success\",function(){new g.a({name:\"copy-tip\",target:$(e),text:\"\\u5df2\\u6210\\u529f\\u590d\\u5236\\u5230\\u526a\\u8d34\\u677f\",position:\"top-right\",margin:10});0===c?b.player.trackInfoPush(\"offsite_share_html_click\"):1===c&&b.player.trackInfoPush(\"offsite_share_link_click\")}).on(\"error\",function(){new g.a({name:\"copy-tip\",target:$(e),text:\"\\u590d\\u5236\\u5931\\u8d25\",position:\"top-right\",margin:10})})});980<=b.player.template.controller.outerWidth()?\nb.resize(!0):b.resize()}b._getIsSharePanelShow()||(b._setIsSharePanelShow(!0),b.player.pause(),b.player.pausepanel.hide(),b.player.endingpanel.hide(),b.share.initialized=!0,b._updateShareConfig(),b.share.container.addClass(\"show\"));b.template.mask.off(\"click\").on(\"click\",function(){b._setIsSharePanelShow(!1);b.share.hide();return!1});b.template.close.off(\"click\").on(\"click\",function(c,d){b._setIsSharePanelShow(!1);b.share.container.removeClass(\"show\");1===b.shareState?b.player.endingpanel.show():\n2===b.shareState?b.player.pausepanel.show():b.player.play(d);return!1})},hide:function(){b._setIsSharePanelShow(!1);b.share.container.removeClass(\"show\");2===b.shareState?b.player.pausepanel.show():b.player.play()}};h.a.bind(this.share.container,this.shareConfig,this.prefix)};b.prototype._setState=function(b){this.shareState=b};b.prototype._setIsSharePanelShow=function(b){this.isSharePanelShow=b};b.prototype._getIsSharePanelShow=function(){return this.isSharePanelShow};b.prototype._unbindEvents=function(){this.share.container.find(\".\"+\nthis.prefix+\"-share-panel-close\").off(\"click\")};b.prototype._resize=function(b){if(this.template.wrap){b=this.player.template.container.outerWidth();var c=this.player.template.container.outerHeight();this.template.wrap.css({transform:\"scale(\"+Math.min(b/960,c/544)+\")\"})}};b.prototype._adjustStyle=function(b){this.template&&(b?this.template.qrcodeContainer.addClass(\"full-screen\"):this.template.qrcodeContainer.removeClass(\"full-screen\"))};b.prototype.adjustStyle=function(b){this._adjustStyle(b)};b.prototype.getIsSharePanelShow=\nfunction(){return this._getIsSharePanelShow()};b.prototype.resize=function(b){void 0===b&&(b=!1);this._resize(b)};b.prototype.setState=function(b){this._setState(b)};b.prototype.destroy=function(){this.container.remove();this._unbindEvents()};return b}();v.a=n},function(p,v,n){v.a={appkey:{weibo:\"2841902482\",qqweibo:\"84435a83a11c484881aba8548c6e7340\"},openShareWindow:function(h,g){var d=[],c;for(c in g)g.hasOwnProperty(c)&&d.push(c+\"=\"+encodeURIComponent(g[c]||\"\"));h=h+\"?\"+d.join(\"&\");window.open(h,\n\"\",\"width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no\");return!1},bind:function(h,g,d){void 0===d&&(d=\"\");var c=this;$(h).find(\".\"+d+\"-share-btn\").each(function(b,d){b=$(d);if(b.data(\"share-init\"))return!1;b.data(\"share-init\",!0);b.on(\"click\",function(){var b=$(this).attr(\"share-type\");\"weibo\"===b?c.openShareWindow(\"http://service.weibo.com/share/share.php\",{url:g.url,type:\"3\",count:\"1\",appkey:c.appkey.weibo,title:g.weiboTag+g.title,\npic:g.pic,searchPic:g.searchPic,ralateUid:\"\",language:\"zh_cn\",rnd:Date.now()}):\"qqweibo\"===b?c.openShareWindow(\"http://v.t.qq.com/share/share.php\",{title:g.title,url:g.url,appkey:c.appkey.qqweibo,site:\"//www.bilibili.com/\",assname:\"bilibiliweb\",pic:g.pic}):\"qzone\"===b?c.openShareWindow(\"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey\",{url:g.url,showcount:1,desc:g.description,summary:g.summary,title:g.shortTitle,site:\"\\u54d4\\u54e9\\u54d4\\u54e9\",pics:g.pic,style:\"203\",width:98,height:22}):\n\"baidu\"===b?c.openShareWindow(\"http://tieba.baidu.com/f/commit/share/openShareApi\",{title:g.title,url:g.url,uid:726865,to:\"tieba\",type:\"text\",relateUid:\"\",pic:g.pic,key:\"\",sign:\"on\",desc:\"\",comment:g.description}):\"qq\"===b&&c.openShareWindow(\"http://connect.qq.com/widget/shareqq/index.html\",{url:g.url,desc:g.description,title:g.title,summary:g.summary,pics:g.pic,flash:\"\",site:\"\",style:\"201\",width:32,height:32})})})}}},function(p,v,n){var h=n(0),g=n(74),d=n(75),c=n(77),b=n(78),e=n(79),f=n(80),k=n(81),\nm=n(82);p=function(){function A(b){this.currentRatioClass=\"video-size-default\";this.hintAutoRemoved=!1;this.bufferRanges=[];this.TPL=\"\";this.lagLastSeekTime=-1;this.player=b;this.prefix=this.player.prefix;this.container=this.player.template.controller;this.config=this.player.videoSettings;b.keepFocus?(this.containerFocus=!0,b.keepFocus=!1):this.containerFocus=!1;this.init();this.globalEvents();this.player.eventLog.log(\"Controller Initialized\",0)}A.prototype.globalEvents=function(){var b=this,c=this.player;\n$(c.template.container).on(\"destroy\"+c.config.namespace,function(){b._destroy()})};A.prototype.init=function(){this.controller={};this.player.template.controller.empty();this.bind();this.startButton=new g.a(this);this.progressBar=new d.a(this);this.timeLabel=new c.a(this);this.volumeBar=new b.a(this);this.quality=new e.a(this);this.danmakuButton=new f.a(this);this.repeatButton=new k.a(this);this.screenButton=new m.a(this)};A.prototype._setVideoSize=function(){var b=this.player.template,c=b.videoWrp.width(),\nd=b.videoWrp.height();b.videoWrp.hasClass(\"video-size-4-3\")?c/4>d/3?b.videoWrp.find(\"video\").css({width:d/3*4/c*100+\"%\",height:\"100%\",\"padding-top\":\"\"}):b.videoWrp.find(\"video\").css({width:\"100%\",height:c/4*3/d*100+\"%\",\"padding-top\":(1-c/4*3/d)/2*b.videoWrp.height()+\"px\"}):b.videoWrp.hasClass(\"video-size-16-9\")?c/16>d/9?b.videoWrp.find(\"video\").css({width:d/9*16/c*100+\"%\",height:\"100%\",\"padding-top\":\"\"}):b.videoWrp.find(\"video\").css({width:\"100%\",height:c/16*9/d*100+\"%\",\"padding-top\":(1-c/16*9/d)/\n2*b.videoWrp.height()+\"px\"}):b.videoWrp.find(\"video\").css({width:\"\",height:\"\",\"padding-top\":\"\"})};A.prototype.bind=function(){var b=this,c=this,d=this.player,e=d.prefix,m=this.player.template;d.bind(h.a.EVENT.VIDEO_RESIZE,function(c,f,k){b._resize(f);b._setVideoSize();f===h.a.UI_NORMAL&&d.danmaku&&d.danmaku.list&&!k&&d.danmaku.list.update();1160<=m.container.width()?d.template.playerWrap.addClass(e+\"-video-wrap-plus\"):d.template.playerWrap.removeClass(e+\"-video-wrap-plus\")});$(window).unbind(\"resize\"+\nd.config.namespace).bind(\"resize\"+d.config.namespace,function(){setTimeout(function(){d.trigger(h.a.EVENT.VIDEO_RESIZE,d.state.mode)})});$(window).unbind(\"scroll\"+d.config.namespace).bind(\"scroll\"+d.config.namespace,function(){d.trigger(h.a.EVENT.VIDEO_SCROLL);((480>m.container.outerWidth()||360>m.container.outerHeight())&&!m.container.hasClass(\"mode-miniscreen\")||480<m.container.outerWidth()&&360<m.container.outerHeight()&&m.container.hasClass(\"mode-miniscreen\"))&&setTimeout(function(){d.trigger(h.a.EVENT.VIDEO_RESIZE,\nd.state.mode,!0)})});d.bind(h.a.EVENT.VIDEO_SCROLL,function(){$('.player-tooltips[data-tooltip-name=\"controll-tooltip\"]').remove()});d.$window.off(\"mousemove\"+d.config.namespace+\"move\").on(\"mousemove\"+d.config.namespace+\"move\",function(b){d.trigger(h.a.EVENT.VIDEO_MOUSEMOVE,b)});d.$window.off(\"click\"+d.config.namespace).on(\"click\"+d.config.namespace,function(c){$(c.target).is(m.playerWrap)||$(c.target).is(m.controller)||1===m.playerWrap.find(c.target).length||1===m.controller.find(c.target).length?\nb.containerFocus=!0:b.containerFocus=!1});var f=+new Date;d.$window.off(\"keydown\"+d.config.namespace).on(\"keydown\"+d.config.namespace,function(e){if(e&&e.keyCode){e=e.keyCode;if(27===e)return c.screenButton.onVideoMode(h.a.UI_NORMAL),!0;if(d.danmaku&&d.danmaku.contextmenu&&!d.danmaku.contextmenu.isHidden()){if(37===e||100===e)return d.danmaku.contextmenu.shiftHover(\"left\"),!1;if(39===e||102===e)return d.danmaku.contextmenu.shiftHover(\"right\"),!1;if(38===e||104===e)return d.danmaku.contextmenu.shiftHover(\"up\"),\n!1;if(40===e||98===e)return d.danmaku.contextmenu.shiftHover(\"down\"),!1;if(13===e||108===e)return d.danmaku.contextmenu.triggerHover(),!1}else if(b.containerFocus&&d.initialized&&d.video){if(10>+new Date-f)return!0;f=+new Date;if(37===e||100===e)return (undefined),\"undefined\"===typeof b.lastSeekTime?(b.lastSeekTime=d.currentTime(),b.seekTime=d.currentTime()-5,d.seek(b.seekTime,!0)):b.lastSeekTime===d.currentTime()?(b.seekTime-=5,d.seek(b.seekTime,!0)):\n(d.seek(d.currentTime()-5,!0),b.lastSeekTime=void 0),!1;if(39!==e&&102!==e||d.currentTime()===d.duration()){if(38===e||104===e)return b.volumeBar.volume(Math.min(Math.round(100*d.video.volume+10)/100,1),!0),c.player.trackInfoPush(\"keyboard_vol\"),!1;if(40===e||98===e)return b.volumeBar.volume(Math.max(Math.round(100*d.video.volume-10)/100,0),!0),c.player.trackInfoPush(\"keyboard_vol\"),!1;if(32===e)return b.lastState===h.a.V_PLAY?d.pause():d.play(),!1}else return (undefined),\"undefined\"===typeof b.lastSeekTime?(b.lastSeekTime=d.currentTime(),b.seekTime=d.currentTime()+5,d.seek(b.seekTime,!0)):b.lastSeekTime===d.currentTime()?(b.seekTime=Math.min(d.duration(),b.seekTime+5),d.seek(b.seekTime,!0)):(d.seek(d.currentTime()+5,!0),b.lastSeekTime=void 0),!1}return!0}});d.$window.off(\"beforeunload\"+d.config.namespace).on(\"beforeunload\"+d.config.namespace,function(){d.trackInfoPush(\"quit\")})};A.prototype._setState=function(b,c,d){var e=this.player;e.state.video_state=\nb;b!==h.a.V_IDEL||e.initialized||(this.lastState=h.a.V_PAUSE);b===h.a.V_READY&&this.lastState===h.a.V_PLAY&&e.danmaku&&e.danmaku.play();b===h.a.V_BUFF?this._onVideoBuff():(clearTimeout(this.loadlagTimer),delete this.loadlagTimer);b===h.a.V_PLAY&&(this.lastState===h.a.V_COMPLETE?(this.lastState=b,e.currentTime().toFixed(2)===e.duration().toFixed(2)&&e.pause(c)):this.lastState===h.a.V_PAUSE?(this.lastState=b,this._onVideoPlay(!1,c,d)):this._onVideoPlay(!0,c,d));b===h.a.V_PAUSE&&(this._onVideoPause(c,\nd),this.lastState=b);b===h.a.V_COMPLETE&&(this.lastState=b,this._onVideoEnded())};A.prototype._onVideoPlay=function(b,c,d){var e=this.player;e.video&&(this.startButton.setState(\"play\",c),b||(e.sharepanel&&(e.sharepanel.getIsSharePanelShow()&&e.sharepanel.share.hide(),e.sharepanel.setState(0)),e.pausepanel&&e.pausepanel.hide()),d||e.video.play());e.danmaku&&e.danmaku.play()};A.prototype._onVideoPause=function(b,c){var d=this.player;if(d.video&&(this.startButton.setState(\"pause\",b),!c)){d.video.pause();\nif(!d.sharepanel)return;d.sharepanel.getIsSharePanelShow()||(d.pausepanel&&d.pausepanel.show(),d.pausepanel.setCurrentTime())}d.danmaku&&d.danmaku.pause()};A.prototype._onVideoBuff=function(){var b=this,c=this,d=this.player;d.video&&(this.startButton.setState(\"buff\"),this.loadlagTimer||(this.loadlagTimer=window.setTimeout(function(){if(b.lagLastSeekTime!==d.currentTime())d.utils.browser.version.safari&&1>d.currentTime()?d.seek(1,!1,!0):d.seek(d.currentTime()+.1,!1,!0),b.lagLastSeekTime=d.currentTime();\nelse if(d.errorMessage)d.showErrorMsg(d.errorMessage),d.infiniteRetry({failCallback:function(b){d.pause();d.showErrorMsg(d.errorMessage);d.infiniteRetry(b);c.player.trackInfoPush(\"video_error\",\"code:\"+h.a.VIDEO_ANALYZE_ERROR)},doneCallback:function(b){b&&(d.retryTimer&&clearTimeout(d.retryTimer),2E3!==d.retrySecond&&(d.retrySecond=2E3),d.toast.addErrorInfo({msg:\"\\u91cd\\u65b0\\u8fde\\u63a5\\u81f3\\u670d\\u52a1\\u5668\\u6210\\u529f\",isSuccess:!0}))}});else if(d.trigger(h.a.EVENT.VIDEO_MEDIA_LOADLAG,d.getPlayurl()),\nd.loadlagSymbol=+new Date,d.videoData&&d.videoData.videoQuality&&d.videoData.videoQuality>h.a.QUALITY.CODE[1]&&!c.hintAutoRemoved){var e=\"\",m;Array.isArray(d.videoData.acceptQuality)&&d.videoData.acceptQuality.sort(function(b,c){return c-b}).forEach(function(b,c,f){Number(b)===Number(d.videoData.videoQuality)&&f[c+1]&&(m=f[c+1],e=h.a.QUALITY.NAME[m])});if(!e||!m)return!1;d.toast.addTopHinter('<span class=\"'+c.player.prefix+'-video-toast-top-wrap\">\\u7f51\\u7edc\\u4e0d\\u7a33\\u5b9a,\\u8bd5\\u8bd5\\u5207\\u6362\\u5230<span class=\"'+\nc.player.prefix+'-video-toast-top-lower-quality\">'+e+\"</span>?</span>\",8E3,function(){c.hintAutoRemoved=!0});d.toast.domNodes.wrapper.find(\".\"+c.player.prefix+\"-video-toast-top-lower-quality\").on(\"click\",function(){c.player.trackInfoPush(\"click_toast-reso\");for(var b=$('[name=\"ctlbar_quality\"]'),d=0;d<b.length;d++)if(Number(m)===Number(b.eq(d).attr(\"data-value\"))){b.eq(d).trigger(\"click\");break}})}},5E3)));d.danmaku&&d.danmaku.pause()};A.prototype._onVideoEnded=function(){var b=this.player;b.danmaku&&\nb.danmaku.pause();b.video&&(b.trigger(h.a.EVENT.VIDEO_MEDIA_ENDED),b.firstEnded||(b.firstEnded=!0,this.player.trackInfoPush(\"end\")),b.state.repeat===h.a.V_REPEAT_ON?setTimeout(function(){b.seek(0);b.play()}):(this.updateDurationMark=!0,this.startButton.setState(\"ended\"),b.pause(),this._defaultCallback()))};A.prototype._defaultCallback=function(){var b=this.player;b.state.mode!==h.a.UI_MINI?(b.sharepanel&&b.sharepanel.setState(1),b.endingpanel.show()):b.pausepanel.show();\"function\"===typeof b.config.afterplay&&\nb.config.afterplay();0<b.videoDisableTime&&b.state.mode>h.a.UI_WIDE&&b.mode(h.a.UI_WIDE)};A.prototype._add_buffer_range=function(b,c,d){for(var e=this.bufferRanges.length-1;0<=e;e--){var m=this.bufferRanges[e];if(m.start>=b.start&&m.end<=b.end)return this.bufferRanges.splice(e,1),this._add_buffer_range(b,c,d);if(m.start<=b.start&&m.end<=b.end&&m.end>=b.start)return b.start=m.start,this.bufferRanges.splice(e,1),this._add_buffer_range(b,c,d);if(m.start>=b.start&&m.end>=b.end&&m.end<=b.start)return b.end=\nm.end,this.bufferRanges.splice(e,1),this._add_buffer_range(b,c,d);m.start>d&&this.bufferRanges.splice(e,1)}Number(b.start)<=d&&this.bufferRanges.push(b)};A.prototype.setBufferRanges=function(b){for(var c=0,d,e=0,m=this.bufferRanges.length-1;0<=m;m--)d=this.bufferRanges[m].end,d>c&&(c=d);c&&(e=c);this.progressBar.setRange(e/b);1===e/b&&this.player.trigger(h.a.EVENT.VIDEO_MEDIA_BUFFER_FULL)};A.prototype._getBufferRate=function(){if(this.progressBar)return this.progressBar.getRange()};A.prototype._buffer=\nfunction(b,c,d){this.bufferRanges=[];for(var e=0;e<b.length;e++){var m=Number(b.start(e));0<=m&&.5>m&&(m=0);var f=Number(b.end(e));this._add_buffer_range({start:m,end:f},c,d)}this._add_buffer_range({start:this.player&&this.player.video&&this.player.video.duration,end:this.player&&this.player.video&&this.player.video.duration+this.player.videoContinueTime},c,d);this.setBufferRanges(c)};A.prototype._destroy=function(){var b=this.player;clearTimeout(this.loadlagTimer);clearTimeout(this.mouseTimeout);\nclearTimeout(this.controllerTimeout);$(document).unbind(\"mousemove\"+b.config.namespace);b.$window.off(\"mousemove\"+b.config.namespace+\"move\");b.$window.off(\"click\"+b.config.namespace);b.$window.off(\"mouseup\"+b.config.namespace+\"volume\");b.$window.off(\"click\"+b.config.namespace+\"-settingmenu\");b.$window.off(\"keydown\"+b.config.namespace);b.$window.off(\"beforeunload\"+b.config.namespace)};A.prototype._resize=function(b){b=this.player.template;var c=this.player;b.container.removeClass(\"mode-miniscreen\");\n480>b.container.outerWidth()||360>b.container.outerHeight()?(b.container.addClass(\"mode-miniscreen\"),this.player.state.mode=h.a.UI_MINI):c.isFullScreen()||(this.player.state.mode=h.a.UI_NORMAL);c.sharepanel&&c.sharepanel.resize();c.endingpanel&&c.endingpanel.resize();c.suspension&&c.suspension.resize();c.pausepanel&&c.pausepanel.resize();c.danmaku&&c.danmaku.resize()};A.prototype._addVideoHint=function(b){var c=this.player;c.toast.addPayHinter('<span class=\"video-float-hint-text\">\\u8bd5\\u770b6\\u5206\\u949f\\uff0c\\u4ed8\\u8d39\\u89c2\\u770b\\u5b8c\\u6574\\u7248</span> <span class=\"video-float-hint-btn\">\\u4ed8\\u8d39\\u89c2\\u770b</span>').item.find(\".video-float-hint-btn\").click(function(){c.pause()})};\nA.prototype._addVideoMessage=function(b,c){this.quality.addVideoMessage(b,c)};A.prototype._lastPlay=function(b,c,d){var e=this;b=Math.floor(b)||0;if(!c||0>=b)return!1;var m=this.player,f=1===this.player.config.playerType,k=this.player.config.cid,g=null;if(String(c)===String(k)){if(b=Math.min(b,1E3*m.duration()),!b)return!1}else if(g=this.player.partmanager.getPartsInfo(c,d),!g||!g.p)return!1;if(g&&g.p)var t=g.p;d=\"\";g&&1<g.total&&(d=f?isNaN(g.index)?\" \"+g.index:\" \\u7b2c\"+g.index+\"\\u8bdd\":\" \\u7b2c\"+\ng.p+\"\\u4e2a\");f=\"<span>\\u4e0a\\u6b21\\u770b\\u5230\"+d+\"</span>\"+(\"<span>\"+m.utils.fmSeconds(b/1E3)+\"</span>\");this.player.toast.addBottomHinter({timeout:8E3,closeButton:!0,text:f,jump:\"\\u8df3\\u8f6c\\u64ad\\u653e\",jumpFunc:function(){String(c)!==String(k)?(m.config.t=b/1E3+\"s\",m.partmanager&&m.partmanager.parts&&(e.player.config.hasNext=t===m.partmanager.parts.length?!1:!0),m.cidLoader({aid:g.aid,bvid:g.bvid,cid:g.cid,p:t,episodeId:g.episodeId})):m.seek(b/1E3)}})};A.prototype.updateQuality=function(b,c,\nd,e){this.quality.updateQuality(b,c,d,e)};A.prototype.setState=function(b,c,d){this._setState(b,c,d)};A.prototype.setMode=function(b){this.screenButton.onVideoMode(b)};A.prototype.setPlayType=function(b){this.repeatButton.setPlayType(b)};A.prototype.volume=function(b){this.volumeBar.volume(b)};A.prototype.getLastState=function(){return this.lastState};A.prototype.getLastVolume=function(){return this.volumeBar.lastVideoVolume};A.prototype.buffer=function(b,c,d){this._buffer(b,c,d)};A.prototype.destroy=\nfunction(){this._destroy()};A.prototype.resize=function(){this._resize()};A.prototype.getDuration=function(){return this.progressBar.getDuration()};A.prototype.clearTimeMark=function(){this.progressBar.clearTimeMark()};A.prototype.addVideoHint=function(b){this._addVideoHint(b)};A.prototype.addVideoMessage=function(b,c){this._addVideoMessage(b,c)};A.prototype.lastplay=function(b,c,d){this._lastPlay(b,c,d)};A.prototype.getBufferRate=function(){return this._getBufferRate()};A.prototype.getVideoSliderRate=\nfunction(){return this.progressBar.getProgressRate()};A.prototype.setVideoSize=function(){return this._setVideoSize()};A.prototype.cacheRatioClass=function(b){if(b)this.currentRatioClass=b;else return this.currentRatioClass};A.prototype.getContainerFocus=function(){return this.containerFocus};return A}();v.a=p},function(p,v,n){p=function(){function h(g){this.prefix=g.prefix;this.player=g.player;this.controller=g;this.init()}h.prototype.TPL=function(){var g=this.prefix;return'\\n            <div name=\"play_button\" class=\"'+\ng+\"-video-btn \"+g+'-video-btn-start video-state-pause\">\\n                <i class=\"'+g+\"-iconfont \"+g+'-iconfont-start icon-24play\" name=\"play_button\"></i>\\n                <i class=\"'+g+\"-iconfont \"+g+'-iconfont-pause icon-24pause\" name=\"pause_button\"></i>\\n            </div>\\n            '};h.prototype.init=function(){this.container=$(this.TPL()).appendTo(this.controller.container);this.disable();this.bind()};h.prototype.bind=function(){var g=this,d=this.player,c=d.template;this.container.bind(\"click\",\nfunction(b,c){if(c&&d.config.ad)return window.open(d.config.ad),d.pause(c),!1;if($(this).hasClass(\"disabled\"))return!1;$(this).hasClass(\"video-state-pause\")?d.play(c):d.pause(c)});c.videoWrp.click(function(b){b.stopPropagation();g.toggle()});c.videoState.click(function(b){b.stopPropagation();g.toggle()})};h.prototype.toggle=function(){this.container.hasClass(\"video-state-pause\")||this.container.attr(\"name\",\"pause_screen\");this.container.trigger(\"click\",[!0])};h.prototype.setState=function(g,d){var c=\nthis.container,b=this.player.template.playerArea;\"play\"===g?(d||c.attr(\"name\",\"play_button\"),c.removeClass(\"video-state-pause\"),c.removeClass(\"video-state-buff\"),b.removeClass(\"video-state-pause\"),b.removeClass(\"video-state-buff\")):\"pause\"===g?(d||c.attr(\"name\",\"pause_button\"),c.addClass(\"video-state-pause\"),c.removeClass(\"video-state-buff\"),b.addClass(\"video-state-pause\"),b.removeClass(\"video-state-buff\")):\"buff\"===g?(c.attr(\"name\",\"play_button\"),c.removeClass(\"video-state-pause\"),c.addClass(\"video-state-buff\"),\nb.removeClass(\"video-state-pause\"),b.addClass(\"video-state-buff\")):\"ended\"===g&&(c.attr(\"name\",\"pause_button\"),c.addClass(\"video-state-pause\"),c.removeClass(\"video-state-buff\"),b.removeClass(\"video-state-pause\"),b.removeClass(\"video-state-buff\"))};h.prototype.enable=function(){this.container.removeClass(\"disabled\")};h.prototype.disable=function(){this.container.addClass(\"disabled\")};return h}();v.a=p},function(p,v,n){var h=n(0),g=n(2),d=n(76);p=function(){function c(b){this.HOVER_FIX=2;this.prefix=\nb.prefix;this.player=b.player;this.controller=b;this.init()}c.prototype.init=function(){var b=this,c=this.player,d=this;this.container=$(this.TPL()).appendTo(this.controller.container);this.bar=$(this.BARTPL()).appendTo(this.container);var k=function(d){if($(d.target).is(b.barUI.$handle))b.barDetail.hide(),clearTimeout(b.progressTimer),b.barDetailImg.hide();else{d=b.barUI.getEventsPage(d).x-b.bar.offset().left;b.barDetail.css(\"left\",d+\"px\");var e=(c.duration()||0)*(d-b.barUI.$handle.width()/2)/(b.bar.width()-\nb.barUI.$handle.width());d>b.HOVER_FIX&&d<b.bar.width()-b.HOVER_FIX?b.barDetail.show():b.barDetail.hide();0>e&&(e=0);e>c.duration()&&(e=c.duration());b.barDetailTime.html(c.utils.fmSeconds(e));b.setProgressDetailImg(b.barDetailImg,e);b.progressTimer=window.setTimeout(function(){b.progressDetailImgLoaded&&b.barDetailImg.css(\"display\",\"\")},1E3)}};this.barUI=c.ui.slider(this.bar,{name:\"slider\",unchanged:!0,disabled:!0,start:function(){d.lock=!0},move:function(b){clearInterval(d.timer);d.controller.timeLabel.setCurrentTime(c.utils.fmSeconds(c.duration()*\nb));c.trigger(h.a.EVENT.VIDEO_MEDIA_SEEKING,{time:b*c.duration()})},change:function(b){d.player.trackInfoPush(\"slidebar\");clearInterval(d.timer);d.lock=!1;c.video&&c.seek(c.duration()*b);d.timer=window.setInterval(function(){d.onTime()},200)},mouseenter:function(b,e){if(!c.video)return!1;d.progressDetailImgInitialized||(d.progressDetailImgInitialized=!0,d.getProgressDetailImg(d.barDetailImg,5));$(document).bind(\"mousemove\"+c.config.namespace,k)},mouseleave:function(b,e){$(document).unbind(\"mousemove\"+\nc.config.namespace,k);d.barDetail.hide();clearTimeout(d.progressTimer)}});this.barDetail=$(this.DETAILTPL()).appendTo(this.bar).hide();this.barDetailTime=$(this.DETAILTIMETPL()).prependTo(this.barDetail);this.barDetailImg=$(this.DETAILIMGTPL()).prependTo(this.barDetail).hide();this.ranges=$(this.BUFFERTPL()).prependTo(this.barUI.$trkDiv);c.bind(h.a.EVENT.VIDEO_RESIZE,function(c){b.barUI.resize()});this.timer=window.setInterval(function(){b.onTime()},200)};c.prototype.TPL=function(){return'<div class=\"'+\nthis.prefix+'-video-progress\"></div>'};c.prototype.BARTPL=function(){return'<div class=\"'+this.prefix+'-video-progress-bar\"></div>'};c.prototype.DETAILTPL=function(){var b=this.prefix;return'\\n            <div class=\"'+b+'-video-progress-detail\">\\n                <div class=\"'+b+'-video-progress-detail-sign\">\\n                    <div class=\"'+b+'-video-progress-detail-sign-down\"></div>\\n                    <div class=\"'+b+'-video-progress-detail-sign-up\"></div>\\n                </div>\\n            </div>\\n            '};\nc.prototype.DETAILIMGTPL=function(){return'<div class=\"'+this.prefix+'-video-progress-detail-img\"></div>'};c.prototype.DETAILTIMETPL=function(){return'<div class=\"'+this.prefix+'-video-progress-detail-time\"></div>'};c.prototype.BUFFERTPL=function(){return'<div class=\"'+this.prefix+'-video-progress-buffer\"></div>'};c.prototype.onTime=function(){var b=this.player;b.video&&(b.currentTime()!==this.lastPlayCurrentTime&&this.updateVideoTime(b.currentTime()),b.duration()!==this.lastPlayTotalTime&&this.updateVideoTime(b.currentTime(),\nb.duration()||0))};c.prototype.updateVideoTime=function(b,c){var d=this.player,e=this.controller;e.timeLabel.setCurrentTime(d.utils.fmSeconds(b));this.lastPlayCurrentTime=b;!(c!==this.lastPlayTotalTime&&0<c)||this.lastPlayTotalTime&&this.updateDurationMark||(e.startButton.enable(),this.barUI.options.disabled=!1,e.timeLabel.setTotalTime(d.utils.fmSeconds(c)),this.lastPlayTotalTime=c,this.safariVideoDuration=d.video.duration);this.lock||this.barUI.value(this.lastPlayCurrentTime/this.lastPlayTotalTime||\n0);d.config.ad&&d.template.skipTime.html(String(Math.floor(this.lastPlayTotalTime)-Math.floor(this.lastPlayCurrentTime))||\"-\")};c.prototype.getProgressRate=function(){return this.barUI.value()};c.prototype.canUseWebP=function(){var b=document.createElement(\"canvas\");return b.getContext&&b.getContext(\"2d\")?0===b.toDataURL(\"image/webp\").indexOf(\"data:image/webp\"):!1};c.prototype.getProgressDetailImg=function(b,c){var e=this;if(!c||!this.player.config.cid||!this.player.config.bvid&&!this.player.config.aid)return!1;\n(new d.a({aid:this.player.config.aid,bvid:this.player.config.bvid,cid:this.player.config.cid,index:1,jsonp:\"jsonp\"})).getData({success:function(d){if(d&&d.data&&d.data.image){var m=d.data;e.progressDetailImgLoaded=!0;e.getArrayBufferIndex(m.pvdata,function(c){b.data({pv_img:JSON.stringify(m.image),pv_x_len:m.imgXlen,pv_y_len:m.imgYlen,pv_x_size:m.imgXsize,pv_y_size:m.imgYsize,pv_index:JSON.stringify(c)})})}else setTimeout(function(){e.getProgressDetailImg(b,--c)},1E3)},error:function(){setTimeout(function(){e.getProgressDetailImg(b,\n--c)},1E3)}})};c.prototype.getArrayBufferIndex=function(b,c){if(!b)return!1;var d=[],e=new XMLHttpRequest;e.open(\"GET\",b.replace(\"http://\",\"//\"));e.responseType=\"arraybuffer\";e.onload=function(){for(var b=e.response,f=new DataView(b),b=new Uint8Array(b.byteLength),k=0;k<b.length;k+=2){var g=f.getUint8(k)<<8,h=f.getUint8(k+1);d.push(g|h)}c(d)};e.send(null)};c.prototype.setProgressDetailImg=function(b,c){var d=$(b).data(\"pv_index\"),e=this.canUseWebP();if(!d)return!1;d=JSON.parse(d);if(!d.length)return!1;\nfor(var m=d.length-1,h=0;h<d.length-2;h++)if(c>=d[h]&&c<d[h+1]){m=h;break}c=$(b).data(\"pv_img\");if(!c)return!1;c=JSON.parse(g.a.relaceHttp(c));if(\"[object Object]\"===Object.prototype.toString.call(c)){var d=[],u;for(u in c)c.hasOwnProperty(u)&&d.push(c[u]);c=d}if(!c.length||!c[Math.floor(m/100)])return!1;if(e)for(u=0;u<c.length;u++)c[u]=c[u].replace(\".jpg\",\".jpg@.webp\");e={pv_img:c,pv_x_len:parseInt($(b).data(\"pv_x_len\"),10)||10,pv_y_len:parseInt($(b).data(\"pv_y_len\"),10)||10,pv_x_size:parseInt($(b).data(\"pv_x_size\"),\n10)||160,pv_y_size:parseInt($(b).data(\"pv_y_size\"),10)||90};b.css({width:e.pv_x_size,height:e.pv_y_size,\"background-image\":\"url(\"+c[Math.floor(m/100)]+\")\",\"background-position\":-(m%100%e.pv_x_len)*e.pv_x_size+\"px \"+-Math.floor(m%100/e.pv_y_len)*e.pv_y_size+\"px\"})};c.prototype.setRange=function(b){var c=this.prefix,d=this.ranges.find(\".\"+c+\"-video-progress-buffer-range\");d.length?100*b+\"%\"<d[0].style.width?d.css({width:100*b+\"%\"}):d.stop().animate({width:100*b+\"%\"},300):$(\"<div>\").addClass(c+\"-video-progress-buffer-range\").css({width:100*\nb+\"%\"}).appendTo(this.ranges);this.ranges.data(\"buffer\",b)};c.prototype.getRange=function(){return parseFloat(this.ranges.data(\"buffer\")||0)};c.prototype.clearTimeMark=function(){this.safariVideoDuration=this.lastPlayTotalTime=null;this.updateDurationMark=!1};c.prototype.getDuration=function(){return this.safariVideoDuration||this.player.video.duration};return c}();v.a=p},function(p,v,n){p=n(4);var h=n(7),g=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&\nfunction(c,b){c.__proto__=b}||function(c,b){for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};return function(c,b){function e(){this.constructor=c}d(c,b);c.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}();n=function(d){function c(b){return d.call(this,b)||this}g(c,d);c.prototype.getData=function(b){var c=this,d=this.convertUpload(this.data);$.ajax({url:h.a.X_PLAYER_VIDEOSHOT,type:\"get\",data:d,dataType:\"json\",xhrFields:{withCredentials:!0},beforeSend:function(c){\"function\"===\ntypeof b.beforeSend&&b.beforeSend(c)},success:function(d){b.success(c.convertResult(d))},error:function(c){b.error(c)}})};c.prototype.convertUpload=function(b){var c={cid:b.cid,index:b.index,jsonp:b.jsonp};b.bvid?c.bvid=b.bvid:c.aid=b.aid;return c};c.prototype.convertResult=function(b){var c={code:b.code,message:b.message,ttl:b.ttl};b.data&&(c.data={pvdata:b.data.pvdata,imgXlen:b.data.img_x_len,imgYlen:b.data.img_y_len,imgXsize:b.data.img_x_size,imgYsize:b.data.img_y_size,image:b.data.image,index:b.data.index});\nreturn c};return c}(p.a);v.a=n},function(p,v,n){p=function(){function h(g){this.prefix=g.prefix;this.player=g.player;this.controller=g;this.init()}h.prototype.init=function(){var g=this,d=this.player,c=this.prefix;this.container=$(this.TPL()).appendTo(this.controller.container);this.currentTime=this.container.find(\".\"+c+\"-video-time-now\");this.totalTime=this.container.find(\".\"+c+\"-video-time-total\");this.timeWrap=this.container.find(\".\"+c+\"-video-time-wrap\");this.timeSeek=this.container.find(\".\"+\nc+\"-video-time-seek\");this.timeWrap.click(function(){if(d.video&&\"undefined\"!==typeof d.currentTime()&&d.initialized){var b=Number(d.currentTime());$(this).hide();g.timeSeek.show().focus().val(d.utils.fmSeconds(b)).one(\"focusout\"+d.config.namespace,function(){$(this).unbind(\"keydown\"+d.config.namespace);$(this).hide();g.timeWrap.show();var c=d.utils.fmSecondsReverse($(this).val());Number(b)!==Number(c)&&d.seek(c)}).bind(\"keydown\"+d.config.namespace,function(c){c.stopPropagation();13===c.keyCode?($(this).unbind(\"focusout\"+\nd.config.namespace),$(this).unbind(\"keydown\"+d.config.namespace),$(this).hide(),g.timeWrap.show(),c=d.utils.fmSecondsReverse($(this).val()),b!==c&&d.seek(c)):27===c.keyCode&&($(this).unbind(\"focusout\"+d.config.namespace),$(this).unbind(\"keydown\"+d.config.namespace),$(this).hide(),g.timeWrap.show())})}})};h.prototype.TPL=function(){var g=this.prefix;return'\\n            <div class=\"'+g+'-video-time\" name=\"time_textarea\">\\n                <input class=\"'+g+'-video-time-seek\" value=\"00:00\" />\\n                <div class=\"'+\ng+'-video-time-wrap\" name=\"time_textarea\">\\n                    <span class=\"'+g+'-video-time-now\" name=\"time_textarea\">00:00</span>\\n                    <span class=\"'+g+'-video-divider\" name=\"time_textarea\">/</span>\\n                    <span class=\"'+g+'-video-time-total\" name=\"time_textarea\">00:00</span>\\n                </div>\\n            </div>\\n        '};h.prototype.setCurrentTime=function(g){this.currentTime.html(g)};h.prototype.setTotalTime=function(g){this.totalTime.html(g)};return h}();\nv.a=p},function(p,v,n){var h=n(0);p=function(){function g(d){this.prefix=d.prefix;this.player=d.player;this.controller=d;this.init()}g.prototype.TPL=function(){var d=this.prefix;return'\\n            <div class=\"'+d+\"-video-btn \"+d+'-video-btn-volume\" name=\"vol\">\\n                <i class=\"'+d+\"-iconfont \"+d+'-iconfont-volume icon-24soundsmall\" name=\"vol\"></i>\\n                <i class=\"'+d+\"-iconfont \"+d+'-iconfont-volume-max icon-24soundlarge\" name=\"vol\"></i>\\n                <i class=\"'+d+\"-iconfont \"+\nd+'-iconfont-volume-min icon-24soundoff\" name=\"vol\"></i>\\n                <div class=\"'+d+'-video-volumebar-wrp\">\\n                    <div class=\"'+d+'-video-volume-num\"></div>\\n                    <div class=\"'+d+'-video-volumebar\"></div>\\n                </div>\\n            </div>\\n        '};g.prototype.init=function(){var d=this,c=this.player,b=this,e=this.prefix;this.lastVideoVolume=c.config.ad?.67:this.controller.config.video_status.volume;this.container=$(this.TPL()).appendTo(this.controller.container);\nthis.volumeWrp=this.container.find(\".\"+e+\"-video-volumebar-wrp\");this.currentVolume=this.container.find(\".\"+e+\"-video-volume-num\").html(String(Math.round(100*this.lastVideoVolume)));this.volumebar=c.ui.slider(this.container.find(\".\"+e+\"-video-volumebar\"),{name:\"vol\",horizontal:!1,start:function(){b.volumeLock=!0},move:function(d){c.video&&b.setVolume(d,!0)},change:function(d){b.volumeLock=!1;c.video&&b.setVolume(d,!0);c.config.ad||c.set(\"video_status\",\"volume\",d)}});this.volumeWrp.unbind(\"mousedown\"+\nc.config.namespace).bind(\"mousedown\"+c.config.namespace,function(){d.container.addClass(\"mouse-hold\")});this.volumebar.$handle.unbind(\"mousedown\"+c.config.namespace).bind(\"mousedown\"+c.config.namespace,function(){d.container.addClass(\"mouse-hold\")});c.$window.unbind(\"mouseup\"+c.config.namespace+\"volume\").bind(\"mouseup\"+c.config.namespace+\"volume\",function(){d.container.removeClass(\"mouse-hold\")});this.volume(this.lastVideoVolume);this.setVolume(this.lastVideoVolume);this.container.find(\">.\"+e+\"-iconfont\").click(function(d){if($(d.target).is(b.volumeWrp)||\nb.volumeWrp.find(d.target).length)return!1;c.video&&(0===c.video.volume?b.setVolume(b.lastVideoVolume||1):b.setVolume(0),b.volume(c.video.volume),c.config.ad||c.set(\"video_status\",\"volume\",c.video.volume))});$(document).off(\"mousewheel\"+c.config.namespace+\" DOMMouseScroll\"+c.config.namespace).on(\"mousewheel\"+c.config.namespace+\" DOMMouseScroll\"+c.config.namespace,function(d){if(Number(c.state.mode)!==Number(h.a.UI_FULL))return!0;d=d.originalEvent.wheelDelta&&(0<d.originalEvent.wheelDelta?1:-1)||d.originalEvent.detail&&\n(0<d.originalEvent.detail?-1:1);0<d?b.volume(Math.min(c.video.volume+.03,1),!0):0>d&&b.volume(Math.max(c.video.volume-.03,0),!0)})};g.prototype.setVolume=function(d,c){var b=this.player;b.video&&(1<d?d=1:0>d&&(d=0),b.video.volume=d,this.container.removeClass(\"video-state-volume-max\").removeClass(\"video-state-volume-min\"),0===d?(b.video.muted=!0,this.container.addClass(\"video-state-volume-min\")):b.video.muted=!1,.5<=d&&this.container.addClass(\"video-state-volume-max\"),c&&!b.config.ad&&0!==d&&(this.lastVideoVolume=\nd),this.currentVolume.html(String(Math.round(100*d))))};g.prototype.showHint=function(d){var c=this.prefix,b=this;clearTimeout(this.showHintTimer);this.player.template.volumeHint||(this.player.template.volumeHint=$('\\n            <div class=\"'+c+'-volumeHint\">\\n                <span class=\"'+c+'-volumeHint-icon\">\\n                    <i class=\"'+c+\"-iconfont \"+c+'-iconfont-volume icon-24soundsmall\"></i>\\n                    <i class=\"'+c+\"-iconfont \"+c+'-iconfont-volume-max icon-24soundlarge\"></i>\\n                    <i class=\"'+\nc+\"-iconfont \"+c+'-iconfont-volume-min icon-24soundoff\"></i>\\n                </span>\\n                <span class=\"'+c+'-volumeHint-text\"></span>\\n            </div>').appendTo(this.player.template.playerWrap),this.player.template.volumeHintIcon=this.player.template.volumeHint.find(\".\"+c+\"-volumeHint-icon\"),this.player.template.volumeHintText=this.player.template.volumeHint.find(\".\"+c+\"-volumeHint-text\"));this.player.template.volumeHint.stop().css(\"opacity\",1).show();this.player.template.volumeHintText.html(d+\n\"%\");this.player.template.volumeHintIcon.removeClass(\"video-state-volume-min\").removeClass(\"video-state-volume-max\");0===d?(this.player.template.volumeHintIcon.addClass(\"video-state-volume-min\"),this.player.template.volumeHintText.html(\"\\u9759\\u97f3\")):50<=d&&this.player.template.volumeHintIcon.addClass(\"video-state-volume-max\");this.showHintTimer=window.setTimeout(function(){b.player.template.volumeHint.animate({opacity:0},300,function(){$(this).hide()})},1E3)};g.prototype.volume=function(d,c){this.volumebar.value(d);\nc&&this.showHint(Math.floor(100*d))};return g}();v.a=p},function(p,v,n){var h=n(0);p=function(){function g(d){this.qualityList=[];this.prefix=d.prefix;this.player=d.player;this.controller=d;this.init()}g.prototype.init=function(){var d=this.prefix;this.container=$(this.TPL()).appendTo(this.controller.container);this.qualityMenu=this.container.find(\".\"+d+\"-video-quality-menu\").html(h.a.QUALITY.NAME[1])};g.prototype.TPL=function(){var d=this.prefix;return'\\n            <div class=\"'+d+\"-video-btn \"+\nd+'-video-btn-quality disabled\">\\n                <div class=\"'+d+'-video-quality-menu\"></div>\\n            </div>\\n        '};g.prototype.updateQuality=function(d,c,b,e){if(!d)return!1;var f=this,k=this.player;b=this.prefix;var m={0:\"\\u81ea\\u52a8\",15:'<span class=\"bilibili-player-auto-hidden\">\\u6d41\\u7545</span>360P',16:'<span class=\"bilibili-player-auto-hidden\">\\u6d41\\u7545</span>360P',32:'<span class=\"bilibili-player-auto-hidden\">\\u6e05\\u6670</span>480P',48:'<span class=\"bilibili-player-auto-hidden\">\\u9ad8\\u6e05</span>720P',\n64:'<span class=\"bilibili-player-auto-hidden\">\\u9ad8\\u6e05</span>720P',74:'<span class=\"bilibili-player-auto-hidden\">\\u9ad8\\u6e05</span>720P60',80:'<span class=\"bilibili-player-auto-hidden\">\\u8d85\\u6e05</span>1080P',112:'<span class=\"'+this.prefix+'-vip\"></span>'};k.videoRealQuality&&(0===c?m[0]=112===k.videoRealQuality?'\\u81ea\\u52a8<span class=\"bilibili-player-auto-hidden\">(1080P)</span>':'\\u81ea\\u52a8<span class=\"bilibili-player-auto-hidden\">('+m[k.videoRealQuality]+\")</span>\":k.videoRealQuality!==\nc&&(c=k.videoQuality=k.videoRealQuality));e=[];for(var g=0;g<d.length;g++){var u=d[g];k.isSvipQuality(u)||(u={name:m[u],value:u},u.value===c&&(u.selected=!0),e.push(u))}if(0<e.length){f.container.removeClass(\"disabled\");f.qualitymenu&&(f.qualitymenu.destroy(),f.container.html('<div class=\"'+b+'-video-quality-menu\"></div>'),f.qualityMenu=f.container.find(\".\"+b+\"-video-quality-menu\").html(\"360P\"));var t=!1,C={80:\"4\",74:\"3\",64:\"3\",48:\"3\",32:\"2\",16:\"1\",15:\"1\"};f.qualitymenu=f.player.ui.selectmenu(this.qualityMenu,\n{items:e,change:function(b,d){if(t||Number(b)===Number(k.videoQuality))return!1;k.trackInfoPush(\"offsite_quality_click\",C[b]);\"1\"!==f.player.config.high_quality?(f.qualitymenu.value(c),window.open(\"//www.bilibili.com/\"+(f.player.config.bvid||\"av\"+f.player.config.aid)+(1<f.player.config.p?\"?p=\"+f.player.config.p:\"\"))):(f.container.addClass(\"disabled\"),t=!0,k.toast.addTopHinter(\"\\u6b63\\u5728\\u4e3a\\u60a8\\u5207\\u6362\\u5230\"+m[b]+\",\\u8bf7\\u7a0d\\u5019...\"),k.quality(Number(b),function(d){d?(t=!1,c=b,k.toast.addTopHinter(\"\\u5df2\\u7ecf\\u5207\\u6362\\u81f3\"+\nm[b]+\"\\u753b\\u8d28\"),k.videoData.videoQuality=Number(b),k.initialized||k.loadingpanel.complete(3,!0)):(t=!1,f.qualitymenu.value(c),k.toast.addTopHinter(\"\\u5207\\u6362\\u5931\\u8d25\"),f.qualitymenu.value(k.videoQuality),k.initialized||k.loadingpanel.complete(3,!1));f.container.removeClass(\"disabled\")}))}})}else f.container.addClass(\"disabled\"),f.container.find(\".\"+b+\"-video-quality-menu\").html(c===h.a.QUALITY.CODE[4]?\"1080P\":m[c]);this.qualityList=d};g.prototype.addVideoMessage=function(d,c){this.player.toast.addTopHinter(d)};\nreturn g}();v.a=p},function(p,v,n){var h=n(0);p=function(){function g(d){this.prefix=d.prefix;this.player=d.player;this.controller=d;this.init()}g.prototype.init=function(){var d=this,c=this.player,b=this.prefix,e=this;this.container=$(this.TPL()).appendTo(this.controller.container);this.onVideoDanmaku(c.state.danmaku);this.container.click(function(b){\"offsite_danmuku_switch_click\"===$(b.target).attr(\"name\")&&(d.onVideoDanmaku(!c.state.danmaku),c.state.danmaku!==h.a.DM_OFF?(d.danmakuSettingLite.show(),\ne.player.trackInfoPush(\"offsite_danmuku_switch_click\",\"1\")):(d.danmakuSettingLite.hide(),e.player.trackInfoPush(\"offsite_danmuku_switch_click\",\"2\")))});this.danmakuSettingLite=$(\"<div>\").addClass(b+\"-danmaku-setting-lite-panel\").appendTo(this.container).html('\\n                <div class=\"'+b+'-danmaku-setting-lite\">\\n                    <div class=\"'+b+'-danmaku-setting-lite-row\">\\n                        <div class=\"'+b+'-danmaku-setting-lite-title\">\\u4e0d\\u900f\\u660e\\u5ea6</div>\\n                        <div class=\"'+\nb+'-danmaku-setting-lite-opacitybar\"></div>\\n                    </div>\\n                    <div class=\"'+b+'-danmaku-setting-lite-discipline\"></div>\\n                    <div class=\"'+b+'-danmaku-setting-lite-row\"><input type=\"checkbox\" class=\"'+b+'-setting-preventshade\" name=\"ctlbar_danmuku_prevent\" /></div>\\n                    <div class=\"'+b+'-danmaku-setting-lite-type-list\"></div>\\n                </div>\\n                ').click(function(b){});this.danmakuSettingLiteOpacity=c.ui.slider(this.danmakuSettingLite.find(\".\"+\nb+\"-danmaku-setting-lite-opacitybar\"),{name:\"ctlbar_danmuku_opacity\",precision:18,hint:!0,valueSetAnalyze:function(b){return 20*b/18-2/18},valueGetAnalyze:function(b){return 18*b/20+.1},valueHintAnalyze:function(b){return Math.round(100*(18*b/20+.1))+\"%\"},move:function(b){},change:function(b){c.set(\"setting_config\",\"opacity\",b.toFixed(2));c.setting&&c.setting.opacity(b)}});this.danmakuSettingLiteOpacity.value(this.controller.config.setting_config.opacity);this.danmakuSettingLitePreventshade=c.ui.checkbox(this.container.find(\".\"+\nb+\"-setting-preventshade\"),{label:\"\\u9632\\u6321\\u5b57\\u5e55\",checked:e.controller.config.setting_config.preventshade,textleft:!0,change:function(b){c.setting&&c.setting.preventshade(b)}});this.filterType=this.container.find(\".\"+b+\"-danmaku-setting-lite-type-list\");for(var f=[[\"Top\",\"\\u9876\\u7aef\\u5f39\\u5e55\",\"48danmutop\"],[\"Bottom\",\"\\u5e95\\u7aef\\u5f39\\u5e55\",\"48danmubottom\"],[\"Scroll\",\"\\u6eda\\u52a8\\u5f39\\u5e55\",\"48danmuscroll\"]],k=function(e){var k=m.controller.config.block[\"type_\"+f[e][0]];m[\"filterType\"+\nf[e][0]]=$('<div class=\"'+b+\"-block-filter-type \"+(k?\"\":\"disabled\")+'\" name=\"'+(k?\"ctlbar_danmuku_\"+f[e][0].toLowerCase()+\"_on\":\"ctlbar_danmuku_\"+f[e][0].toLocaleLowerCase()+\"_close\")+'\" ftype=\"'+f[e][0].toLowerCase()+'\"><i class=\"'+b+\"-block-filter-image \"+b+\"-iconfont icon-\"+f[e][2]+'\"><i class=\"'+b+\"-block-filter-disabled \"+b+'-iconfont icon-24danmuforbid\"></i></i><div class=\"'+b+'-block-filter-label\">'+f[e][1].toLowerCase()+\"</div></div>\").appendTo(m.filterType).click(function(){c.set(\"block\",\n\"type_\"+f[e][0].toLowerCase(),$(this).hasClass(\"disabled\"));c.block.block[\"filter_type_\"+f[e][0].toLowerCase()]($(this).hasClass(\"disabled\"));$(this).attr(\"name\",$(this).hasClass(\"disabled\")?\"ctlbar_danmuku_\"+f[e][0].toLowerCase()+\"_on\":\"ctlbar_danmuku_\"+f[e][0].toLowerCase()+\"_close\");$(this).toggleClass(\"disabled\")});m[\"filterType\"+f[e][0]].find(\"i, div\").click(function(b){b.stopPropagation();d[\"filterType\"+f[e][0]].trigger(\"click\")});m[\"filterType\"+f[e][0]].value=function(b){if(\"undefined\"===typeof b)return d.controller.config.block[\"type_\"+\nf[e][0].toLowerCase()];c.set(\"block\",\"type_\"+f[e][0].toLowerCase(),b);b?$(d).removeClass(\"disabled\"):$(d).addClass(\"disabled\")}},m=this,g=0;g<f.length;g++)k(g);this.container.hover(function(){d.danmakuSettingLiteOpacity.value(d.controller.config.setting_config.opacity);d.danmakuSettingLitePreventshade.value(d.controller.config.setting_config.preventshade);for(var b=0;b<f.length;b++)d.controller.config.block[\"type_\"+f[b][0].toLowerCase()]?d[\"filterType\"+f[b][0]].removeClass(\"disabled\"):d[\"filterType\"+\nf[b][0]].addClass(\"disabled\");if(c.state.danmaku===h.a.DM_OFF)return!1;d.danmakuSettingLite.show()},function(){d.danmakuSettingLite.hide()})};g.prototype.TPL=function(){var d=this.prefix;return'\\n            <div class=\"'+d+\"-video-btn \"+d+'-video-btn-danmaku\" name=\"offsite_danmuku_switch_click\">\\n                <i class=\"'+d+\"-iconfont \"+d+'-iconfont-danmaku icon-24danmuon\" name=\"offsite_danmuku_switch_click\" data-tooltip=\"1\" data-text=\"\\u5173\\u95ed\\u5f39\\u5e55\" data-position=\"top-center\" data-change-mode=\"0\"></i>\\n                <i class=\"'+\nd+\"-iconfont \"+d+'-iconfont-danmaku-off icon-24danmuoff\" name=\"offsite_danmuku_switch_click\" data-tooltip=\"1\" data-text=\"\\u6253\\u5f00\\u5f39\\u5e55\" data-position=\"top-center\" data-change-mode=\"0\"></i>\\n            </div>\\n            '};g.prototype.onVideoDanmaku=function(d){var c=this.player;d===h.a.DM_OFF?this.container.addClass(\"video-state-danmaku-off\"):this.container.removeClass(\"video-state-danmaku-off\");this.container.attr(\"data-text\",\"\\u6253\\u5f00\\u5f39\\u5e55\"===this.container.attr(\"data-text\")?\n\"\\u5173\\u95ed\\u5f39\\u5e55\":\"\\u6253\\u5f00\\u5f39\\u5e55\");c.state.danmaku=d;c.danmaku&&c.danmaku.visible(d)};return g}();v.a=p},function(p,v,n){var h=n(0);p=function(){function g(d){this.prefix=d.prefix;this.player=d.player;this.controller=d;this.init()}g.prototype.TPL=function(){var d=this.prefix;return'\\n            <div class=\"'+d+\"-video-btn \"+d+'-video-btn-repeat\">\\n                <i class=\"'+d+\"-iconfont \"+d+'-iconfont-repeat icon-24repeatoff\" data-tooltip=\"1\" data-text=\"\\u6253\\u5f00\\u6d17\\u8111\\u5faa\\u73af\" data-position=\"top-center\"\\n                    data-change-mode=\"3\"></i>\\n            </div>\\n            '};\ng.prototype.init=function(){var d=this,c=this.player;this.container=$(this.TPL()).appendTo(this.controller.container);this.onVideoRepeat(c.state.repeat);this.container.click(function(){(undefined);d.onVideoRepeat(!c.state.repeat);d.player.trackInfoPush(\"repeat\")})};g.prototype.onVideoRepeat=function(d){var c=this.player,b=this.prefix;d===h.a.V_REPEAT_OFF?this.container.find(\">.\"+b+\"-iconfont\").addClass(\"icon-24repeatoff\").removeClass(\"icon-24repeaton\").attr(\"data-text\",\n\"\\u6253\\u5f00\\u6d17\\u8111\\u5faa\\u73af\"):this.container.find(\">.\"+b+\"-iconfont\").removeClass(\"icon-24repeatoff\").addClass(\"icon-24repeaton\").attr(\"data-text\",\"\\u5173\\u95ed\\u6d17\\u8111\\u5faa\\u73af\");c.video&&(c.state.repeat=d,this.setPlayType())};g.prototype.setPlayType=function(d){this.player.state.play_type=\"undefined\"!==typeof d?d:this.player.state.repeat===h.a.V_REPEAT_ON?3:0<this.controller.config.video_status.autopart?2:1};return g}();v.a=p},function(p,v,n){var h=n(19),g=n(0);p=function(){function d(c){this.prefix=\nc.prefix;this.player=c.player;this.controller=c;this.init();this.onVideoMode(this.player.state.mode)}d.prototype.FULLBTN_TPL=function(){var c=this.prefix;return'\\n        <div class=\"'+c+\"-video-btn \"+c+'-video-btn-fullscreen\" name=\"browser_fullscreen\">\\n            <i class=\"'+c+\"-iconfont \"+c+'-iconfont-fullscreen icon-24fullscreen\" name=\"browser_fullscreen\" data-tooltip=\"1\" data-text=\"\\u8fdb\\u5165\\u5168\\u5c4f\" data-position=\"top-right\" data-change-mode=\"2\"></i>\\n        </div>'};d.prototype.init=\nfunction(){var c=this,b=this.player,d=b.template;this.fullscreen=$(this.FULLBTN_TPL()).appendTo(this.controller.container);this.fullscreen.click(function(d){if(h.a)b.state.mode===g.a.UI_FULL?(h.a.exit(b.window.document),c.onVideoMode(g.a.UI_NORMAL)):(b.iframe?h.a.request(b.iframe):h.a.request(b.template.container[0]),c.onVideoMode(g.a.UI_FULL));else c.onVideoMode(g.a.UI_NORMAL)});if(h.a)$(b.window.document).off(h.a.raw.fullscreenchange+b.config.namespace).on(h.a.raw.fullscreenchange+b.config.namespace,\nfunction(){if(!h.a.judgeFullscreen(b.window.document))c.onVideoMode(c.player.state.mode===g.a.UI_WIDE?g.a.UI_WIDE:g.a.UI_NORMAL);b.trigger(g.a.EVENT.VIDEO_REFULLSCREEN)});b.bind(g.a.EVENT.VIDEO_MOUSEMOVE,function(e,k){if(k&&b.state.mode===g.a.UI_FULL)if(k.clientY>d.container.height()/3*2&&k.clientY<d.container.height()-31&&!d.sendjumpbar.is(k.target)&&!d.sendjumpbar.find(k.target).length){if(c.controllerMoving)return!1;c.controllerMoving=!1;c.onVideoCursorHideTimeoutClear();c.onVideoControllerTimeoutClear(!0);\nc.onVideoCursorHideTimeout();c.onVideoControllerTimeout()}else if(k.clientY<d.container.height()/3*2){if(c.controllerMoving)return!1;c.controllerMoving=!1;c.onVideoCursorHideTimeoutClear();clearTimeout(c.controllerTimeout);c.onVideoCursorHideTimeout(2E3);c.onVideoControllerTimeout(500)}else c.controllerMoving=!1,c.onVideoCursorHideTimeoutClear(),c.onVideoControllerTimeoutClear(!0,!0)});b.bind(g.a.EVENT.VIDEO_DESTROY,function(){c.controllerMoving=!1;c.onVideoControllerTimeoutClear(!1)})};d.prototype.onVideoMode=\nfunction(c){var b=this,d=this.player,f=this.prefix,k=this.controller,m=d.template;this.lastMode=d.state.mode;d.state.mode=c;if(c!==g.a.UI_MINI){d.config.ad&&d.config.sourcePlayer.mode(c);this.controllerMoving=!1;this.onVideoCursorHideTimeoutClear();this.onVideoControllerTimeoutClear(!1,!0);this.fullscreen.addClass(\"video-state-fullscreen-off\").find(\".\"+f+\"-iconfont-fullscreen\").attr(\"data-text\",\"\\u8fdb\\u5165\\u5168\\u5c4f\");m.controller.css(\"display\",\"\");m.sendjumpbar.css(\"display\",\"\");d.$parent.removeClass(\"wide\");\nm.container.removeClass(\"mode-fullscreen\");d.$body.removeClass(\"player-fullscreen-fix\");h.a&&c!==g.a.UI_FULL&&h.a.judgeFullscreen(d.window.document)&&h.a.toggle(d.window.document);this.lastMode===g.a.UI_FULL&&(setTimeout(function(){d.setDocumentScrollElementRect(b.lastScrolltop||0)},100),d.utils.browser.version.safari&&setTimeout(function(){d.getDocumentScrollElementRect().scrollTop!==b.lastScrolltop&&d.setDocumentScrollElementRect(b.lastScrolltop||0);$(window).resize()},1E3));if(k.config.setting_config.fullscreensend)m.sendjumpbar[c===\ng.a.UI_FULL?\"addClass\":\"removeClass\"](\"active\");else m.sendjumpbar.removeClass(\"active\");c===g.a.UI_FULL&&(this.fullscreen.removeClass(\"video-state-fullscreen-off\").find(\".\"+f+\"-iconfont-fullscreen\").attr(\"data-text\",\"\\u9000\\u51fa\\u5168\\u5c4f\"),(f=d.getDocumentScrollElementRect().scrollTop)&&(this.lastScrolltop=f),m.container.addClass(\"mode-fullscreen\"),d.$body.addClass(\"player-fullscreen-fix\"),this.onVideoCursorHideTimeout(),this.onVideoControllerTimeout(),d.trigger(g.a.EVENT.VIDEO_MOUSEMOVE));setTimeout(function(){d.trigger(g.a.EVENT.VIDEO_RESIZE,\nc);d.trigger(g.a.EVENT.VIDEO_FULLSCREEN_MODE_CHANGED)});d.template.videoWrp.hasClass(\"video-size-4-3\")?d.template.videoWrp.find(\"video\").css(\"width\",d.template.videoWrp.height()/3*4/d.template.videoWrp.width()*100+\"%\"):d.template.videoWrp.find(\"video\").css(\"width\",\"\");d.danmaku&&d.danmaku.resize()}};d.prototype.onVideoCursorHideTimeout=function(c){var b=this;void 0===c&&(c=5E3);this.mouseTimeout=window.setTimeout(function(){b.player.template.container.addClass(b.prefix+\"-no-cursor\")},c)};d.prototype.onVideoCursorHideTimeoutClear=\nfunction(){this.player.template.container.removeClass(this.prefix+\"-no-cursor\");clearTimeout(this.mouseTimeout)};d.prototype.onVideoControllerTimeout=function(c){void 0===c&&(c=5E3);var b=this;this.controllerTimeout=window.setTimeout(function(){b.player.template.controller.add(b.player.template.sendjumpbar).stop().animate({opacity:0},200)},c)};d.prototype.onVideoControllerTimeoutClear=function(c,b){var d=this;clearTimeout(this.controllerTimeout);c?this.controllerMoving||(b?this.player.template.controller.add(this.player.template.sendjumpbar).css({opacity:1}):\n(this.controllerMoving=!0,this.player.template.controller.add(this.player.template.sendjumpbar).stop().animate({opacity:1},200,function(){d.controllerMoving=!1}))):this.player.template.controller.add(this.player.template.sendjumpbar).stop().css({opacity:1})};return d}();v.a=p},function(p,v,n){var h=n(16),g=this&&this.__makeTemplateObject||function(c,b){Object.defineProperty?Object.defineProperty(c,\"raw\",{value:b}):c.raw=b;return c};p=function(){function c(b){this.player=b;this.config=b.videoSettings;\nthis.prefix=b.prefix;this.init();this.player.eventLog.log(\"Setting Initialized\",0)}c.prototype.init=function(){var b=this.player,c=this.setting={},f=this;c.config=this.config.setting_config;c.opacity=function(c){b.set(\"setting_config\",\"opacity\",Number(c).toFixed(2))};c.fontfamily=function(c){b.set(\"setting_config\",\"fontfamily\",c);f.setting.sameaspanel()?(c=f.config.setting_config.fontfamily,\"custom\"===c&&(c=f.config.setting_config.fontfamilycustom),$($(d||(d=g([\".{player.prefix}\"],[\".{player.prefix}\"])))).find(\"*\").not('[class$=\"-danmaku\"] *').not('[class$=\"-danmaku\"]').css(\"font-family\",\nc),$('<style type=\"text/css\" class=\"tooltips-style\">.'+b.prefix+\"-tooltips{font-family:\"+c+\"}</style>\").appendTo($(\"body\"))):($(\".\"+b.prefix).find(\"*\").not('[class$=\"-danmaku\"] *').not('[class$=\"-danmaku\"]').css(\"font-family\",\"\"),$(\".tooltips-style\").remove())};c.fontfamilycustom=function(c){b.set(\"setting_config\",\"fontfamilycustom\",c)};c.autopart=function(c){b.set(\"video_status\",\"autopart\",c);f.player.controller&&f.player.controller.setPlayType()};c.bold=function(c){b.set(\"setting_config\",\"bold\",\nc)};c.sameaspanel=function(c){if(\"undefined\"===typeof c)return b.get(\"setting_config\",\"sameaspanel\");b.set(\"setting_config\",\"sameaspanel\",c);c?(c=f.config.setting_config.fontfamily,\"custom\"===c&&(c=f.config.setting_config.fontfamilycustom),$(\".\"+b.prefix).find(\"*\").not('[class$=\"-danmaku\"] *').not('[class$=\"-danmaku\"]').css(\"font-family\",c),$('<style type=\"text/css\" class=\"tooltips-style\">.'+b.prefix+\"-tooltips{font-family:\"+c+\"}</style>\").appendTo($(\"body\"))):($(\".\"+b.prefix).find(\"*\").not('[class$=\"-danmaku\"] *').not('[class$=\"-danmaku\"]').css(\"font-family\",\n\"\"),$(\".tooltips-style\").remove())};c.preventshade=function(c){b.set(\"setting_config\",\"preventshade\",c)};c.fontborder=function(c){b.set(\"setting_config\",\"fontborder\",c)};c.type=function(c){b.set(\"setting_config\",\"type\",c)};c.videospeed=function(c){b.video&&(b.video.playbackRate=Number(c))};c.speedplus=function(c){b.set(\"setting_config\",\"speedplus\",c)};c.fontsize=function(c){b.set(\"setting_config\",\"fontsize\",c)};c.fullscreensync=function(c){b.set(\"setting_config\",\"fullscreensync\",c)};c.fullscreensend=\nfunction(c){b.set(\"setting_config\",\"fullscreensend\",c)};c.widescreensave=function(c){b.set(\"video_status\",\"widescreensave\",c)};c.videomirror=function(c){if(\"undefined\"===typeof c)return b.template.videoWrp.hasClass(\"video-mirror\");c?b.template.videoWrp.addClass(\"video-mirror\"):b.template.videoWrp.removeClass(\"video-mirror\");b.set(\"video_status\",\"videomirror\",c)};f.player.userLoadedCallback(function(b){f.preventshadeSymbol||(f.preventshadeSymbol=!0,c.preventshade(1===parseInt(b.bottom,10)))});c.danmakunumber=\nfunction(c){b.set(\"setting_config\",\"danmakunumber\",c)};c.reset=function(){f.set($.extend({},h.a.setting_config,h.a.video_status))};this.set($.extend({},this.config.setting_config,this.config.video_status))};c.prototype.set=function(b){var c=\"type opacity fontfamilycustom fontfamily autopart bold preventshade fontborder speedplus fontsize fullscreensync widescreensave danmakunumber fullscreensend sameaspanel\".split(\" \"),d;for(d in b)b.hasOwnProperty(d)&&-1<c.indexOf(d)&&\"function\"===typeof this.setting[d]&&\nthis.setting[d](b[d])};return c}();v.a=p;var d},function(p,v,n){var h=n(0);p=function(){function g(d){this.player=d;this.config=d.videoSettings;this.prefix=d.prefix;this.init()}g.prototype.init=function(){var d=this.player,c=this.block={};c.setting=this.config.block;for(var b=[[\"scroll\",\"\\u6eda\\u52a8\\u5f39\\u5e55\",\"48danmuscroll\",\"scroll\"],[\"top\",\"\\u9876\\u7aef\\u5f39\\u5e55\",\"48danmutop\",\"top\"],[\"bottom\",\"\\u5e95\\u7aef\\u5f39\\u5e55\",\"48danmubottom\",\"btm\"]],e=0;e<b.length;e++)(function(b){c[\"filter_type_\"+\nb[0]]=function(e){if(\"undefined\"===typeof e)return c.setting[\"type_\"+b[0]];d.set(\"block\",\"type_\"+b[0],e)}})(b[e])};g.prototype.judge=function(d){var c=this.config.block;return c.type_scroll||1!==d.mode?c.type_bottom||4!==d.mode?c.type_top||5!==d.mode?h.a.BLOCK_DISABLED:h.a.BLOCK_TOP:h.a.BLOCK_BOTTOM:h.a.BLOCK_SCROLL};g.prototype.destroy=function(){};return g}();v.a=p},function(p,v,n){var h=n(0),g=n(86),d=this&&this.__assign||Object.assign||function(c){for(var b,d=1,f=arguments.length;d<f;d++){b=arguments[d];\nfor(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(c[k]=b[k])}return c};p=function(){function c(b){this.player=b;this.init()}c.prototype.init=function(){this.player.eventLog.log(\"User Initialized\",0);this.playerNumber={inner:\"--\",out:\"--\",danmaku:\"--\",limit:\"--\"};this.userStatus=null;this.retry=3;this.websocket={ws:\"broadcast.chat.bilibili.com:4090\",wss:\"broadcast.chat.bilibili.com:4095\"};this.initialized=!1};c.prototype.status=function(){return this.userStatus};c.prototype.wsUrl=function(){return this.websocket};\nc.prototype.load=function(b){var c=this;this.player.trigger(h.a.EVENT.VIDEO_PLAYER_LOAD);var d={};this.player.config.bvid?d.bvid=this.player.config.bvid:d.aid=this.player.config.aid;(new g.a(d)).getData({success:function(d){c.user(d,b)},error:function(d){c.player.trigger(h.a.EVENT.VIDEO_MEDIA_ERROR,h.a.PLAYER_ERROR,h.a.PLAYER_NETWORK_ERROR);c.finish(b)}})};c.prototype.reload=function(b){this.userStatus=null;this.retry=3;this.initialized=!1;this.load(b)};c.prototype.addCallback=function(b){\"function\"===\ntypeof b&&(this.player.userLoadedCallbacks.push(b),this.initialized&&b(this.userStatus))};c.prototype.update_number=function(b){this.playerNumber.danmaku=String(b);this.update_numbers()};c.prototype.update_numbers=function(){(undefined)};c.prototype.user=\nfunction(b,c){(this.userStatus=d({},b))&&this.userStatus.pages&&this.userStatus.pages[this.player.config.p-1]&&(this.player.config.cid=this.userStatus.pages[this.player.config.p-1].cid);this.player.trigger(h.a.EVENT.VIDEO_PLAYER_LOADED);this.finish(c)};c.prototype.finish=function(b){this.initialized=!0;this.loadCallback();this.player.initialized||this.player.loadingpanel.complete(1,!0);\"function\"===typeof b&&b(this.status)};c.prototype.loadCallback=function(){for(var b=0;b<this.player.userLoadedCallbacks.length;b++)this.player.userLoadedCallbacks[b](this.userStatus)};\nreturn c}();v.a=p},function(p,v,n){p=n(4);var h=n(7),g=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};return function(c,b){function e(){this.constructor=c}d(c,b);c.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}();n=function(d){function c(b){return d.call(this,b)||this}g(c,d);c.prototype.getData=function(b){var c=this,d=this.convertUpload(this.data);\nreturn $.ajax({url:h.a.VIEW,data:d,type:\"get\",xhrFields:{withCredentials:!0},beforeSend:function(c){\"function\"===typeof b.beforeSend&&b.beforeSend(c)},success:function(d){d&&d.data?b.success(c.convertResult(d.data)):b.error()},error:function(c){b.error(c)}})};c.prototype.convertUpload=function(b){return{aid:b.aid,cid:b.cid,bvid:b.bvid}};c.prototype.convertResult=function(b){var c=[];if(b.pages&&b.pages.length)for(var d=0;d<b.pages.length;d++)c.push({cid:b.pages[d].cid,from:b.pages[d].from,duration:b.pages[d].duration,\ndimension:{width:b.pages[d].dimension.width,height:b.pages[d].dimension.height,rotate:b.pages[d].dimension.rotate},page:b.pages[d].page,part:b.pages[d].part,vid:b.pages[d].vid,weblink:b.pages[d].weblink});return{aid:b.allow_bp,bvid:b.bvid,attribute:b.attribute,cid:b.cid,copyright:b.copyright,ctime:b.ctime,desc:b.desc,dimension:{width:b.dimension.width,height:b.dimension.height,rotate:b.dimension.rotate},duration:b.duration,dynamic:b.dynamic,noCache:b.no_cache,owner:{face:b.owner.face,mid:b.owner.mid,\nname:b.owner.name},pages:c,pic:b.pic,pubdate:b.pubdate,rights:{autoplay:b.rights.autoplay,bp:b.rights.bp,download:b.rights.download,elec:b.rights.elec,hd5:b.rights.hd5,movie:b.rights.movie,noReprint:b.rights.no_reprint,pay:b.rights.pay},stat:{aid:b.stat.aid,bvid:b.stat.bvid,coin:b.stat.coin,danmaku:b.stat.danmaku,dislike:b.stat.dislike,favorite:b.stat.favorite,hisRank:b.stat.hisRank,like:b.stat.like,nowRank:b.stat.nowRank,reply:b.stat.reply,share:b.stat.share,view:b.stat.view},state:b.state,tid:b.tid,\ntitle:b.title,tname:b.tname,videos:b.videos}};return c}(p.a);v.a=n},function(p,v,n){var h=n(3),g=n(88);p=function(){function d(c,b){var d=this;this.container=c.template.recommend;this.player=c;this.config=$.extend({url:h.a.S_PLAYER_RECOMMAND},b);this.isAnimation=!1;this.prefix=c.prefix;this.componentName=\"recommend\";this.init();this.loadRecommendInfo(function(){d._refreshTemplate(d.online,d.title,d.aid,d.bvid)});this.player.eventLog.log(\"recommend Initialized\",0)}d.prototype.init=function(){this._initTemplate()};\nd.prototype._initTemplate=function(){var c=this._cssPrefix.bind(this);this.$container=$(\"<div>\").addClass(c(\"container\")).appendTo(this.container);this.$panel=$(\"<div>\").addClass(c(\"panel\")).appendTo(this.$container);this.$panel.html(this._getRecommendUl())};d.prototype._cssPrefix=function(c){return this.prefix+\"-video-\"+this.componentName+\"-\"+c};d.prototype._recommendInfoTemplateArray=function(){return['<span class=\"online\"><i>\\u4eba\\u5728\\u89c2\\u770b\\uff1a</i></span>','<span class=\"title\"><a target=\"_blank\" name=\"offsite_top_title_click\"></a></span>',\n'<span class=\"jump\"><a target=\"_blank\" name=\"offsite_top_viewitnow_click\">\\u7acb\\u5373\\u56f4\\u89c2 ></a></span>']};d.prototype._getRecommendUl=function(){for(var c=\"\",b=this._recommendInfoTemplateArray(),d=b.length,f=0;f<d;f++)c+=b[f];return c};d.prototype.loadRecommendInfo=function(c){var b=this;(new g.a({jsonp:\"jsonp\"})).getData({success:function(d){d=[d.title,d.online,d.aid,d.bvid];b.title=d[0];b.online=d[1];b.aid=d[2];b.bvid=d[3];\"function\"===typeof c&&c()},error:function(){}})};d.prototype._refreshTemplate=\nfunction(c,b,d,f){var e=this.$panel.find(\"span\"),m=/.*\\sHTML(Span)?Element/,g=h.a.EXTERNAL_PLAYER_JUMP.replace(/<bvid>/,\"\"+(f||\"av\"+d));Object.keys(e).every(function(d,f,k){if(m.test(Object.prototype.toString.call(e[d]))){switch($(e[d]).attr(\"class\")){case \"title\":if(!b)break;e.eq(f).find(\"a\").eq(0).text(b).attr(\"href\",g).attr(\"target\",\"_blank\");break;case \"online\":if(!c)break;e.eq(f).html(c+\" <i>\\u4eba\\u5728\\u89c2\\u770b\\uff1a</i>\");break;case \"jump\":e.eq(f).find(\"a\").eq(0).attr(\"href\",g).attr(\"target\",\n\"_blank\")}return!0}return!1})};d.prototype.destroy=function(){this.container.remove()};return d}();v.a=p},function(p,v,n){var h=n(3);p=n(4);var g=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};return function(c,b){function e(){this.constructor=c}d(c,b);c.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}();p=function(d){function c(b){return d.call(this,\nb)||this}g(c,d);c.prototype.getData=function(b){var c=this;$.ajax({url:h.a.S_PLAYER_RECOMMAND+\"?jsonp=jsonp\",type:\"get\",xhrFields:{withCredentials:!0},dataType:\"json\",success:function(d){d=c._convertResult(d);b.success(d)},error:function(){}})};c.prototype._convertUpload=function(b){return{jsonp:b.jsonp}};c.prototype._convertResult=function(b){return{aid:b.aid,bvid:b.bvid,typeid:b.typeid,title:b.title,pic:b.pic,play:b.play,videoReview:b.video_review,author:b.author,copyright:b.copyright,typename:b.typename,\nsubtitle:b.subtitle,review:b.review,favorites:b.favorites,mid:b.mid,description:b.description,create:b.create,credit:b.credit,coins:b.coins,duration:b.duration,online:b.online}};return c}(p.a);v.a=p},function(p,v,n){p=n(8);var h=n.n(p),g=n(3),d=n(0),c=n(2);n=function(){function b(b){this.player=b;this.aid=b.config.aid;this.bvid=b.config.bvid;this.prefix=b.prefix;this.container=b.template.pausepanel;this.initialized=!1;this._init()}b.prototype._init=function(){var b=this;this.player.userLoadedCallback(function(){b._getInfo(function(){b.playCounts=\nb._formatCountsDisplay(b.playCounts);b.danmakuCounts=b._formatCountsDisplay(b.danmakuCounts);b.container.html(b._TPL(b.pauseInfo.avatar,b.pauseInfo.userName,b.pauseInfo.playCounts,b.pauseInfo.danmakuCounts));b._templateObj();b._isHideUpinfo()&&b._hideUpinfo();b._resize();b._bindEvents()})})};b.prototype._TPL=function(b,d,k,m){var e=this.prefix;return'<div class=\"'+e+'-video-pause-panel-container\">\\n                     <div class=\"'+e+'-video-pause-panel-container-mask\"></div>\\n                     <div class=\"'+\ne+'-video-pause-panel-container-qrcode\">\\n                         <div class=\"'+e+'-video-pause-panel-container-qrcode-text\">\\u626b\\u4e00\\u626b \\u624b\\u673a\\u770b</div>\\n                         <div class=\"'+e+'-video-pause-panel-container-qrcode-img\"></div>\\n                     </div>\\n                     <div class=\"'+e+'-video-pause-panel-container-info\">\\n                         <div class=\"'+e+'-video-pause-panel-container-info-video\"></div>\\n                         <div class=\"'+e+'-video-pause-panel-container-info-user\">\\n                             <div class=\"'+\ne+'-video-pause-panel-container-info-user-top\">\\n                                 <div class=\"'+e+'-video-pause-panel-container-info-user-top-avatar\">\\n                                      <img src=\"'+c.a.relaceHttp(b)+'\" alt=\"\">\\n                                 </div>\\n                                 <div class=\"'+e+'-video-pause-panel-container-info-user-top-name\">\\n                                     <div class=\"'+e+'-video-pause-panel-container-info-user-top-name-icon\">UP</div>\\n                                     <div class=\"'+\ne+'-video-pause-panel-container-info-user-top-name-text\">'+c.a.htmlEncode(d)+'</div>\\n                                 </div>\\n                             </div>\\n                             <div class=\"'+e+'-video-pause-panel-container-info-user-bottom\">\\n                                 <div class=\"'+e+'-video-pause-panel-container-info-user-bottom-view-counts\">\\u64ad\\u653e : <i>'+k+'</i></div>\\n                                 <div class=\"'+e+'-video-pause-panel-container-info-user-bottom-danmaku-counts\">\\u5f39\\u5e55 : <i>'+\nm+'</i></div>\\n                             </div>\\n                         </div>\\n                     </div>\\n                </div>\\n                <div class=\"'+e+'-video-pause-panel-container-mini-screen\">\\n                     <div class=\"'+e+'-video-pause-panel-container-mini-screen-blur-image\"></div>\\n                     <div class=\"'+e+'-video-pause-panel-container-mini-screen-title\"></div>\\n                     <div class=\"'+e+'-video-pause-panel-container-mini-screen-current-time\">00:00</div>\\n                </div>'};\nb.prototype._templateObj=function(){var b=this.prefix;this.template={container:this.container.find(\".\"+b+\"-video-pause-panel-container\"),miniContainer:this.container.find(\".\"+b+\"-video-pause-panel-container-mini-screen\"),avatar:this.container.find(\".\"+b+\"-video-pause-panel-container-info-user-top-avatar\"),name:this.container.find(\".\"+b+\"-video-pause-panel-container-info-user-top-name-text\"),video:this.container.find(\".\"+b+\"-video-pause-panel-container-info-video\"),qrcode:this.container.find(\".\"+b+\n\"-video-pause-panel-container-qrcode-img\"),qrcodeContainer:this.container.find(\".\"+b+\"-video-pause-panel-container-qrcode\"),mask:this.container.find(\".\"+b+\"-video-pause-panel-container-mask\"),info:this.container.find(\".\"+b+\"-video-pause-panel-container-info\"),title:this.container.find(\".\"+b+\"-video-pause-panel-container-mini-screen-title\"),currentTime:this.container.find(\".\"+b+\"-video-pause-panel-container-mini-screen-current-time\"),background:this.container.find(\".\"+b+\"-video-pause-panel-container-mini-screen-blur-image\")}};\nb.prototype._isHideUpinfo=function(){for(var b in this.pauseInfo)if(!this.pauseInfo[b]&&void 0!==this.pauseInfo[b])return!0;return!1};b.prototype._hideUpinfo=function(){this.template.info.hide()};b.prototype._setVideoPic=function(){this.template.video.css({\"background-image\":\"url(\"+c.a.relaceHttp(this.pauseInfo.videoPic)+\")\"})};b.prototype._setBackgroundPic=function(){this.template.background.css({\"background-image\":\"url(\"+c.a.relaceHttp(this.pauseInfo.videoPic)+\")\"})};b.prototype._setVideoTitle=\nfunction(){var b=this.player.user.status().title;this.template.title.html(c.a.htmlEncode(b))};b.prototype._setCurrentTime=function(){var b=this.player.utils.fmSeconds(+this.player.currentTime());this.player.state.mode===d.a.UI_MINI&&this.template.currentTime.html(b)};b.prototype._getInfo=function(b){var c=this.player.user.status();c&&c.owner&&(this.pauseInfo={userName:c.owner.name,mid:c.owner.mid,videoPic:c.pic,avatar:c.owner.face,playCounts:c.stat.view,danmakuCounts:c.stat.danmaku});\"function\"===\ntypeof b&&b()};b.prototype._getImage=function(b){var c=new Image,d=\"https:\"+g.a.EXTERNAL_PLAYER_JUMP.replace(/<bvid>/,\"\"+(this.player.config.bvid||\"av\"+this.player.config.aid))+\"?source=offsite\";c.src=\"//static.hdslb.com/player/images/ic_launcher.png\";c.onload=function(){b({text:d,render:\"canvas\",size:60,mode:4,mSize:.25,quiet:0,minVersion:1,ecLevel:\"M\",fill:\"#626A6F\",background:\"#fff\",radius:10,image:c})}};b.prototype._generateQRcode=function(b){this.qrcode=new h.a(this.template.qrcode[0],b)};b.prototype._bindEvents=\nfunction(){var b=this;this.template.avatar.off(\"click\").on(\"click\",function(){window.open(\"//space.bilibili.com/\"+b.pauseInfo.mid);b.player.trackInfoPush(\"offsite_pausepage_upavatar_click\");return!1});this.template.name.off(\"click\").on(\"click\",function(){window.open(\"//space.bilibili.com/\"+b.pauseInfo.mid);b.player.trackInfoPush(\"offsite_pausepage_upname_click\");return!1});this.template.video.off(\"click\").on(\"click\",function(){var c=g.a.EXTERNAL_PLAYER_JUMP.replace(/<bvid>/,\"\"+(b.bvid||\"av\"+b.aid));\nwindow.open(c);b.player.trackInfoPush(\"offsite_pausepage_cover_click\");return!1});this.template.qrcode.off(\"click\").on(\"click\",function(){window.open(\"https://www.bilibili.com/video/\"+(b.player.config.bvid||\"av\"+b.player.config.aid)+(1<b.player.config.p?\"/index_\"+b.player.config.p+\".html\":\"/\")+\"?zw\");b.player.trackInfoPush(\"offsite_pausepage_code_click\");return!1});this.template.mask.off(\"click\").on(\"click\",function(c,d){b.player.play(d);b.player.trackInfoPush(\"play_screen\");b.player.danmaku&&b.player.danmaku.contextmenu.hide();\nreturn!1});this.container.off(\"click\").on(\"click\",function(c,d){b.player.play(d);return!1})};b.prototype._formatCountsDisplay=function(b){if(!(0>b))return 1E4<b&&(b=(+b/Math.pow(10,4)).toFixed(1)+\"\\u4e07\"),b};b.prototype._removeEvents=function(){this.container.off()};b.prototype._removeNodes=function(){this.container.remove()};b.prototype._resize=function(){var b=this.player.template.container.outerWidth();var c=this.player.template.container.outerHeight(),k=this.player.state;this.template&&(this.player.state.mode===\nd.a.UI_MINI?(b=Math.min(b/480,c/180),this.template.title.css({transform:\"scale(\"+b+\")\"}),this._setVideoTitle(),this._setBackgroundPic()):(b=Math.min(b/960,c/544),this.template.info.css({transform:\"translate(-50%, -45%) scale(\"+b+\")\"}),this.initialized?k.video_state!==d.a.V_READY&&k.video_state!==d.a.V_PAUSE||this.show():(this.initialized=!0,this._setVideoPic(),this._getImage(this._generateQRcode.bind(this)))))};b.prototype.setCurrentTime=function(){this._setCurrentTime()};b.prototype.resize=function(){this._resize()};\nb.prototype.show=function(){this.player.state.mode===d.a.UI_MINI&&this._setCurrentTime();this.container.removeClass(\"hide\")};b.prototype.hide=function(){this.container.addClass(\"hide\")};b.prototype.destroy=function(){this._removeEvents();this._removeNodes()};return b}();v.a=n},function(p,v,n){var h=n(3),g=n(0),d=n(2);p=function(){function c(b){var c=this,d=this;this.imouse=0;this.player=b;this.prefix=b.prefix;this.aid=b.config.aid;this.bvid=b.config.bvid;this.container=b.template.suspensionbar;this.player.user.addCallback(function(){var b=\nc.player.user.status().title;c.title=b?b:c.bvid||\"av\"+c.aid;d._init()})}c.prototype._init=function(){this.container.html(this._TPL());this._initialTemplate();this._resize();this._bindEvents();this.container.removeClass(\"show\")};c.prototype._TPL=function(){var b=this.prefix;return'\\n            <div class=\"'+b+'-video-suspension-bar\">\\n                <div class=\"'+b+'-video-suspension-bar-title\">\\n                    <span class=\"'+b+'-video-suspension-bar-title-text\">'+d.a.htmlEncode(this.title)+\n'</span>\\n                </div>\\n                <div class=\"'+b+'-video-suspension-bar-btn-group\">\\n                    <div class=\"'+b+'-video-suspension-bar-btn-group-jumpbtn\">\\u53bbbilibili\\u89c2\\u770b</div>\\n                    <div class=\"'+b+'-video-suspension-bar-btn-group-sharebtn\">\\u5206\\u4eab</div>\\n                </div>\\n            </div>\\n        '};c.prototype._initialTemplate=function(){var b=this.prefix,c=this.container;this.template={title:c.find(\".\"+b+\"-video-suspension-bar\"),\njumpBtn:c.find(\".\"+b+\"-video-suspension-bar-btn-group-jumpbtn\"),shareBtn:c.find(\".\"+b+\"-video-suspension-bar-btn-group-sharebtn\")}};c.prototype._bindEvents=function(){if(this.template){var b=this.template.title,c=this.template.jumpBtn,d=this.template.shareBtn,k=this,m=h.a.EXTERNAL_PLAYER_JUMP.replace(/<bvid>/,\"\"+(k.bvid||\"av\"+k.aid));b.off(\"click\").on(\"click\",function(){window.open(m);k.player.trackInfoPush(\"offsite_bar_title_click\");return!1});c.off(\"click\").on(\"click\",function(){k.player.trackInfoPush(\"offsite_bar_gotobilibili_click\");\nwindow.open(m);return!1});d.off(\"click\").on(\"click\",function(){k.player.trackInfoPush(\"offsite_bar_share_click\");k.player.sharepanel.share.show();return!1});k._bindMouseMove()}};c.prototype._bindMouseMove=function(){var b=this,c=this,d=\"mouseover\"+this.player.config.namespace+\"suspension\",k=\"mouseleave\"+this.player.config.namespace+\"suspension\";this.player.template.playerWrap.bind(\"mousemove\"+this.player.config.namespace+\"suspension\",function(b){c.imouse=1;c.container.addClass(\"show\")});this.player.template.playerWrap.bind(d,\nfunction(d){clearInterval(b.timer);b.timer=window.setInterval(c._foo.bind(c),2E3)});this.player.template.playerWrap.bind(k,function(d){clearInterval(b.timer);c.container.removeClass(\"show\")})};c.prototype._foo=function(){0===this.imouse&&this.container.removeClass(\"show\");this.imouse=0};c.prototype._resize=function(){var b=this.player.state.mode,c=this.player.endingpanel.getState();b===g.a.UI_MINI?this.container.removeClass(\"show\"):\"none\"===c&&this.container.addClass(\"show\")};c.prototype._removeEvents=\nfunction(){this.player.template.playerWrap.off(\"mousemove\"+this.player.config.namespace+\"suspension mouseover\"+this.player.config.namespace+\"suspension mouseenter\"+this.player.config.namespace+\"suspension mouseleave\"+this.player.config.namespace+\"suspension\")};c.prototype._show=function(){this.container.removeClass(\"disabled\");this.container.removeClass(\"show\")};c.prototype._hide=function(){this.container.addClass(\"disabled\")};c.prototype.show=function(){this._show()};c.prototype.hide=function(){this._hide()};\nc.prototype.resize=function(){this._resize()};c.prototype.removeEvents=function(){this._removeEvents()};c.prototype.bindEvents=function(){this._bindEvents()};c.prototype.destroy=function(){this.removeEvents();this.container.remove();clearTimeout(this.timer)};return c}();v.a=p},function(p,v,n){var h=n(0),g=n(3);p=n(8);var d=n.n(p);n=function(){function c(b){this.player=b;this.prefix=b.prefix;this.aid=b.config.aid;this.bvid=b.config.bvid;this.container=b.template.sendjumpbar;this._init();this.player.eventLog.log(\"SendJumpModule Initialized\",\n0)}c.prototype._TPL=function(){var b=this.prefix;return'<div class=\"'+b+\"-video-btn-jump \"+b+'-video-btn-bilibili-logo\">\\n                    <div class=\"'+b+'-video-btn-jump-to-bilibili-logo-image-wrap\"> \\n                    </div> \\n                    <div class=\"'+b+'-video-btn-jump-to-bilibili-qrcode\">\\n                        <div class=\"'+b+'-video-btn-jump-to-bilibili-qrcode-text\">\\n                            \\u66f4\\u591a\\u7cbe\\u5f69 \\u5c3d\\u5728bilibili App\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\"'+\nb+'-video-jump-to-bilibili-detail-bar\">\\n                    <div class=\"'+b+'-video-jump-to-bilibili-detail-btn\"><span class=\"jump-to-bilibili-detail-btn-text\">\\u8fdb\\u5165bilibili,\\u4e00\\u8d77\\u53d1\\u5f39\\u5e55\\u5410\\u69fd!</span></div>\\n                    <div class=\"'+b+'-video-jump-to-bilibili-detail-btn-send\">\\u53bb\\u5410\\u69fd</div>\\n                </div>\\n            '};c.prototype._init=function(){this.container.html(this._TPL());this._initialTemplate();this._resize();this._getImgBase64(this._generateqrcode.bind(this));\nthis._bindEvents()};c.prototype._initialTemplate=function(){var b=this.container,c=this.prefix;this.template={bilibililogo:b.find(\".\"+c+\"-video-btn-bilibili-logo\"),jumpdetailbar:b.find(c+\"-video-jump-to-bilibili-detail-bar\"),jumpdetailtext:b.find(\".\"+c+\"-video-jump-to-bilibili-detail-btn\"),jumpdetailbtn:b.find(c+\"-video-to-bilibili-detail-btn\"),qrcode:b.find(\".\"+c+\"-video-btn-jump-to-bilibili-qrcode\"),jumpdetailbtnsend:b.find(\".\"+c+\"-video-jump-to-bilibili-detail-btn-send\")}};c.prototype._bindEvents=\nfunction(){var b=this,c=g.a.EXTERNAL_PLAYER_JUMP.replace(/<bvid>/,\"\"+(this.bvid||\"av\"+this.aid)),d=this;this.sendjumpbtn=this.player.ui.button(this.template.jumpdetailbtnsend,{disabled:!1,click:function(){window.open(c);d.player.trackInfoPush(\"offsite_danmuku_send_button_click\")}});this.template.bilibililogo.on(\"click\",function(){window.open(\"https://www.bilibili.com\");d.player.trackInfoPush(\"offsite_bilibiliicon_click\");return!1});this.template.jumpdetailtext.on(\"click\",function(){window.open(c);\nd.player.trackInfoPush(\"offsite_danmuku_button_click\");return!1});this.template.qrcode.on(\"click\",function(){window.open(\"https://app.bilibili.com\");return!1});this.template.bilibililogo.on(\"mouseenter\",function(){d.player.trackInfoPush(\"offsite_bilibiliicon_hover\");return!1});this.player.bind(h.a.EVENT.VIDEO_RESIZE,function(c,d){b._resize()})};c.prototype._generateqrcode=function(b){this.qrcode=new d.a(this.template.qrcode[0],b)};c.prototype._image2Base64=function(b){var c=document.createElement(\"canvas\"),\nd=c.getContext(\"2d\");c.width=b.width;c.height=b.height;d.drawImage(b,0,0,b.width,b.height);b=b.src.substring(b.src.lastIndexOf(\".\")+1).toLowerCase();return c.toDataURL(\"image/\"+b)};c.prototype._getImgBase64=function(b){var c=new Image;c.src=\"//static.hdslb.com/player/images/ic_launcher.png\";c.onload=function(){b({text:\"https://app.bilibili.com?source=offsite\",render:\"canvas\",size:140,mode:4,mSize:.2,quiet:2,minVersion:2,ecLevel:\"H\",fill:\"#626A6F\",background:\"#fff\",image:c})}};c.prototype._resize=\nfunction(){var b=this.container.width();this.template.jumpdetailbar.css(\"width\",b-80+\"px\");this.template.jumpdetailbtn.css(\"width\",b-225+\"px\")};return c}();v.a=n},function(p,v,n){var h=n(93),g=n(94),d=n(0),c=n(95),b=n(96),e=n(105),f=function(){function f(c,d){var e=this;this.player=d||{};this.config=c;this.danmaku=new b.a($.extend({listUpdating:function(){},danmakuFilter:function(b){return!e.player.block.judge(b)},danmakuInserting:function(b){8===Number(b.mode)&&e._easyMode8(b)},countUpdating:function(b){e.set_count(b)},\ncontainerUpdating:function(b){e._setType(b)},timeSyncFunc:function(){return e.player.video?1E3*e.player.currentTime():0}},c.danmaku_config,{container:c.danmaku_config.container,visible:c.danmaku_config.visible,type:c.danmaku_config.type,opacity:c.danmaku_config.opacity,fontFamily:c.danmaku_config.fontfamily,fontfamilycustom:c.danmaku_config.fontfamilycustom,bold:c.danmaku_config.bold,preventShade:c.danmaku_config.preventshade,fontBorder:c.danmaku_config.fontborder,speedPlus:c.danmaku_config.speedplus,\nfontSize:c.danmaku_config.fontsize,fullScreenSync:c.danmaku_config.fullscreensync,danmakuNumber:c.danmaku_config.danmakunumber,fullscreensend:c.danmaku_config.fullscreensend,defquality:c.danmaku_config.defquality,sameaspanel:c.danmaku_config.sameaspanel}));this.manager=this.danmaku.manager;this.load();this._globalEvents();this.player.eventLog.log(\"Danmaku Initialized\",0)}f.prototype.init=function(b,c){var d=this,e;this.danmaku.danmakuArray=b;this.initContextmenu();for(b=0;b<this.danmaku.danmakuArray.length;b++)0!==\nthis.danmaku.danmakuArray[b].text.replace(/\\r/g,\"\").length&&this.danmaku.addTimely(this.danmaku.danmakuArray[b]);d.player.advDanmaku&&this.danmaku.danmakuArray.forEach(function(b){7===b.mode&&(e=$.extend({},b),e.stime*=1E3,d.player.advDanmaku.addDanmaku(e));9===b.mode&&(e=$.extend({},b),d.player.basDanmaku.add(e))})};f.prototype._globalEvents=function(){var b=this,c=this.player;c.bind(d.a.EVENT.VIDEO_MEDIA_SEEKED,function(c,d){b.danmaku.seek(d.time);b.player.basDanmaku&&b.player.basDanmaku.seek(d.time,\n!0)});c.bind(d.a.EVENT.VIDEO_MEDIA_SEEKING,function(b,c){})};f.prototype.play=function(){this.danmaku.play();this.player.advDanmaku&&this.player.advDanmaku.play();this.player.basDanmaku&&this.player.basDanmaku.play()};f.prototype.pause=function(){this.danmaku.pause();this.player.advDanmaku&&this.player.advDanmaku.pause();this.player.basDanmaku&&this.player.basDanmaku.pause()};f.prototype.seek=function(b,c){this.danmaku.seek(b,c)};f.prototype.resize=function(){this.danmaku.resize();this.player.advDanmaku&&\nthis.player.advDanmaku.resize();this.player.basDanmaku&&this.player.basDanmaku.resize()};f.prototype.visible=function(b){this.danmaku.visible(b);this.player.advDanmaku&&this.player.advDanmaku.visible(b);this.player.basDanmaku&&this.player.basDanmaku.visible(b)};f.prototype.add=function(b){this.danmaku.add(b)};f.prototype.fresh=function(){this.manager.fresh();this.player.advDanmaku&&this.player.advDanmaku.refreshCdmList(!0)};f.prototype.clear=function(){this.danmaku.clear();this.player.advDanmaku&&\nthis.player.advDanmaku.clear();this.player.basDanmaku&&this.player.basDanmaku.clear()};f.prototype.option=function(b,c){this.danmaku.option(b,c)};f.prototype.load=function(){var b=this,c=this.player,f=this.config.timestamp;c.trigger(d.a.EVENT.VIDEO_DANMAKU_LOAD);var k=f?0===f?this.config.host+\"?oid=\"+this.player.config.cid:\"//comment.bilibili.com/dmroll,\"+f+\",\"+this.player.config.cid:this.config.url;b.player.errorPlayurl?(b.init([],0),c.trigger(d.a.EVENT.VIDEO_DANMAKU_LOADED,!0)):(new e.a({url:k})).getData({success:function(e){var m=\n+new Date;b.init(e.danmakuArray,e.total);c.trigger(d.a.EVENT.VIDEO_DANMAKU_LOADED,!0,\"time:\"+e.loadTime+\",analyzeTime:\"+e.parseTime+\",addTime:\"+(+new Date-m)+\",num:\"+e.danmakuArray.length)},error:function(e,m){g.a.errorMonitor({http_code:m?m.status||0:0,uid:b.player.user.status().uid||\"0\",error_msg:e,app_version:b.player.getVersion().hash,request_url:b.config.url,crash_time:(+new Date).toString()});c.trigger(d.a.EVENT.VIDEO_DANMAKU_LOADED,!1,(m&&m.status?m.status+\",\":\",\")+\"url:\"+k);b._ifLoadedFailed();\nb.failed(function(){b.load()})}})};f.prototype.reload=function(b){var c=this,m=this.player,f=b?0===b?this.config.host+\"?oid=\"+this.player.config.cid:\"//comment.bilibili.com/dmroll,\"+b+\",\"+this.player.config.cid:this.config.url;this.clear();m.trigger(d.a.EVENT.VIDEO_DANMAKU_LOAD);(new e.a({url:f})).getData({success:function(b){var e=+new Date;c.danmaku.danmakuArray=b.danmakuArray;c._reload();c.player.template.infoDanmakuNow.html(b.danmakuArray.length);c.player.user.update_number(b.danmakuArray.length);\nm.trigger(d.a.EVENT.VIDEO_DANMAKU_LOADED,!0,\"time:\"+b.loadTime+\",analyzeTime:\"+b.parseTime+\",addTime:\"+(+new Date-e)+\",num:\"+b.danmakuArray.length)},error:function(e,k){g.a.errorMonitor({http_code:k.status,uid:c.player.user.status().uid||\"0\",error_msg:e,app_version:c.player.getVersion().hash,request_url:c.config.url,crash_time:(+new Date).toString()});m.trigger(d.a.EVENT.VIDEO_DANMAKU_LOADED,!1,(k&&k.status?k.status+\",\":\",\")+\"url:\"+f);c._ifLoadedFailed();c.failed(function(){c.reload(b)})}})};f.prototype._reload=\nfunction(){this.danmaku.reload();this.manager.visualArray=this.danmaku.visualArray;this.manager.timeLine=this.danmaku.timeLine;for(var b=0;b<this.danmaku.danmakuArray.length;b++)if(0!==this.danmaku.danmakuArray[b].text.replace(/\\r/g,\"\").length){this.danmaku.addTimely(this.danmaku.danmakuArray[b]);if(7===this.danmaku.danmakuArray[b].mode&&this.player.advDanmaku){var c=$.extend({},this.danmaku.danmakuArray[b]);c.stime*=1E3;this.player.advDanmaku.addDanmaku(c)}9===this.danmaku.danmakuArray[b].mode&&\nthis.player.basDanmaku&&(c=$.extend({},this.danmaku.danmakuArray[b]),this.player.basDanmaku.add(c))}};f.prototype._setType=function(b){this.player.template.danmaku=$(b);this.danmaku&&(this.manager=this.danmaku.manager)};f.prototype._easyMode8=function(b){var c=b.text.replace(/\\/\\*(.*?)\\*\\//g,\"\").replace(/\\r/g,\"\");c&&(c=c.match(/^Player\\.seek\\((\\d+)\\);$/))&&!this.player.block.judge(b)&&this.player.seek(Math.floor(c[1])/1E3)};f.prototype.failed=function(b){b=this.player.template;b.danmakuWrap.css(\"height\",\nb.container.outerHeight()-b.info.outerHeight()-b.filters.outerHeight()-b.danmakuFunction.outerHeight()-b.historyBtn.outerHeight()-10+\"px\")};f.prototype.set_count=function(b){this.player.template.infoDanmakuNow.html(this.danmaku.danmakuArray.length);this.player.user.update_number(this.danmaku.danmakuArray.length);b&&this.player.template.infoDanmakuMax.html(b)};f.prototype.initContextmenu=function(){var b=this,d=this.player,e=$(this.danmaku.config.container).parent();this.contextmenu=new h.a(this.player,\ne,{menu:[],appendTo:this.player.template.container,targetClass:\"bilibili-video-comment\",changedMode:!0,changedType:2,showOrigin:!0,theme:\"black\",showDefMenu:!1,onChange:function(){var e=b.player.prefix+\"-context-menu-origin\";b.contextmenu.$container.removeClass(e);var m=[];b.contextmenu.$container.addClass(e);m.unshift({type:\"tabs\",text:\"\\u64ad\\u653e\\u901f\\u5ea6\",tabs:function(){for(var e=$('<div class=\"'+d.prefix+'-contextmenu-subwrapp\">'),m=[{name:\"0.5\",value:.5},{name:\"0.75\",value:.75},{name:\"\\u6b63\\u5e38\",\nvalue:1},{name:\"1.25\",value:1.25},{name:\"1.5\",value:1.5},{name:\"2.0\",value:2}],f=1,k=0;k<m.length;k++)m[k].value===d.video.playbackRate&&(f=d.video.playbackRate),e.append('<span data-rate=\"'+m[k].value+'\">'+m[k].name+\"</span>\");var g=e.find(\"span\");g.hover(function(){var b=$(this);g.not(b).removeClass(\"hover\");b.addClass(\"hover\")},function(){$(this).removeClass(\"hover\")});new c.a(e,{type:\"click.tab\",primary:'[data-rate=\"'+f+'\"]',selector:\"span\",onChange:function(c){c=c.attr(\"data-rate\");var e=Number(c);\nd.video.playbackRate=e;d.config.ad||d.setSession(\"video_status\",\"videospeed\",e);b.player.trackInfoPush(\"videospeed_contextmenu\",c);b.contextmenu.hide()}});return e}},{type:\"tabs\",text:\"\\u753b\\u9762\\u6bd4\\u4f8b\",tabs:function(){for(var e=$('<div class=\"'+d.prefix+'-contextmenu-subwrapp\">'),m=[{name:\"\\u9ed8\\u8ba4\",value:\"video-size-default\"},{name:\"4:3\",value:\"video-size-4-3\"},{name:\"16:9 \",value:\"video-size-16-9\"}],f=\"video-size-default\",k=d.controller.cacheRatioClass(),g=[\"video-size-default\",\"video-size-4-3\",\n\"video-size-16-9\"],t=0;t<m.length;t++)k===m[t].value&&(f=m[t].value),e.append('<span data-ratio-class=\"'+m[t].value+'\">'+m[t].name+\"</span>\");var h=e.find(\"span\");h.hover(function(){var b=$(this);h.not(b).removeClass(\"hover\");b.addClass(\"hover\")},function(){$(this).removeClass(\"hover\")});new c.a(e,{type:\"click.tab\",primary:'[data-ratio-class=\"'+f+'\"]',selector:\"span\",onChange:function(c){c=c.attr(\"data-ratio-class\");d.template.videoWrp.removeClass(g.join(\" \")).addClass(c);d.controller.setVideoSize();\nd.controller.cacheRatioClass(c);\"video-size-default\"!==c&&d.track.send(\"screen_proportion\");b.contextmenu.hide()}});return e}},{type:\"function\",text:d.template.videoWrp.hasClass(\"video-mirror\")?'<span class=\"active\">\\u955c\\u50cf</span>':\"\\u955c\\u50cf\",click:function(){b.player.trackInfoPush(\"videomirror_contextmenu\",!d.template.videoWrp.hasClass(\"video-mirror\"));d.setting&&d.setting.videomirror(!d.template.videoWrp.hasClass(\"video-mirror\"));d.setSession(\"video_status\",\"videomirror\",d.setting.videomirror())}});\nm=m.concat(this.defMenu).reverse();m.unshift({type:\"function\",text:d._isVideoInfoPanelOpened()?'<span class=\"active\">\\u89c6\\u9891\\u7edf\\u8ba1\\u4fe1\\u606f</span>':\"\\u89c6\\u9891\\u7edf\\u8ba1\\u4fe1\\u606f\",click:function(){d._isVideoInfoPanelOpened()?d._hideVideoInfoPanel():d._showVideoInfoPanel()}});return m}})};f.prototype._ifLoadedFailed=function(){this.danmaku.danmakuArray=[];this._reload()};f.prototype.destroy=function(){};return f}();v.a=function(b,c){return new f(b,c)}},function(p,v,n){var h=n(19),\ng=n(0),d=n(10);p=function(){function c(b,c,f){this.bilibiliPlayerDefaultMenu=[{type:\"function\",icon:\"\",text:\"\\u66f4\\u65b0\\u5386\\u53f2 \"+d.a.hash,link:\"//www.bilibili.com/blackboard/webplayer_history.html#html5\"}];this.player=b;this.container=c;this.config=$.extend({menu:[],appendTo:$(document.body),targetClass:\"\",align:\"left\",theme:\"white\",changedMode:!1,changedType:0,autoRemove:!0,showOrigin:!1,showDefMenu:!0,defMenu:this.bilibiliPlayerDefaultMenu,onChange:function(){}},f);this.config.showDefMenu&&\n(this.config.menu=this.config.menu.concat(this.config.defMenu));this.disabledStatus=0;this.getUniqueId=this.reGetUniqueId();this.callbackObj={};this.perfix=b.prefix;this.componentName=\"context-menu\";this.initialize()}c.prototype.initialize=function(){var b=this.cssPrefix.bind(this),c=this.config.theme;this.config.appendTo.addClass(\"relative\");this.$container=$(\"<div>\").addClass(b(\"container \"+c)).appendTo(this.config.appendTo);this.$container.append(this.menuTemplate(this.config.menu));this.$ul=this.$container.find(\">ul\").eq(0);\nthis.$menuList=this.$container.find(\">ul>li>a.context-menu-a\");this.$lines=this.$container.find(\".context-line\");this.bindEvents()};c.prototype.bindEvents=function(){var b=this,c=this.player,d=b.config.targetClass,k;this.stopCaptureCallback=function(d){$.contains(c.template.videoWrp[0],d.target)&&c.template.container.find(\".\"+c.prefix+\"-context-menu-container.black\").hasClass(\"active\")&&(d.stopPropagation(),2!==d.button&&(k=$(d.target),!$.contains(b.$container[0],k[0])&&b.hide()))};document.addEventListener(\"click\",\nthis.stopCaptureCallback,!0);this.player.$window.on(\"click\",function(c){if(2===c.button)return!0;k=$(c.target);!$.contains(b.$container[0],k[0])&&b.hide()}).on(\"contextmenu\",function(c){k=$(c.target);$.contains(b.$container[0],k[0])||$.contains(b.container[0],k[0])||b.hide()}).on(\"keydown\",function(c){27===c.keyCode&&b.hide()});h.a&&h.a.raw&&this.player.window.document.addEventListener(h.a.raw.fullscreenchange,function(){b.hide()});this.container.bind(\"contextmenu\",function(c){if(!b.disabledStatus){if(!b.isHidden()&&\nb.config.showOrigin)return b.hide(),!0;c.preventDefault();b.hide();k=$(c.target);var e=c.pageX-1,m=c.pageY-1;k.closest(\".\"+d).length&&(k=k.closest(\".\"+d),b.$target=k);b.show(e,m,c)}});this.$container.on(\"click\",\".js-action\",function(c){var d=$(c.currentTarget),e=d.attr(\"data-id\"),d=parseInt(d.attr(\"data-disabled\"),10),e=b.callbackObj[e];d?c.preventDefault():(\"function\"===typeof e&&e(b.$target,c),b.hide())}).on(\"contextmenu\",function(){return!1});this.player.bind(g.a.EVENT.VIDEO_DESTROY,function(){b.destroy()})};\nc.prototype.show=function(b,c,d){var e=$(window),m=e.width(),f=e.height(),g=e.scrollTop()||0,e=e.scrollLeft()||0,t=this.config.appendTo.offset();if(this.config.changedMode)switch(d=\"function\"===typeof this.config.onChange&&this.config.onChange(this.$target,d),this.config.changedType){case 0:this.resetMenu(d);break;case 1:this.addMenu(d);break;case 2:this.addMenu(d,!0)}d=this.$container.width();var h=this.$container.height();b=b+d+7>m+e?m-d-7+e:b;c=c+h+7>f+g?f-h-7+g:c;160>m-b-d&&this.$container.addClass(\"left-sub-menu\");\nb-=t.left;c-=t.top;this.$container.addClass(\"active\").css({top:c,left:b})};c.prototype.hide=function(){this.$target=null;this.$container.removeClass(\"active left-sub-menu\").css({top:-9999,left:-9999});if(this.config.changedMode&&this.config.autoRemove){var b=this.$ul.find('>li[data-append=\"1\"]'),c=b.find(\"a.context-menu-a[data-id]\"),d=this,k;c.each(function(b){k=c.eq(b).attr(\"data-id\");delete d.callbackObj[k]});b.hide();setTimeout(function(){b.remove()})}};c.prototype.isHidden=function(){return!this.$container.hasClass(\"active\")};\nc.prototype.setDisabled=function(b){0<=b?this.$menuList.eq(b).attr(\"data-disabled\",1):this.$menuList.attr(\"data-disabled\",1)};c.prototype.removeDisabled=function(b){0<=b?this.$menuList.eq(b).attr(\"data-disabled\",0):this.$menuList.attr(\"data-disabled\",0)};c.prototype.setHidden=function(b){0<=b?this.$menuList.eq(b).addClass(\"hidden\"):this.$menuList.addClass(\"hidden\")};c.prototype.removeHidden=function(b){0<=b?this.$menuList.eq(b).removeClass(\"hidden\"):this.$menuList.removeClass(\"hidden\")};c.prototype.delete=\nfunction(b){0<=b?(this.$menuList.eq(b).parent().remove(),this.$menuList.splice(b,1)):(this.$menuList.each(function(){$(this).parent().remove()}),this.$menuList=[])};c.prototype.disableMenu=function(){this.hide();this.disabledStatus=1};c.prototype.enableMenu=function(){this.disabledStatus=0};c.prototype.toggleDisabled=function(){this.hide();this.disabledStatus=this.disabledStatus?0:1};c.prototype.addMenu=function(b,c){var d=this;b instanceof Array&&b.forEach(function(b){var e=d.menuLiTemplate(b,!0);\nc?d.$ul.prepend(e):d.$ul.append(e);\"function\"===typeof b.afterAppend&&b.afterAppend(e)});this.$menuList=this.$container.find(\">ul>li>a.context-menu-a\");this.$lines=this.$container.find(\".context-line\");this.$lines.hover(function(){var b=$(this);d.$lines.not(b).removeClass(\"hover\");b.addClass(\"hover\")},function(){$(this).removeClass(\"hover\");$(this).find(\".hover\").removeClass(\"hover\")})};c.prototype.resetMenu=function(b){this.callbackObj={};this.$container.html(this.menuTemplate(b))};c.prototype.shiftHover=\nfunction(b){var c=this.$lines.filter(\".hover\"),d=c.index(),k=c.find(\".bilibili-player-contextmenu-subwrapp span\"),m=k.filter(\".hover\"),g=m.index();switch(b){case \"up\":d--;0>d&&(d=this.$lines.length-1);c.removeClass(\"hover\");c.find(\".hover\").removeClass(\"hover\");this.$lines.eq(d).addClass(\"hover\");break;case \"down\":d++;d>=this.$lines.length&&(d=0);c.removeClass(\"hover\");c.find(\".hover\").removeClass(\"hover\");this.$lines.eq(d).addClass(\"hover\");break;case \"left\":k.length&&(g--,0>g&&(g=k.length-1),m.removeClass(\"hover\"),\nk.eq(g).addClass(\"hover\"));break;case \"right\":k.length&&(g++,g>=k.length&&(g=0),m.removeClass(\"hover\"),k.eq(g).addClass(\"hover\"))}};c.prototype.triggerHover=function(){var b=this.$lines.filter(\".hover\"),c=b.find(\".js-action\"),b=b.find(\".hover\");c.length?c[0].click():b.length&&b[0].click()};c.prototype.destroy=function(){document.removeEventListener(\"click\",this.stopCaptureCallback,!0)};c.prototype.reGetUniqueId=function(){var b=0;return function(){return\"bp_cm_\"+b++}};c.prototype.cssPrefix=function(b){return this.perfix+\n\"-\"+this.componentName+\"-\"+b};c.prototype.menuLiTemplate=function(b,c){c=c?1:0;var d=b.type.trim();c=$(\"<li>\").addClass(\"context-line context-menu-\"+d).attr(\"data-append\",c);var e=b.title||\"\",m=b.link||\"javascript:void(0);\",g=b.link?'target=\"_blank\"':\"\",h=b.disabled?1:0,t=b.icon?'<span class=\"'+b.icon+'\"></span>':\"\";$('<span style=\"color:inherit;\">');switch(d){case \"title\":c.html('<a class=\"context-menu-a\" title=\"'+e+'\" href=\"javascript:void(0);\">'+t+b.text+\"</a>\");break;case \"descipline\":c.html('<a class=\"context-menu-a\" href=\"javascript:void(0);\"></a>');\nbreak;case \"function\":d=this.getUniqueId();this.callbackObj[d]=b.click;c.html('<a class=\"context-menu-a js-action\" title=\"'+e+'\" data-id=\"'+d+'\" href=\"'+m+'\" data-disabled=\"'+h+'\"  '+g+\">\"+t+b.text+\"</a>\");break;case \"menu\":c.html('<a class=\"context-menu-a\" title=\"'+e+'\" href=\"javascript:void(0);\" data-disabled=\"'+h+'\" '+g+\">\"+t+b.text+'<span class=\"bpui-icon bpui-icon-arrow-down\" style=\"transform:rotate(-90deg);margin-top:3px;\"></span></a>');c.append(this.menuTemplate(b.menu));break;case \"tabs\":\"function\"===\ntypeof b.tabs&&(d=b.tabs(),b=$(\"<span>\").append(b.text),e=$('<a class=\"context-menu-a\" href=\"javascript:void(0);\">'),e.append(b).append(d),c.append(e))}return $(c)};c.prototype.menuTemplate=function(b){var c=this,d=$(\"<ul>\").appendTo($(\"body\"));b instanceof Array&&b.forEach(function(b){var e=c.menuLiTemplate(b);d.append(e);\"function\"===typeof b.afterAppend&&b.af